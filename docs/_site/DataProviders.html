<!DOCTYPE HTML>
<html lang="en-US">

<head>
    <title>React-admin - Data Providers</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="">
    <meta name="HandheldFriendly" content="true" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="/css/materialize.min.css">
    <link rel="stylesheet" href="/css/style-v6.css">
    <link rel="stylesheet" href="/css/syntax.css">
    <link rel="stylesheet" href="/css/prism.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <!-- You won't find analytics tags in this page. React-admin protects your privacy! -->
</head>

<body>

    <header>
        <nav>
            <a href="#" data-target="slide-out" class="sidenav-trigger"><i class="material-icons">menu</i></a>
            <div class="nav-wrapper" style="background: linear-gradient(145deg,#027be3 11%,#1a237e 75%)">
                <div class="left">
                    <form action="#" onsubmit="return false;">
                        <div class="input-field" style="position:absolute">
                            <input type="search" name="q" id="query" size="31" maxlength="255" value=""
                                style="vertical-align:inherit!important" />
                            <label class="label-icon" for="test"><i class="material-icons">search</i></label>
                            <i class="material-icons">close</i>
                        </div>
                        <span id="search"></span>
                    </form>
                </div>
                <ul id="nav-mobile" class="right hide-on-med-and-down">
                    <li class="active"><a href="https://marmelab.com/react-admin/Readme.html">Documentation</a></li>
                    <li><a href="https://marmelab.com/react-admin-demo">Demo</a></li>
                    <li><a href="https://marmelab.com/en/blog/#react-admin">Blog</a></li>
                    <li><a href="https://github.com/marmelab/react-admin">GitHub</a></li>
                </ul>
            </div>
        </nav>
        <ul id="slide-out" class="sidenav sidenav-fixed">
            <li class="logo">
                <a href="http://localhost:4000"><img src="http://localhost:4000/assets/logo_white.png" /></a>
            </li>
            <li class="version">
                
            </li>
            <li ><a href="./Readme.html">Read Me</a></li>
<li ><a href="./Tutorial.html">Tutorial</a>
</li>
<li  class="active" ><a href="./DataProviders.html">Data
                Providers</a></li>
<li ><a
                href="./Admin.html"><code>&lt;Admin&gt;</code></a>
</li>
<li ><a href="./Resource.html">
                <code>&lt;Resource&gt;</code>
        </a></li>
<li ><a href="./List.html"><code>&lt;List&gt;</code>
                View</a></li>
<li ><a
                href="./CreateEdit.html"><code>&lt;Create&gt;</code>
                and <code>&lt;Edit&gt;</code> Views</a>
</li>
<li ><a href="./Show.html"><code>&lt;Show&gt;</code>
    View</a></li>
<li ><a
    href="./Fields.html"><code>&lt;Field&gt;</code>
    Components</a></li>
<li ><a
                href="./Inputs.html"><code>&lt;Input&gt;</code>
                Components</a></li>
<li ><a
                href="./Authentication.html">Authentication</a></li>
<li ><a
                href="./Authorization.html">Authorization</a></li>
<li ><a href="./Actions.html">Querying the
                API</a></li>
<li ><a href="./Theming.html">Theming</a></li>
<li ><a href="./Translation.html">Translation</a>
</li>
<li ><a href="./Caching.html">Caching</a>
</li>
<li ><a href="./CustomApp.html">Including in
                Another App</a>
</li>
<li ><a href="./Reference.html">Reference</a>
</li>
<li ><a href="./Ecosystem.html">Ecosystem</a>
</li>
<li ><a href="./UnitTesting.html">Unit
    Testing</a></li>
<li ><a
        href="./AdvancedTutorials.html">Advanced
        tutorials</a></li>
<li ><a href="./FAQ.html">FAQ</a></li>

        </ul>

    </header>

    <main>
        <div class="container">
            <div class="row">
                <div class="col s12 m8 offset-m1 xl7 offset-xl1 markdown-section DocSearch-content">
                    <h1 id="data-providers">Data Providers</h1>

<p>Whenever react-admin needs to communicate with the API, it calls methods on the Data Provider object.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">dataProvider</span>
    <span class="p">.</span><span class="nf">getOne</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">123</span> <span class="p">})</span>
    <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// { id: 123, title: "hello, world" }</span>
    <span class="p">});</span>
</code></pre></div></div>

<p>It’s the Data Provider’s job to turn these method calls into HTTP requests, and transform the HTTP responses to the data format expected by react-admin. In technical terms, a Data Provider is an <em>adapter</em> for an API.</p>

<p>And to inject a Data Provider in a react-admin application, pass it as the <code class="language-plaintext highlighter-rouge">dataProvider</code> prop of the <code class="language-plaintext highlighter-rouge">&lt;Admin&gt;</code> component, as follows:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Admin</span><span class="p">,</span> <span class="nx">Resource</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">dataProvider</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../myDataProvider</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Admin</span> <span class="na">dataProvider</span><span class="p">=</span><span class="si">{</span><span class="nx">dataProvider</span><span class="si">}</span><span class="p">&gt;</span>
        // ...
    <span class="p">&lt;/</span><span class="nc">Admin</span><span class="p">&gt;</span>
<span class="p">)</span>
</code></pre></div></div>

<p>Thanks to this adapter injection system, react-admin can communicate with any API, whether it uses REST, GraphQL, RPC, or even SOAP, regardless of the dialect it uses. The Data Provider is also the ideal place to add custom HTTP headers, authentication, etc.</p>

<p><img src="./img/data-provider.png" alt="Data Provider architecture" /></p>

<p>A Data Provider must have the following methods:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">dataProvider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">getList</span><span class="p">:</span>    <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">,</span>
    <span class="na">getOne</span><span class="p">:</span>     <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">,</span>
    <span class="na">getMany</span><span class="p">:</span>    <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">,</span>
    <span class="na">getManyReference</span><span class="p">:</span> <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">,</span>
    <span class="na">create</span><span class="p">:</span>     <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">,</span>
    <span class="na">update</span><span class="p">:</span>     <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">,</span>
    <span class="na">updateMany</span><span class="p">:</span> <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">,</span>
    <span class="na">delete</span><span class="p">:</span>     <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">,</span>
    <span class="na">deleteMany</span><span class="p">:</span> <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You can find an example Data Provider implementation at the end of this chapter.</p>

<p><strong>Tip</strong>: In react-admin v2, Data Providers used to be functions, not objects. React-admin v3 can detect a legacy Data Provider and wrap an object around it. So Data Providers developed for react-admin v2 still work with react-admin v3.</p>

<h2 id="available-providers">Available Providers</h2>

<p>The react-admin project includes 4 Data Providers:</p>

<ul>
  <li>Simple REST: <a href="https://github.com/marmelab/react-admin/tree/master/packages/ra-data-simple-rest">marmelab/ra-data-simple-rest</a> (<a href="#usage">read more below</a>). It serves mostly as an example. Incidentally, it is compatible with the <a href="https://github.com/marmelab/FakeRest">FakeRest</a> API.</li>
  <li><strong><a href="https://github.com/typicode/json-server">JSON server</a></strong>: <a href="https://github.com/marmelab/react-admin/tree/master/packages/ra-data-json-server">marmelab/ra-data-json-server</a>. Great for prototyping an admin over a yet-to-be-developed REST API.</li>
  <li><a href="https://graphql.org/">Simple GraphQL</a>: <a href="https://github.com/marmelab/react-admin/tree/master/packages/ra-data-graphql-simple">marmelab/ra-data-graphql-simple</a>. A GraphQL provider built with Apollo and tailored to target a simple GraphQL implementation.</li>
  <li>Local JSON: <a href="https://github.com/marmelab/react-admin/tree/master/packages/ra-data-fakerest">marmelab/ra-data-fakerest</a>. Based on a local object, it doesn’t even use HTTP. Use it for testing purposes.</li>
</ul>

<p>Developers from the react-admin community have open-sourced Data Providers for many more backends:</p>

<ul>
  <li><strong><a href="https://docs.amplify.aws">AWS Amplify</a></strong>: <a href="https://github.com/MrHertal/react-admin-amplify">MrHertal/react-admin-amplify</a></li>
  <li><strong><a href="https://github.com/zachrybaker/ra-data-rest-client">Configurable Identity Property REST Client</a></strong>: <a href="https://github.com/zachrybaker/ra-data-rest-client">zachrybaker/ra-data-rest-client</a></li>
  <li><strong><a href="https://www.django-rest-framework.org/">Django Rest Framework</a></strong>: <a href="https://github.com/synaptic-cl/ra-data-drf">synaptic-cl/ra-data-drf</a></li>
  <li><strong><a href="https://github.com/lalalilo/express-sequelize-crud">Express &amp; Sequelize</a></strong>: <a href="https://github.com/lalalilo/express-sequelize-crud">express-sequelize-crud</a></li>
  <li><strong><a href="https://www.feathersjs.com/">Feathersjs</a></strong>: <a href="https://github.com/josx/ra-data-feathers">josx/ra-data-feathers</a></li>
  <li><strong><a href="https://firebase.google.com/docs/firestore">Firebase Firestore</a></strong>: <a href="https://github.com/benwinding/react-admin-firebase">benwinding/react-admin-firebase</a>.</li>
  <li><strong><a href="https://firebase.google.com/docs/database">Firebase Realtime Database</a></strong>: <a href="https://github.com/aymendhaya/ra-data-firebase-client">aymendhaya/ra-data-firebase-client</a>.</li>
  <li><strong><a href="https://graphql.org/">GraphQL</a></strong>: <a href="https://github.com/marmelab/react-admin/tree/master/packages/ra-data-graphql">marmelab/ra-data-graphql</a> (uses <a href="https://www.apollodata.com/">Apollo</a>)</li>
  <li><strong><a href="http://stateless.co/hal_specification.html">HAL</a></strong>: <a href="https://github.com/b-social/ra-data-hal">b-social/ra-data-hal</a></li>
  <li><strong><a href="https://github.com/hasura/graphql-engine">Hasura</a></strong>: <a href="https://github.com/hasura/graphql-engine/tree/master/community/tools/ra-data-hasura">hasura/ra-data-hasura</a></li>
  <li><strong><a href="https://www.hydra-cg.com/">Hydra</a> / <a href="https://json-ld.org/">JSON-LD</a></strong>: <a href="https://github.com/api-platform/admin/blob/master/src/hydra/dataProvider.js">api-platform/admin/hydra</a></li>
  <li><strong><a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API">IndexedDB</a></strong>: <a href="https://github.com/tykoth/ra-data-dexie">tykoth/ra-data-dexie</a></li>
  <li><strong><a href="https://jsonapi.org/">JSON API</a></strong>: <a href="https://github.com/henvo/ra-jsonapi-client">henvo/ra-jsonapi-client</a></li>
  <li><strong><a href="https://tools.ietf.org/html/draft-kelly-json-hal-08">JSON HAL</a></strong>: <a href="https://www.npmjs.com/package/ra-data-json-hal">ra-data-json-hal</a></li>
  <li><strong><a href="https://github.com/typicode/json-server">JSON server</a></strong>: <a href="https://github.com/marmelab/react-admin/tree/master/packages/ra-data-json-server">marmelab/ra-data-json-server</a>.</li>
  <li><strong><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">LocalStorage</a></strong>: <a href="https://github.com/marmelab/react-admin/tree/master/packages/ra-data-localstorage">marmelab/ra-data-localstorage</a></li>
  <li><strong><a href="https://loopback.io/lb3">Loopback3</a></strong>: <a href="https://github.com/darthwesker/react-admin-loopback">darthwesker/react-admin-loopback</a></li>
  <li><strong><a href="https://loopback.io/">Loopback4</a></strong>: <a href="https://github.com/elmaistrenko/react-admin-lb4">elmaistrenko/react-admin-lb4</a></li>
  <li><strong><a href="https://github.com/RancaguaInnova/moleculer-data-provider">Moleculer Microservices</a></strong>: <a href="https://github.com/RancaguaInnova/moleculer-data-provider">RancaguaInnova/moleculer-data-provider</a></li>
  <li><strong><a href="https://github.com/nestjsx/crud">NestJS CRUD</a></strong>: <a href="https://github.com/rayman1104/ra-data-nestjsx-crud">rayman1104/ra-data-nestjsx-crud</a></li>
  <li><strong><a href="https://parseplatform.org/">Parse</a></strong>: <a href="https://github.com/almahdi/ra-data-parse">almahdi/ra-data-parse</a></li>
  <li><strong><a href="https://www.graphile.org/postgraphile/">PostGraphile</a></strong>: <a href="https://github.com/BowlingX/ra-postgraphile">bowlingx/ra-postgraphile</a></li>
  <li><strong><a href="https://postgrest.org/">PostgREST</a></strong>: <a href="https://github.com/raphiniert-com/ra-data-postgrest">raphiniert-com/ra-data-postgrest</a></li>
  <li><strong><a href="https://github.com/weakky/ra-data-prisma">Prisma</a></strong>: <a href="https://github.com/weakky/ra-data-prisma">weakky/ra-data-prisma</a></li>
  <li><strong><a href="https://www.prisma.io/">Prisma Version 2</a></strong>: <a href="https://github.com/panter/ra-data-prisma">panter/ra-data-prisma</a></li>
  <li><strong><a href="https://www.opencrud.org/">OpenCRUD</a></strong>: <a href="https://github.com/Weakky/ra-data-opencrud">weakky/ra-data-opencrud</a></li>
  <li><strong><a href="https://github.com/JKHeadley/rest-hapi">REST-HAPI</a></strong>: <a href="https://github.com/mkg20001/ra-data-rest-hapi">ra-data-rest-hapi</a></li>
  <li><strong><a href="https://sailsjs.com/">Sails.js</a></strong>: <a href="https://github.com/mpampin/ra-data-json-sails">mpampin/ra-data-json-sails</a></li>
  <li><strong><a href="https://spring.io/projects/spring-boot">Spring Boot</a></strong>: <a href="https://github.com/vishpat/ra-data-springboot-rest">vishpat/ra-data-springboot-rest</a></li>
  <li><strong><a href="https://strapi.io/">Strapi</a></strong>: <a href="https://github.com/nazirov91/ra-strapi-rest">nazirov91/ra-strapi-rest</a></li>
</ul>

<p>If you’ve written a Data Provider for another backend, and open-sourced it, please help complete this list with your package.</p>

<p><strong>Tip</strong>: In version 1, react-admin was called <a href="https://github.com/marmelab/admin-on-rest">admin-on-rest</a> (AOR), and developers shared Data Providers for even more backends. Due to breaking changes in v2, these providers are no longer working. Fortunately, Data Providers aren’t complex pieces of code, and using legacy Data Provider with a recent react-admin version requires minimal changes. If you are a maintainer of one of these projects, we would warmly welcome an upgrade.</p>

<ul>
  <li><strong><a href="https://github.com/abiglobalhealth/aor-dynamodb-client">DynamoDb</a></strong>: <a href="https://github.com/abiglobalhealth/aor-dynamodb-client">abiglobalhealth/aor-dynamodb-client</a></li>
  <li><strong><a href="https://github.com/dchester/epilogue">Epilogue</a></strong>: <a href="https://github.com/dunghuynh/aor-epilogue-client">dunghuynh/aor-epilogue-client</a></li>
  <li><strong><a href="https://github.com/ParsePlatform/parse-server">Parse Server</a></strong>: <a href="https://github.com/leperone/aor-parseserver-client">leperone/aor-parseserver-client</a></li>
  <li><strong><a href="https://github.com/o1lab/xmysql">Xmysql</a></strong>: <a href="https://github.com/soaserele/aor-xmysql">soaserele/aor-xmysql</a></li>
</ul>

<h2 id="usage">Usage</h2>

<p>As an example, let’s focus on the Simple REST data provider. It fits REST APIs using simple GET parameters for filters and sorting.</p>

<p>Install the <code class="language-plaintext highlighter-rouge">ra-data-simple-rest</code> package to use this provider.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn add ra-data-simple-rest
</code></pre></div></div>

<p>Then, initialize the provider with the REST backend URL, and pass the result to the <code class="language-plaintext highlighter-rouge">dataProvider</code> prop of the <code class="language-plaintext highlighter-rouge">&lt;Admin&gt;</code> component:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/App.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Admin</span><span class="p">,</span> <span class="nx">Resource</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">simpleRestProvider</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ra-data-simple-rest</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">PostList</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./posts</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Admin</span> <span class="na">dataProvider</span><span class="p">=</span><span class="si">{</span><span class="nf">simpleRestProvider</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://path.to.my.api/</span><span class="dl">'</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Resource</span> <span class="na">name</span><span class="p">=</span><span class="s">"posts"</span> <span class="na">list</span><span class="p">=</span><span class="si">{</span><span class="nx">PostList</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Admin</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div>

<p>Here is how this Data Provider maps react-admin calls to API calls:</p>

<table>
  <thead>
    <tr>
      <th>Method name</th>
      <th>API call</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getList</code></td>
      <td><code class="language-plaintext highlighter-rouge">GET http://my.api.url/posts?sort=["title","ASC"]&amp;range=[0, 24]&amp;filter={"title":"bar"}</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getOne</code></td>
      <td><code class="language-plaintext highlighter-rouge">GET http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getMany</code></td>
      <td><code class="language-plaintext highlighter-rouge">GET http://my.api.url/posts?filter={"id":[123,456,789]}</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getManyReference</code></td>
      <td><code class="language-plaintext highlighter-rouge">GET http://my.api.url/posts?filter={"author_id":345}</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">create</code></td>
      <td><code class="language-plaintext highlighter-rouge">POST http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">update</code></td>
      <td><code class="language-plaintext highlighter-rouge">PUT http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">updateMany</code></td>
      <td>Multiple calls to <code class="language-plaintext highlighter-rouge">PUT http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">delete</code></td>
      <td><code class="language-plaintext highlighter-rouge">DELETE http://my.api.url/posts/123</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">deleteMany</code></td>
      <td>Multiple calls to <code class="language-plaintext highlighter-rouge">DELETE http://my.api.url/posts/123</code></td>
    </tr>
  </tbody>
</table>

<p><strong>Note</strong>: The simple REST client expects the API to include a <code class="language-plaintext highlighter-rouge">Content-Range</code> header in the response to <code class="language-plaintext highlighter-rouge">getList</code> calls. The value must be the total number of resources in the collection. This allows react-admin to know how many pages of resources there are in total, and build the pagination controls.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Content-Range: posts 0-24/319
</code></pre></div></div>

<p>If your API is on another domain as the JS code, you’ll need to whitelist this header with an <code class="language-plaintext highlighter-rouge">Access-Control-Expose-Headers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS">CORS</a> header.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Access-Control-Expose-Headers: Content-Range
</code></pre></div></div>

<h2 id="adding-custom-headers">Adding Custom Headers</h2>

<p>The <code class="language-plaintext highlighter-rouge">simpleRestProvider</code> function accepts an HTTP client function as second argument. By default, it uses react-admin’s <code class="language-plaintext highlighter-rouge">fetchUtils.fetchJson()</code> function as HTTP client. It’s similar to HTML5 <code class="language-plaintext highlighter-rouge">fetch()</code>, except it handles JSON decoding and HTTP error codes automatically.</p>

<p>That means that if you need to add custom headers to your requests, you can just <em>wrap</em> the <code class="language-plaintext highlighter-rouge">fetchJson()</code> call inside your own function:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">fetchUtils</span><span class="p">,</span> <span class="nx">Admin</span><span class="p">,</span> <span class="nx">Resource</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">simpleRestProvider</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ra-data-simple-rest</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">fetchJson</span> <span class="o">=</span> <span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">options</span><span class="p">.</span><span class="nx">headers</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">options</span><span class="p">.</span><span class="nx">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Headers</span><span class="p">({</span> <span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="c1">// add your own headers here</span>
    <span class="nx">options</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">X-Custom-Header</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">foobar</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">fetchUtils</span><span class="p">.</span><span class="nf">fetchJson</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">dataProvider</span> <span class="o">=</span> <span class="nf">simpleRestProvider</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://path.to.my.api/</span><span class="dl">'</span><span class="p">,</span> <span class="nx">fetchJson</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Admin</span> <span class="na">dataProvider</span><span class="p">=</span><span class="si">{</span><span class="nx">dataProvider</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Resource</span> <span class="na">name</span><span class="p">=</span><span class="s">"posts"</span> <span class="na">list</span><span class="p">=</span><span class="si">{</span><span class="nx">PostList</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Admin</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>Now all the requests to the REST API will contain the <code class="language-plaintext highlighter-rouge">X-Custom-Header: foobar</code> header.</p>

<p><strong>Tip</strong>: The most common usage of custom headers is for authentication. <code class="language-plaintext highlighter-rouge">fetchJson</code> has built-on support for the <code class="language-plaintext highlighter-rouge">Authorization</code> token header:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">fetchJson</span> <span class="o">=</span> <span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">options</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">authenticated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">token</span><span class="p">:</span> <span class="dl">'</span><span class="s1">SRTRDFVESGNJYTUKTYTHRG</span><span class="dl">'</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">fetchUtils</span><span class="p">.</span><span class="nf">fetchJson</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">dataProvider</span> <span class="o">=</span> <span class="nf">simpleRestProvider</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://path.to.my.api/</span><span class="dl">'</span><span class="p">,</span> <span class="nx">fetchJson</span><span class="p">);</span>
</code></pre></div></div>

<p>Now all the requests to the REST API will contain the <code class="language-plaintext highlighter-rouge">Authorization: SRTRDFVESGNJYTUKTYTHRG</code> header.</p>

<h2 id="extending-a-data-provider-example-of-file-upload">Extending a Data Provider (Example of File Upload)</h2>

<p>As Data Providers are just objects, you can extend them with custom logic for a given method, or a given resource.</p>

<p>For instance, the following Data Provider extends the <code class="language-plaintext highlighter-rouge">ra-data-simple-rest</code> provider, and adds image upload support for the <code class="language-plaintext highlighter-rouge">update('posts')</code> call (react-admin offers an <code class="language-plaintext highlighter-rouge">&lt;ImageInput /&gt;</code> component that allows image upload).</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">simpleRestProvider</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ra-data-simple-rest</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">dataProvider</span> <span class="o">=</span> <span class="nf">simpleRestProvider</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://path.to.my.api/</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">myDataProvider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">...</span><span class="nx">dataProvider</span><span class="p">,</span>
    <span class="na">update</span><span class="p">:</span> <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">resource</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span> <span class="o">||</span> <span class="o">!</span><span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">pictures</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// fallback to the default implementation</span>
            <span class="k">return</span> <span class="nx">dataProvider</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="cm">/**
         * For posts update only, convert uploaded image in base 64 and attach it to
         * the `picture` sent property, with `src` and `title` attributes.
         */</span>
        
        <span class="c1">// Freshly dropped pictures are File objects and must be converted to base64 strings</span>
        <span class="kd">const</span> <span class="nx">newPictures</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">pictures</span><span class="p">.</span><span class="nf">filter</span><span class="p">(</span>
            <span class="nx">p</span> <span class="o">=&gt;</span> <span class="nx">p</span><span class="p">.</span><span class="nx">rawFile</span> <span class="k">instanceof</span> <span class="nx">File</span>
        <span class="p">);</span>
        <span class="kd">const</span> <span class="nx">formerPictures</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">pictures</span><span class="p">.</span><span class="nf">filter</span><span class="p">(</span>
            <span class="nx">p</span> <span class="o">=&gt;</span> <span class="o">!</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">rawFile</span> <span class="k">instanceof</span> <span class="nx">File</span><span class="p">)</span>
        <span class="p">);</span>

        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="nx">newPictures</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">convertFileToBase64</span><span class="p">))</span>
            <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">base64Pictures</span> <span class="o">=&gt;</span>
                <span class="nx">base64Pictures</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">picture64</span> <span class="o">=&gt;</span> <span class="p">({</span>
                    <span class="na">src</span><span class="p">:</span> <span class="nx">picture64</span><span class="p">,</span>
                    <span class="na">title</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
                <span class="p">}))</span>
            <span class="p">)</span>
            <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">transformedNewPictures</span> <span class="o">=&gt;</span>
                <span class="nx">dataProvider</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="p">{</span>
                    <span class="p">...</span><span class="nx">params</span><span class="p">,</span>
                    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
                        <span class="p">...</span><span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span>
                        <span class="na">pictures</span><span class="p">:</span> <span class="p">[</span>
                            <span class="p">...</span><span class="nx">transformedNewPictures</span><span class="p">,</span>
                            <span class="p">...</span><span class="nx">formerPictures</span><span class="p">,</span>
                        <span class="p">],</span>
                    <span class="p">},</span>
                <span class="p">})</span>
            <span class="p">);</span>
    <span class="p">},</span>
<span class="p">};</span>

<span class="cm">/**
 * Convert a `File` object returned by the upload input into a base 64 string.
 * That's not the most optimized way to store images in production, but it's
 * enough to illustrate the idea of data provider decoration.
 */</span>
<span class="kd">const</span> <span class="nx">convertFileToBase64</span> <span class="o">=</span> <span class="nx">file</span> <span class="o">=&gt;</span>
    <span class="k">new</span> <span class="nc">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileReader</span><span class="p">();</span>
        <span class="nx">reader</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">resolve</span><span class="p">(</span><span class="nx">reader</span><span class="p">.</span><span class="nx">result</span><span class="p">);</span>
        <span class="nx">reader</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="nx">reject</span><span class="p">;</span>

        <span class="nx">reader</span><span class="p">.</span><span class="nf">readAsDataURL</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">rawFile</span><span class="p">);</span>
    <span class="p">});</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">myDataProvider</span><span class="p">;</span>
</code></pre></div></div>

<p>Using this technique, you can also combine two Data Providers for two backends into a single object, or use a Proxy to transform responses for all methods.</p>

<h2 id="writing-your-own-data-provider">Writing Your Own Data Provider</h2>

<p>APIs are so diverse that quite often, none of the available Data Providers suit you API. In such cases, you’ll have to write your own Data Provider. Don’t worry, it usually takes only a couple of hours.</p>

<p>The methods of a Data Provider receive a request, and return a promise for a response. Both the request and the response format are standardized.</p>

<h2 id="request-format">Request Format</h2>

<p>Data queries require a <em>method</em> (e.g. <code class="language-plaintext highlighter-rouge">getOne</code>), a <em>resource</em> (e.g. ‘posts’) and a set of <em>parameters</em>.</p>

<p><strong>Tip</strong>: In comparison, HTTP requests require a <em>verb</em> (e.g. ‘GET’), an <em>url</em> (e.g. ‘http://myapi.com/posts’), a list of <em>headers</em> (like <code class="language-plaintext highlighter-rouge">Content-Type</code>) and a <em>body</em>.</p>

<p>Standard methods are:</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Usage</th>
      <th>Parameters format</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getList</code></td>
      <td>Search for resources</td>
      <td><code class="language-plaintext highlighter-rouge">{ pagination: { page: {int} , perPage: {int} }, sort: { field: {string}, order: {string} }, filter: {Object} }</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getOne</code></td>
      <td>Read a single resource, by id</td>
      <td><code class="language-plaintext highlighter-rouge">{ id: {mixed} }</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getMany</code></td>
      <td>Read a list of resource, by ids</td>
      <td><code class="language-plaintext highlighter-rouge">{ ids: {mixed[]} }</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getManyReference</code></td>
      <td>Read a list of resources related to another one</td>
      <td><code class="language-plaintext highlighter-rouge">{ target: {string}, id: {mixed}, pagination: { page: {int} , perPage: {int} }, sort: { field: {string}, order: {string} }, filter: {Object} }</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">create</code></td>
      <td>Create a single resource</td>
      <td><code class="language-plaintext highlighter-rouge">{ data: {Object} }</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">update</code></td>
      <td>Update a single resource</td>
      <td><code class="language-plaintext highlighter-rouge">{ id: {mixed}, data: {Object}, previousData: {Object} }</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">updateMany</code></td>
      <td>Update multiple resources</td>
      <td><code class="language-plaintext highlighter-rouge">{ ids: {mixed[]}, data: {Object} }</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">delete</code></td>
      <td>Delete a single resource</td>
      <td><code class="language-plaintext highlighter-rouge">{ id: {mixed}, previousData: {Object} }</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">deleteMany</code></td>
      <td>Delete multiple resources</td>
      <td><code class="language-plaintext highlighter-rouge">{ ids: {mixed[]} }</code></td>
    </tr>
  </tbody>
</table>

<p>Here are several examples of how react-admin can call the Data Provider:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">dataProvider</span><span class="p">.</span><span class="nf">getList</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">pagination</span><span class="p">:</span> <span class="p">{</span> <span class="na">page</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">perPage</span><span class="p">:</span> <span class="mi">5</span> <span class="p">},</span>
    <span class="na">sort</span><span class="p">:</span> <span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="dl">'</span><span class="s1">title</span><span class="dl">'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ASC</span><span class="dl">'</span> <span class="p">},</span>
    <span class="na">filter</span><span class="p">:</span> <span class="p">{</span> <span class="na">author_id</span><span class="p">:</span> <span class="mi">12</span> <span class="p">},</span>
<span class="p">});</span>
<span class="nx">dataProvider</span><span class="p">.</span><span class="nf">getOne</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">123</span> <span class="p">});</span>
<span class="nx">dataProvider</span><span class="p">.</span><span class="nf">getMany</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">ids</span><span class="p">:</span> <span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">124</span><span class="p">,</span> <span class="mi">125</span><span class="p">]</span> <span class="p">});</span>
<span class="nx">dataProvider</span><span class="p">.</span><span class="nf">getManyReference</span><span class="p">(</span><span class="dl">'</span><span class="s1">comments</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">target</span><span class="p">:</span> <span class="dl">'</span><span class="s1">post_id</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="na">sort</span><span class="p">:</span> <span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="dl">'</span><span class="s1">created_at</span><span class="dl">'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DESC</span><span class="dl">'</span> <span class="p">}</span>
<span class="p">});</span>
<span class="nx">dataProvider</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hello, world!</span><span class="dl">"</span> <span class="p">},</span>
    <span class="na">previousData</span><span class="p">:</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">previous title</span><span class="dl">"</span> <span class="p">}</span>
<span class="p">});</span>
<span class="nx">dataProvider</span><span class="p">.</span><span class="nf">updateMany</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">ids</span><span class="p">:</span> <span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">234</span><span class="p">],</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">views</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span>
<span class="p">});</span>
<span class="nx">dataProvider</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hello, world</span><span class="dl">"</span> <span class="p">}</span> <span class="p">});</span>
<span class="nx">dataProvider</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="na">previousData</span><span class="p">:</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hello, world</span><span class="dl">"</span> <span class="p">}</span>
<span class="p">});</span>
<span class="nx">dataProvider</span><span class="p">.</span><span class="nf">deleteMany</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">ids</span><span class="p">:</span> <span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">234</span><span class="p">]</span> <span class="p">});</span>
</code></pre></div></div>

<p><strong>Tip</strong>: If your API supports more request types, you can add more methods to the Data Provider (for instance to support upserts, aggregations, or Remote Procedure Call). React-admin won’t call these methods directly, but you can call them in your own component thanks to the <code class="language-plaintext highlighter-rouge">useDataProvider</code> hook described in the <a href="./Actions.md">Querying the API</a> documentation.</p>

<h2 id="response-format">Response Format</h2>

<p>Data Providers methods must return a Promise for an object with a <code class="language-plaintext highlighter-rouge">data</code> property.</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Response format</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getList</code></td>
      <td><code class="language-plaintext highlighter-rouge">{ data: {Record[]}, total: {int}, validUntil?: {Date} }</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getOne</code></td>
      <td><code class="language-plaintext highlighter-rouge">{ data: {Record}, validUntil?: {Date} }</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getMany</code></td>
      <td><code class="language-plaintext highlighter-rouge">{ data: {Record[]}, validUntil?: {Date} }</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getManyReference</code></td>
      <td><code class="language-plaintext highlighter-rouge">{ data: {Record[]}, total: {int} }</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">create</code></td>
      <td><code class="language-plaintext highlighter-rouge">{ data: {Record} }</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">update</code></td>
      <td><code class="language-plaintext highlighter-rouge">{ data: {Record} }</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">updateMany</code></td>
      <td><code class="language-plaintext highlighter-rouge">{ data: {mixed[]} }</code> The ids which have been updated</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">delete</code></td>
      <td><code class="language-plaintext highlighter-rouge">{ data: {Record} }</code> The record that has been deleted</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">deleteMany</code></td>
      <td><code class="language-plaintext highlighter-rouge">{ data: {mixed[]} }</code> The ids of the deleted records (optional)</td>
    </tr>
  </tbody>
</table>

<p>A <code class="language-plaintext highlighter-rouge">{Record}</code> is an object literal with at least an <code class="language-plaintext highlighter-rouge">id</code> property, e.g. <code class="language-plaintext highlighter-rouge">{ id: 123, title: "hello, world" }</code>.</p>

<p>Building up on the previous example, here are example responses matching the format expected by react-admin:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">dataProvider</span><span class="p">.</span><span class="nf">getList</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">pagination</span><span class="p">:</span> <span class="p">{</span> <span class="na">page</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">perPage</span><span class="p">:</span> <span class="mi">5</span> <span class="p">},</span>
    <span class="na">sort</span><span class="p">:</span> <span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="dl">'</span><span class="s1">title</span><span class="dl">'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ASC</span><span class="dl">'</span> <span class="p">},</span>
    <span class="na">filter</span><span class="p">:</span> <span class="p">{</span> <span class="na">author_id</span><span class="p">:</span> <span class="mi">12</span> <span class="p">},</span>
<span class="p">})</span>
<span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
<span class="c1">// {</span>
<span class="c1">//     data: [</span>
<span class="c1">//         { id: 126, title: "allo?", author_id: 12 },</span>
<span class="c1">//         { id: 127, title: "bien le bonjour", author_id: 12 },</span>
<span class="c1">//         { id: 124, title: "good day sunshine", author_id: 12 },</span>
<span class="c1">//         { id: 123, title: "hello, world", author_id: 12 },</span>
<span class="c1">//         { id: 125, title: "howdy partner", author_id: 12 },</span>
<span class="c1">//     ],</span>
<span class="c1">//     total: 27</span>
<span class="c1">// }</span>

<span class="nx">dataProvider</span><span class="p">.</span><span class="nf">getOne</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">123</span> <span class="p">})</span>
<span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
<span class="c1">// {</span>
<span class="c1">//     data: { id: 123, title: "hello, world" }</span>
<span class="c1">// }</span>

<span class="nx">dataProvider</span><span class="p">.</span><span class="nf">getMany</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">ids</span><span class="p">:</span> <span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">124</span><span class="p">,</span> <span class="mi">125</span><span class="p">]</span> <span class="p">})</span>
<span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
<span class="c1">// {</span>
<span class="c1">//     data: [</span>
<span class="c1">//         { id: 123, title: "hello, world" },</span>
<span class="c1">//         { id: 124, title: "good day sunshise" },</span>
<span class="c1">//         { id: 125, title: "howdy partner" },</span>
<span class="c1">//     ]</span>
<span class="c1">// }</span>

<span class="nx">dataProvider</span><span class="p">.</span><span class="nf">getManyReference</span><span class="p">(</span><span class="dl">'</span><span class="s1">comments</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">target</span><span class="p">:</span> <span class="dl">'</span><span class="s1">post_id</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="na">sort</span><span class="p">:</span> <span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="dl">'</span><span class="s1">created_at</span><span class="dl">'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DESC</span><span class="dl">'</span> <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>

<span class="c1">// {</span>
<span class="c1">//     data: [</span>
<span class="c1">//         { id: 667, title: "I agree", post_id: 123 },</span>
<span class="c1">//         { id: 895, title: "I don't agree", post_id: 123 },</span>
<span class="c1">//     ],</span>
<span class="c1">//     total: 2,</span>
<span class="c1">// }</span>

<span class="nx">dataProvider</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hello, world</span><span class="dl">"</span> <span class="p">}</span> <span class="p">})</span>
<span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
<span class="c1">// {</span>
<span class="c1">//     data: { id: 450, title: "hello, world" }</span>
<span class="c1">// }</span>

<span class="nx">dataProvider</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hello, world!</span><span class="dl">"</span> <span class="p">},</span>
    <span class="na">previousData</span><span class="p">:</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">previous title</span><span class="dl">"</span> <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
<span class="c1">// {</span>
<span class="c1">//     data: { id: 123, title: "hello, world!" }</span>
<span class="c1">// }</span>

<span class="nx">dataProvider</span><span class="p">.</span><span class="nf">updateMany</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">ids</span><span class="p">:</span> <span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">234</span><span class="p">],</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">views</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span>
<span class="p">})</span>
<span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
<span class="c1">// {</span>
<span class="c1">//     data: [123, 234]</span>
<span class="c1">// }</span>

<span class="nx">dataProvider</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="na">previousData</span><span class="p">:</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hello, world!</span><span class="dl">"</span> <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
<span class="c1">// {</span>
<span class="c1">//     data: { id: 123, title: "hello, world" }</span>
<span class="c1">// }</span>

<span class="nx">dataProvider</span><span class="p">.</span><span class="nf">deleteMany</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">ids</span><span class="p">:</span> <span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">234</span><span class="p">]</span> <span class="p">})</span>
<span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
<span class="c1">// {</span>
<span class="c1">//     data: [123, 234]</span>
<span class="c1">// }</span>
</code></pre></div></div>

<p><strong>Tip</strong>: The <code class="language-plaintext highlighter-rouge">validUntil</code> field in the response is optional. It enables the Application cache, a client-side optimization to speed up rendering and reduce network traffic. Check <a href="./Caching.md#application-cache">the Caching documentation</a> for more details.</p>

<h2 id="error-format">Error Format</h2>

<p>When the API backend returns an error, the Data Provider should return a rejected Promise containing an <code class="language-plaintext highlighter-rouge">Error</code> object. This object should contain a <code class="language-plaintext highlighter-rouge">status</code> property with the HTTP response code (404, 500, etc.). React-admin inspects this error code, and uses it for <a href="./Authentication.md">authentication</a> (in case of 401 or 403 errors). Besides, react-admin displays the error <code class="language-plaintext highlighter-rouge">message</code> on screen in a temporary notification.</p>

<p>If you use <code class="language-plaintext highlighter-rouge">fetchJson</code>, you don’t need to do anything: HTTP errors are automatically decorated as expected by react-admin.</p>

<p>If you use another HTTP client, make sure you return a rejected Promise. You can use the <code class="language-plaintext highlighter-rouge">HttpError</code> class to throw an error with status in one line:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">HttpError</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">getList</span><span class="p">:</span> <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nc">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nf">myApiClient</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span> <span class="p">...</span><span class="nx">options</span><span class="p">,</span> <span class="na">headers</span><span class="p">:</span> <span class="nx">requestHeaders</span> <span class="p">})</span>
                <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span>
                    <span class="nx">response</span><span class="p">.</span><span class="nf">text</span><span class="p">().</span><span class="nf">then</span><span class="p">(</span><span class="nx">text</span> <span class="o">=&gt;</span> <span class="p">({</span>
                        <span class="na">status</span><span class="p">:</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">,</span>
                        <span class="na">statusText</span><span class="p">:</span> <span class="nx">response</span><span class="p">.</span><span class="nx">statusText</span><span class="p">,</span>
                        <span class="na">headers</span><span class="p">:</span> <span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">,</span>
                        <span class="na">body</span><span class="p">:</span> <span class="nx">text</span><span class="p">,</span>
                    <span class="p">}))</span>
                <span class="p">)</span>
                <span class="p">.</span><span class="nf">then</span><span class="p">(({</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">statusText</span><span class="p">,</span> <span class="nx">headers</span><span class="p">,</span> <span class="nx">body</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
                    <span class="kd">let</span> <span class="nx">json</span><span class="p">;</span>
                    <span class="k">try</span> <span class="p">{</span>
                        <span class="nx">json</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">// not json, no big deal</span>
                    <span class="p">}</span>
                    <span class="k">if </span><span class="p">(</span><span class="nx">status</span> <span class="o">&lt;</span> <span class="mi">200</span> <span class="o">||</span> <span class="nx">status</span> <span class="o">&gt;=</span> <span class="mi">300</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="nf">reject</span><span class="p">(</span>
                            <span class="k">new</span> <span class="nc">HttpError</span><span class="p">(</span>
                                <span class="p">(</span><span class="nx">json</span> <span class="o">&amp;&amp;</span> <span class="nx">json</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span> <span class="o">||</span> <span class="nx">statusText</span><span class="p">,</span>
                                <span class="nx">status</span><span class="p">,</span>
                                <span class="nx">json</span>
                            <span class="p">)</span>
                        <span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">return</span> <span class="nf">resolve</span><span class="p">({</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">headers</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="nx">json</span> <span class="p">});</span>
                <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">},</span>
    <span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="example-implementation">Example Implementation</h2>

<p>Let’s say that you want to map the react-admin requests to a REST backend exposing the following API:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># getList

GET http://path.to.my.api/posts?sort=["title","ASC"]&amp;range=[0, 4]&amp;filter={"author_id":12}

HTTP/1.1 200 OK
Content-Type: application/json
Content-Range: posts 0-4/27
[
    { "id": 126, "title": "allo?", "author_id": 12 },
    { "id": 127, "title": "bien le bonjour", "author_id": 12 },
    { "id": 124, "title": "good day sunshine", "author_id": 12 },
    { "id": 123, "title": "hello, world", "author_id": 12 },
    { "id": 125, "title": "howdy partner", "author_id": 12 }
]

# getOne

GET http://path.to.my.api/posts/123

HTTP/1.1 200 OK
Content-Type: application/json
{ "id": 123, "title": "hello, world", "author_id": 12 }

# getMany

GET http://path.to.my.api/posts?filter={"id":[123,124,125]}

HTTP/1.1 200 OK
Content-Type: application/json
[
    { "id": 123, "title": "hello, world", "author_id": 12 },
    { "id": 124, "title": "good day sunshine", "author_id": 12 },
    { "id": 125, "title": "howdy partner", "author_id": 12 }
]

# getManyReference

GET http://path.to.my.api/comments?sort=["created_at","DESC"]&amp;range=[0, 24]&amp;filter={"post_id":123}

HTTP/1.1 200 OK
Content-Type: application/json
Content-Range: comments 0-1/2
[
    { "id": 667, "title": "I agree", "post_id": 123 },
    { "id": 895, "title": "I don't agree", "post_id": 123 }
]

# create

POST http://path.to.my.api/posts
{ "title": "hello, world", "author_id": 12 }

HTTP/1.1 200 OK
Content-Type: application/json
{ "id": 123, "title": "hello, world", "author_id": 12 }


# update

PUT http://path.to.my.api/posts/123
{ "title": "hello, world!" }

HTTP/1.1 200 OK
Content-Type: application/json
{ "id": 123, "title": "hello, world!", "author_id": 12 }

# updateMany

PUT http://path.to.my.api/posts?filter={"id":[123,124,125]}
{ "title": "hello, world!" }

HTTP/1.1 200 OK
Content-Type: application/json
[123, 124, 125]

# delete

DELETE http://path.to.my.api/posts/123

HTTP/1.1 200 OK
Content-Type: application/json
{ "id": 123, "title": "hello, world", "author_id": 12 }

# deleteMany

DELETE http://path.to.my.api/posts?filter={"id":[123,124,125]}

HTTP/1.1 200 OK
Content-Type: application/json
[123, 124, 125]
</code></pre></div></div>

<p>Here is an example implementation, that you can use as a base for your own Data Providers:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">fetchUtils</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">stringify</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">query-string</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">apiUrl</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://my.api.com/</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">httpClient</span> <span class="o">=</span> <span class="nx">fetchUtils</span><span class="p">.</span><span class="nx">fetchJson</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">getList</span><span class="p">:</span> <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">page</span><span class="p">,</span> <span class="nx">perPage</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">pagination</span><span class="p">;</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">field</span><span class="p">,</span> <span class="nx">order</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">sort</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">sort</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">([</span><span class="nx">field</span><span class="p">,</span> <span class="nx">order</span><span class="p">]),</span>
            <span class="na">range</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">([(</span><span class="nx">page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">perPage</span><span class="p">,</span> <span class="nx">page</span> <span class="o">*</span> <span class="nx">perPage</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]),</span>
            <span class="na">filter</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">filter</span><span class="p">),</span>
        <span class="p">};</span>
        <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">apiUrl</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">resource</span><span class="p">}</span><span class="s2">?</span><span class="p">${</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">query</span><span class="p">)}</span><span class="s2">`</span><span class="p">;</span>

        <span class="k">return</span> <span class="nf">httpClient</span><span class="p">(</span><span class="nx">url</span><span class="p">).</span><span class="nf">then</span><span class="p">(({</span> <span class="nx">headers</span><span class="p">,</span> <span class="nx">json</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">({</span>
            <span class="na">data</span><span class="p">:</span> <span class="nx">json</span><span class="p">,</span>
            <span class="na">total</span><span class="p">:</span> <span class="nf">parseInt</span><span class="p">(</span><span class="nx">headers</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">content-range</span><span class="dl">'</span><span class="p">).</span><span class="nf">split</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">).</span><span class="nf">pop</span><span class="p">(),</span> <span class="mi">10</span><span class="p">),</span>
        <span class="p">}));</span>
    <span class="p">},</span>

    <span class="na">getOne</span><span class="p">:</span> <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="nf">httpClient</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">apiUrl</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">resource</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">).</span><span class="nf">then</span><span class="p">(({</span> <span class="nx">json</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">({</span>
            <span class="na">data</span><span class="p">:</span> <span class="nx">json</span><span class="p">,</span>
        <span class="p">})),</span>

    <span class="na">getMany</span><span class="p">:</span> <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">filter</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nx">params</span><span class="p">.</span><span class="nx">ids</span> <span class="p">}),</span>
        <span class="p">};</span>
        <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">apiUrl</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">resource</span><span class="p">}</span><span class="s2">?</span><span class="p">${</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">query</span><span class="p">)}</span><span class="s2">`</span><span class="p">;</span>
        <span class="k">return</span> <span class="nf">httpClient</span><span class="p">(</span><span class="nx">url</span><span class="p">).</span><span class="nf">then</span><span class="p">(({</span> <span class="nx">json</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="nx">json</span> <span class="p">}));</span>
    <span class="p">},</span>

    <span class="na">getManyReference</span><span class="p">:</span> <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">page</span><span class="p">,</span> <span class="nx">perPage</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">pagination</span><span class="p">;</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">field</span><span class="p">,</span> <span class="nx">order</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">sort</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">sort</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">([</span><span class="nx">field</span><span class="p">,</span> <span class="nx">order</span><span class="p">]),</span>
            <span class="na">range</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">([(</span><span class="nx">page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">perPage</span><span class="p">,</span> <span class="nx">page</span> <span class="o">*</span> <span class="nx">perPage</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]),</span>
            <span class="na">filter</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">({</span>
                <span class="p">...</span><span class="nx">params</span><span class="p">.</span><span class="nx">filter</span><span class="p">,</span>
                <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">target</span><span class="p">]:</span> <span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
            <span class="p">}),</span>
        <span class="p">};</span>
        <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">apiUrl</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">resource</span><span class="p">}</span><span class="s2">?</span><span class="p">${</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">query</span><span class="p">)}</span><span class="s2">`</span><span class="p">;</span>

        <span class="k">return</span> <span class="nf">httpClient</span><span class="p">(</span><span class="nx">url</span><span class="p">).</span><span class="nf">then</span><span class="p">(({</span> <span class="nx">headers</span><span class="p">,</span> <span class="nx">json</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">({</span>
            <span class="na">data</span><span class="p">:</span> <span class="nx">json</span><span class="p">,</span>
            <span class="na">total</span><span class="p">:</span> <span class="nf">parseInt</span><span class="p">(</span><span class="nx">headers</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">content-range</span><span class="dl">'</span><span class="p">).</span><span class="nf">split</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">).</span><span class="nf">pop</span><span class="p">(),</span> <span class="mi">10</span><span class="p">),</span>
        <span class="p">}));</span>
    <span class="p">},</span>

    <span class="na">update</span><span class="p">:</span> <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="nf">httpClient</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">apiUrl</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">resource</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">),</span>
        <span class="p">}).</span><span class="nf">then</span><span class="p">(({</span> <span class="nx">json</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="nx">json</span> <span class="p">})),</span>

    <span class="na">updateMany</span><span class="p">:</span> <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">filter</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nx">params</span><span class="p">.</span><span class="nx">ids</span><span class="p">}),</span>
        <span class="p">};</span>
        <span class="k">return</span> <span class="nf">httpClient</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">apiUrl</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">resource</span><span class="p">}</span><span class="s2">?</span><span class="p">${</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">query</span><span class="p">)}</span><span class="s2">`</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">),</span>
        <span class="p">}).</span><span class="nf">then</span><span class="p">(({</span> <span class="nx">json</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="nx">json</span> <span class="p">}));</span>
    <span class="p">},</span>

    <span class="na">create</span><span class="p">:</span> <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="nf">httpClient</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">apiUrl</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">resource</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">),</span>
        <span class="p">}).</span><span class="nf">then</span><span class="p">(({</span> <span class="nx">json</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">({</span>
            <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="p">...</span><span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="na">id</span><span class="p">:</span> <span class="nx">json</span><span class="p">.</span><span class="nx">id</span> <span class="p">},</span>
        <span class="p">})),</span>

    <span class="na">delete</span><span class="p">:</span> <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="nf">httpClient</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">apiUrl</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">resource</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DELETE</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">}).</span><span class="nf">then</span><span class="p">(({</span> <span class="nx">json</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="nx">json</span> <span class="p">})),</span>

    <span class="na">deleteMany</span><span class="p">:</span> <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">filter</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nx">params</span><span class="p">.</span><span class="nx">ids</span><span class="p">}),</span>
        <span class="p">};</span>
        <span class="k">return</span> <span class="nf">httpClient</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">apiUrl</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">resource</span><span class="p">}</span><span class="s2">?</span><span class="p">${</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">query</span><span class="p">)}</span><span class="s2">`</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DELETE</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">),</span>
        <span class="p">}).</span><span class="nf">then</span><span class="p">(({</span> <span class="nx">json</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="nx">json</span> <span class="p">}));</span>
    <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="using-the-data-provider-in-components">Using The Data Provider In Components</h2>

<p>React-admin stores the Data Provider passed to <code class="language-plaintext highlighter-rouge">&lt;Admin&gt;</code> in a React context, so you can access it from anywhere in your code. To facilitate usage, react-admin provides many data provider hooks:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">useDataProvider</code></li>
  <li><code class="language-plaintext highlighter-rouge">useQuery</code></li>
  <li><code class="language-plaintext highlighter-rouge">useQueryWithStore</code></li>
  <li><code class="language-plaintext highlighter-rouge">useMutation</code></li>
  <li><code class="language-plaintext highlighter-rouge">useGetList</code></li>
  <li><code class="language-plaintext highlighter-rouge">useGetOne</code></li>
  <li><code class="language-plaintext highlighter-rouge">useGetMany</code></li>
  <li><code class="language-plaintext highlighter-rouge">useGetManyReference</code></li>
  <li><code class="language-plaintext highlighter-rouge">useCreate</code></li>
  <li><code class="language-plaintext highlighter-rouge">useUpdate</code></li>
  <li><code class="language-plaintext highlighter-rouge">useUpdateMany</code></li>
  <li><code class="language-plaintext highlighter-rouge">useDelete</code></li>
  <li><code class="language-plaintext highlighter-rouge">useDeleteMany</code></li>
</ul>

<p>Here is a glimpse of the <code class="language-plaintext highlighter-rouge">useGetOne</code> hook usage:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useGetOne</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">UserProfile</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">record</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">loading</span><span class="p">,</span> <span class="nx">error</span> <span class="p">}</span> <span class="o">=</span> <span class="nf">useGetOne</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">,</span> <span class="nx">record</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">loading</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Loading</span> <span class="p">/&gt;;</span> <span class="p">}</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>ERROR<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;;</span> <span class="p">}</span>
    <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>User <span class="si">{</span><span class="nx">data</span><span class="p">.</span><span class="nx">username</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>You will find complete usage documentation for the data provider hooks in the <a href="./Actions.md">Querying the API</a> documentation chapter.</p>

                </div>
                <div class="col hide-on-small-only m3 xl3 offset-xl1">
                    <div class="toc-wrapper">
                        <div style="height: 1px;">
                            <ul class="section table-of-contents pushpin">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="/js/materialize.min.js"></script>
    <script src="/js/prism.js"></script>
    <script>
        function slugify(text) {
            return text.toString().toLowerCase()
                .replace(/\s+/g, '-')           // Replace spaces with -
                .replace(/[^\w\-]+/g, '')       // Remove all non-word chars
                .replace(/\-\-+/g, '-')         // Replace multiple - with single -
                .replace(/^-+/, '')             // Trim - from start of text
                .replace(/-+$/, '');            // Trim - from end of text
        }
        document.addEventListener('DOMContentLoaded', function () {
            /* Generate table of contents */
            document.querySelectorAll('.markdown-section h2').forEach(element => {
                element.classList.add('scrollspy');
                var a = document.createElement('a');
                a.href = "#" + slugify(element.innerText);
                a.innerText = element.innerText;
                var li = document.createElement('li');
                li.appendChild(a);
                document.querySelector('.table-of-contents').appendChild(li)
            })
            M.Sidenav.init(document.querySelectorAll('.sidenav'));
            M.Pushpin.init(document.querySelector('.pushpin'), { offset: 75, top: 75 });
            M.ScrollSpy.init(document.querySelectorAll('.scrollspy'));
            M.Dropdown.init(document.querySelectorAll('.dropdown-trigger'));
        });
    </script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script type="text/javascript">
        docsearch({
            apiKey: '32f254b1de6a25a96665d1229b6eb8f7',
            indexName: 'marmelab-react-admin',
            inputSelector: '#query',
            debug: false, // Set debug to true if you want to inspect the dropdown 
            autocompleteOptions: {
                appendTo: '#search',
                hint: false,
            }
        }); 
    </script>
</body>

</html>
