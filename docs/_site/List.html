<!DOCTYPE HTML>
<html lang="en-US">

<head>
    <title>React-admin - The List View</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="">
    <meta name="HandheldFriendly" content="true" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="/css/materialize.min.css">
    <link rel="stylesheet" href="/css/style-v6.css">
    <link rel="stylesheet" href="/css/syntax.css">
    <link rel="stylesheet" href="/css/prism.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <!-- You won't find analytics tags in this page. React-admin protects your privacy! -->
</head>

<body>

    <header>
        <nav>
            <a href="#" data-target="slide-out" class="sidenav-trigger"><i class="material-icons">menu</i></a>
            <div class="nav-wrapper" style="background: linear-gradient(145deg,#027be3 11%,#1a237e 75%)">
                <div class="left">
                    <form action="#" onsubmit="return false;">
                        <div class="input-field" style="position:absolute">
                            <input type="search" name="q" id="query" size="31" maxlength="255" value=""
                                style="vertical-align:inherit!important" />
                            <label class="label-icon" for="test"><i class="material-icons">search</i></label>
                            <i class="material-icons">close</i>
                        </div>
                        <span id="search"></span>
                    </form>
                </div>
                <ul id="nav-mobile" class="right hide-on-med-and-down">
                    <li class="active"><a href="https://marmelab.com/react-admin/Readme.html">Documentation</a></li>
                    <li><a href="https://marmelab.com/react-admin-demo">Demo</a></li>
                    <li><a href="https://marmelab.com/en/blog/#react-admin">Blog</a></li>
                    <li><a href="https://github.com/marmelab/react-admin">GitHub</a></li>
                </ul>
            </div>
        </nav>
        <ul id="slide-out" class="sidenav sidenav-fixed">
            <li class="logo">
                <a href="http://localhost:4000"><img src="http://localhost:4000/assets/logo_white.png" /></a>
            </li>
            <li class="version">
                
            </li>
            <li ><a href="./Readme.html">Read Me</a></li>
<li ><a href="./Tutorial.html">Tutorial</a>
</li>
<li ><a href="./DataProviders.html">Data
                Providers</a></li>
<li ><a
                href="./Admin.html"><code>&lt;Admin&gt;</code></a>
</li>
<li ><a href="./Resource.html">
                <code>&lt;Resource&gt;</code>
        </a></li>
<li  class="active" ><a href="./List.html"><code>&lt;List&gt;</code>
                View</a></li>
<li ><a
                href="./CreateEdit.html"><code>&lt;Create&gt;</code>
                and <code>&lt;Edit&gt;</code> Views</a>
</li>
<li ><a href="./Show.html"><code>&lt;Show&gt;</code>
    View</a></li>
<li ><a
    href="./Fields.html"><code>&lt;Field&gt;</code>
    Components</a></li>
<li ><a
                href="./Inputs.html"><code>&lt;Input&gt;</code>
                Components</a></li>
<li ><a
                href="./Authentication.html">Authentication</a></li>
<li ><a
                href="./Authorization.html">Authorization</a></li>
<li ><a href="./Actions.html">Querying the
                API</a></li>
<li ><a href="./Theming.html">Theming</a></li>
<li ><a href="./Translation.html">Translation</a>
</li>
<li ><a href="./Caching.html">Caching</a>
</li>
<li ><a href="./CustomApp.html">Including in
                Another App</a>
</li>
<li ><a href="./Reference.html">Reference</a>
</li>
<li ><a href="./Ecosystem.html">Ecosystem</a>
</li>
<li ><a href="./UnitTesting.html">Unit
    Testing</a></li>
<li ><a
        href="./AdvancedTutorials.html">Advanced
        tutorials</a></li>
<li ><a href="./FAQ.html">FAQ</a></li>

        </ul>

    </header>

    <main>
        <div class="container">
            <div class="row">
                <div class="col s12 m8 offset-m1 xl7 offset-xl1 markdown-section DocSearch-content">
                    <h1 id="the-list-view">The List View</h1>

<p>The List view displays a list of records fetched from the API. The entry point for this view is the <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> component, which takes care of fetching the data. Then, it puts that data in a <code class="language-plaintext highlighter-rouge">ListContext</code> so that it’s available for its descendants - usually <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code>, which then delegates the rendering of each record property to <a href="./Fields.md"><code class="language-plaintext highlighter-rouge">&lt;Field&gt;</code></a> components.</p>

<p><img src="./img/list-view.png" alt="The List View" /></p>

<h2 id="the-list-component">The <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> Component</h2>

<p>The <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> component fetches the list of records from the data provider, and renders the list layout (title, buttons, filters, pagination). It delegates the rendering of the list of records to its child component. Usually, it’s a <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code>, responsible for displaying a table with one row for each post.</p>

<p>Here are all the props accepted by the <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> component:</p>

<ul>
  <li><a href="#page-title"><code class="language-plaintext highlighter-rouge">title</code></a></li>
  <li><a href="#actions"><code class="language-plaintext highlighter-rouge">actions</code></a></li>
  <li><a href="#exporter"><code class="language-plaintext highlighter-rouge">exporter</code></a></li>
  <li><a href="#bulk-action-buttons"><code class="language-plaintext highlighter-rouge">bulkActionButtons</code></a></li>
  <li><a href="#filters"><code class="language-plaintext highlighter-rouge">filters</code></a> (a React element used to display the filter form)</li>
  <li><a href="#filter-default-values"><code class="language-plaintext highlighter-rouge">filterDefaultValues</code></a> (the default values for <code class="language-plaintext highlighter-rouge">alwaysOn</code> filters)</li>
  <li><a href="#records-per-page"><code class="language-plaintext highlighter-rouge">perPage</code></a></li>
  <li><a href="#default-sort-field"><code class="language-plaintext highlighter-rouge">sort</code></a></li>
  <li><a href="#permanent-filter"><code class="language-plaintext highlighter-rouge">filter</code></a> (the permanent filter used in the REST request)</li>
  <li><a href="#pagination"><code class="language-plaintext highlighter-rouge">pagination</code></a></li>
  <li><a href="#aside-component"><code class="language-plaintext highlighter-rouge">aside</code></a></li>
  <li><a href="#empty-page"><code class="language-plaintext highlighter-rouge">empty</code></a></li>
</ul>

<p>Here is the minimal code necessary to display a list of posts:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/App.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Admin</span><span class="p">,</span> <span class="nx">Resource</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">jsonServerProvider</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ra-data-json-server</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">PostList</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./posts</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Admin</span> <span class="na">dataProvider</span><span class="p">=</span><span class="si">{</span><span class="nf">jsonServerProvider</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://jsonplaceholder.typicode.com</span><span class="dl">'</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Resource</span> <span class="na">name</span><span class="p">=</span><span class="s">"posts"</span> <span class="na">list</span><span class="p">=</span><span class="si">{</span><span class="nx">PostList</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Admin</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>

<span class="c1">// in src/posts.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">Datagrid</span><span class="p">,</span> <span class="nx">TextField</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>That’s enough to display the post list:</p>

<p><img src="./img/simple-post-list.png" alt="Simple posts list" /></p>

<h3 id="page-title">Page Title</h3>

<p>The default title for a list view is “[resource] list” (e.g. “Posts list”). Use the <code class="language-plaintext highlighter-rouge">title</code> prop to customize the List view title:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">title</span><span class="p">=</span><span class="s">"List of posts"</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>The title can be either a string or an element of your own.</p>

<h3 id="actions">Actions</h3>

<p><img src="./img/actions-toolbar.png" alt="Actions Toolbar" /></p>

<p>You can replace the list of default actions by your own element using the <code class="language-plaintext highlighter-rouge">actions</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">cloneElement</span><span class="p">,</span> <span class="nx">useMemo</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">PropTypes</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">prop-types</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
    <span class="nx">useListContext</span><span class="p">,</span>
    <span class="nx">TopToolbar</span><span class="p">,</span>
    <span class="nx">CreateButton</span><span class="p">,</span>
    <span class="nx">ExportButton</span><span class="p">,</span>
    <span class="nx">Button</span><span class="p">,</span>
    <span class="nx">sanitizeListRestProps</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">IconEvent</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/icons/Event</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ListActions</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span>
        <span class="nx">className</span><span class="p">,</span>
        <span class="nx">exporter</span><span class="p">,</span>
        <span class="nx">filters</span><span class="p">,</span>
        <span class="nx">maxResults</span><span class="p">,</span>
        <span class="p">...</span><span class="nx">rest</span>
    <span class="p">}</span> <span class="o">=</span> <span class="nx">props</span><span class="p">;</span>
    <span class="kd">const</span> <span class="p">{</span>
        <span class="nx">currentSort</span><span class="p">,</span>
        <span class="nx">resource</span><span class="p">,</span>
        <span class="nx">displayedFilters</span><span class="p">,</span>
        <span class="nx">filterValues</span><span class="p">,</span>
        <span class="nx">hasCreate</span><span class="p">,</span>
        <span class="nx">basePath</span><span class="p">,</span>
        <span class="nx">selectedIds</span><span class="p">,</span>
        <span class="nx">showFilter</span><span class="p">,</span>
        <span class="nx">total</span><span class="p">,</span>
    <span class="p">}</span> <span class="o">=</span> <span class="nf">useListContext</span><span class="p">();</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">TopToolbar</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="nx">className</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nf">sanitizeListRestProps</span><span class="p">(</span><span class="nx">rest</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="si">{</span><span class="nx">filters</span> <span class="o">&amp;&amp;</span> <span class="nf">cloneElement</span><span class="p">(</span><span class="nx">filters</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">resource</span><span class="p">,</span>
                <span class="nx">showFilter</span><span class="p">,</span>
                <span class="nx">displayedFilters</span><span class="p">,</span>
                <span class="nx">filterValues</span><span class="p">,</span>
                <span class="na">context</span><span class="p">:</span> <span class="dl">'</span><span class="s1">button</span><span class="dl">'</span><span class="p">,</span>
            <span class="p">})</span><span class="si">}</span>
            <span class="p">&lt;</span><span class="nc">CreateButton</span> <span class="na">basePath</span><span class="p">=</span><span class="si">{</span><span class="nx">basePath</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">ExportButton</span>
                <span class="na">disabled</span><span class="p">=</span><span class="si">{</span><span class="nx">total</span> <span class="o">===</span> <span class="mi">0</span><span class="si">}</span>
                <span class="na">resource</span><span class="p">=</span><span class="si">{</span><span class="nx">resource</span><span class="si">}</span>
                <span class="na">sort</span><span class="p">=</span><span class="si">{</span><span class="nx">currentSort</span><span class="si">}</span>
                <span class="na">filterValues</span><span class="p">=</span><span class="si">{</span><span class="nx">filterValues</span><span class="si">}</span>
                <span class="na">maxResults</span><span class="p">=</span><span class="si">{</span><span class="nx">maxResults</span><span class="si">}</span>
            <span class="p">/&gt;</span>
            <span class="si">{</span><span class="cm">/* Add your custom actions */</span><span class="si">}</span>
            <span class="p">&lt;</span><span class="nc">Button</span>
                <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="nf">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Your custom action</span><span class="dl">'</span><span class="p">);</span> <span class="p">}</span><span class="si">}</span>
                <span class="na">label</span><span class="p">=</span><span class="s">"Show calendar"</span>
            <span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">IconEvent</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">TopToolbar</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">actions</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">ListActions</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>You can also use such a custom <code class="language-plaintext highlighter-rouge">&lt;ListActions&gt;</code> component to omit or reorder buttons based on permissions. Just pass the <code class="language-plaintext highlighter-rouge">permissions</code> down from the <code class="language-plaintext highlighter-rouge">List</code> component:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">permissions</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">actions</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostActions</span> <span class="na">permissions</span><span class="p">=</span><span class="si">{</span><span class="nx">permissions</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="exporter">Exporter</h3>

<p><img src="./img/export-button.gif" alt="Export Button" /></p>

<p>Among the default list actions, react-admin includes an <code class="language-plaintext highlighter-rouge">&lt;ExportButton&gt;</code>. This button is disabled when there is no record in the current <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code>.</p>

<p>By default, clicking this button will:</p>

<ol>
  <li>Call the <code class="language-plaintext highlighter-rouge">dataProvider</code> with the current sort and filter (but without pagination),</li>
  <li>Transform the result into a CSV string,</li>
  <li>Download the CSV file.</li>
</ol>

<p>The columns of the CSV file match all the fields of the records in the <code class="language-plaintext highlighter-rouge">dataProvider</code> response. That means that the export doesn’t take into account the selection and ordering of fields in your <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> via <code class="language-plaintext highlighter-rouge">Field</code> components. If you want to customize the result, pass a custom <code class="language-plaintext highlighter-rouge">exporter</code> function to the <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code>. This function will receive the data from the <code class="language-plaintext highlighter-rouge">dataProvider</code> (after step 1) and replace steps 2-3 (i.e. it’s in charge of transforming, converting, and downloading the file).</p>

<p><strong>Tip</strong>: For CSV conversion, you can import <a href="https://github.com/kauegimenes/jsonexport#browser-import-examples">jsonexport</a>, a CSV to JSON converter which is already a react-admin dependency. And for CSV download, take advantage of react-admin’s <code class="language-plaintext highlighter-rouge">downloadCSV</code> function.</p>

<p>Here is an example for a Posts exporter, omitting, adding, and reordering fields:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in PostList.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">downloadCSV</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">jsonExport</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">jsonexport/dist</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">exporter</span> <span class="o">=</span> <span class="nx">posts</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">postsForExport</span> <span class="o">=</span> <span class="nx">posts</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">post</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">backlinks</span><span class="p">,</span> <span class="nx">author</span><span class="p">,</span> <span class="p">...</span><span class="nx">postForExport</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">post</span><span class="p">;</span> <span class="c1">// omit backlinks and author</span>
        <span class="nx">postForExport</span><span class="p">.</span><span class="nx">author_name</span> <span class="o">=</span> <span class="nx">post</span><span class="p">.</span><span class="nx">author</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span> <span class="c1">// add a field</span>
        <span class="k">return</span> <span class="nx">postForExport</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nf">jsonExport</span><span class="p">(</span><span class="nx">postsForExport</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">title</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">author_name</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">body</span><span class="dl">'</span><span class="p">]</span> <span class="c1">// order fields in the export</span>
    <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">csv</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">downloadCSV</span><span class="p">(</span><span class="nx">csv</span><span class="p">,</span> <span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// download as 'posts.csv` file</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">exporter</span><span class="p">=</span><span class="si">{</span><span class="nx">exporter</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">)</span>
</code></pre></div></div>

<p>In many cases, you’ll need more than simple object manipulation. You’ll need to <em>augment</em> your objects based on relationships. For instance, the export for comments should include the title of the related post - but the export only exposes a <code class="language-plaintext highlighter-rouge">post_id</code> by default. For that purpose, the exporter receives a <code class="language-plaintext highlighter-rouge">fetchRelatedRecords</code> function as the second parameter. It fetches related records using your <code class="language-plaintext highlighter-rouge">dataProvider.getMany()</code> method and returns a promise.</p>

<p>Here is an example for a Comments exporter, fetching related Posts:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in CommentList.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">downloadCSV</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">jsonExport</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">jsonexport/dist</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">exporter</span> <span class="o">=</span> <span class="p">(</span><span class="nx">records</span><span class="p">,</span> <span class="nx">fetchRelatedRecords</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// will call dataProvider.getMany('posts', { ids: records.map(record =&gt; record.post_id) }), ignoring duplicate and empty post_id</span>
    <span class="nf">fetchRelatedRecords</span><span class="p">(</span><span class="nx">records</span><span class="p">,</span> <span class="dl">'</span><span class="s1">post_id</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">).</span><span class="nf">then</span><span class="p">(</span><span class="nx">posts</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">records</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="p">({</span>
                <span class="p">...</span><span class="nx">record</span><span class="p">,</span>
                <span class="na">post_title</span><span class="p">:</span> <span class="nx">posts</span><span class="p">[</span><span class="nx">record</span><span class="p">.</span><span class="nx">post_id</span><span class="p">].</span><span class="nx">title</span><span class="p">,</span>
        <span class="p">}));</span>
        <span class="nf">jsonExport</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">headers</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">post_id</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">post_title</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">body</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">csv</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{;</span>
            <span class="nf">downloadCSV</span><span class="p">(</span><span class="nx">csv</span><span class="p">,</span> <span class="dl">'</span><span class="s1">comments</span><span class="dl">'</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">CommentList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">exporter</span><span class="p">=</span><span class="si">{</span><span class="nx">exporter</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">)</span>
</code></pre></div></div>

<p><strong>Tip</strong>: If you need to call another verb in the exporter, take advantage of the third parameter passed to the function: it’s the <code class="language-plaintext highlighter-rouge">dataProvider</code> function.</p>

<p><strong>Tip</strong>: The <code class="language-plaintext highlighter-rouge">&lt;ExportButton&gt;</code> limits the main request to the <code class="language-plaintext highlighter-rouge">dataProvider</code> to 1,000 records. If you want to increase or decrease this limit, pass a <code class="language-plaintext highlighter-rouge">maxResults</code> prop to the <code class="language-plaintext highlighter-rouge">&lt;ExportButton&gt;</code> in a custom <code class="language-plaintext highlighter-rouge">&lt;ListActions&gt;</code> component, as explained in the previous section.</p>

<p><strong>Tip</strong>: React-admin also provides a <code class="language-plaintext highlighter-rouge">&lt;BulkExportButton&gt;</code> component that depends on the <code class="language-plaintext highlighter-rouge">exporter</code>, and that you can use in the <code class="language-plaintext highlighter-rouge">bulkActionButtons</code> prop of the <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> component.</p>

<p><strong>Tip</strong>: For complex (or large) exports, fetching all the related records and assembling them client-side can be slow. In that case, create the CSV on the server side, and replace the <code class="language-plaintext highlighter-rouge">&lt;ExportButton&gt;</code> component by a custom one, fetching the CSV route.</p>

<p><strong>Tip</strong>: You may also remove the <code class="language-plaintext highlighter-rouge">&lt;ExportButton&gt;</code> by passing <code class="language-plaintext highlighter-rouge">false</code> to the <code class="language-plaintext highlighter-rouge">exporter</code> prop: <code class="language-plaintext highlighter-rouge">exporter={false}</code></p>

<p><strong>Tip</strong>: Looking for an <code class="language-plaintext highlighter-rouge">&lt;ImportButton&gt;</code>? React-admin doesn’t provide this feature, but the community has an excellent third-party module for CSV import: <a href="https://github.com/benwinding/react-admin-import-csv">benwinding/react-admin-import-csv</a>.</p>

<h3 id="bulk-action-buttons">Bulk Action Buttons</h3>

<p><img src="./img/bulk-actions-toolbar.gif" alt="Bulk Action Buttons" /></p>

<p>Bulk action buttons are buttons that affect several records at once, like mass deletion for instance. In the <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> component, the bulk actions toolbar appears when a user ticks the checkboxes in the first column of the table. The user can then choose a button from the bulk actions toolbar. By default, all list views have a single bulk action button, the bulk delete button. You can add other bulk action buttons by passing a custom element as the <code class="language-plaintext highlighter-rouge">bulkActionButtons</code> prop of the <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> component:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Fragment</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Button</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/Button</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BulkDeleteButton</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ResetViewsButton</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./ResetViewsButton</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostBulkActionButtons</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Fragment</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">ResetViewsButton</span> <span class="na">label</span><span class="p">=</span><span class="s">"Reset Views"</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">/&gt;</span>
        <span class="si">{</span><span class="cm">/* default bulk delete action */</span><span class="si">}</span>
        <span class="p">&lt;</span><span class="nc">BulkDeleteButton</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Fragment</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">bulkActionButtons</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostBulkActionButtons</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: React-admin provides 2 components that you can use in <code class="language-plaintext highlighter-rouge">bulkActionButtons</code>: <code class="language-plaintext highlighter-rouge">&lt;BulkDeleteButton&gt;</code>, and <code class="language-plaintext highlighter-rouge">&lt;BulkExportButton&gt;</code>.</p>

<p><strong>Tip</strong>: You can also disable bulk actions altogether by passing <code class="language-plaintext highlighter-rouge">false</code> to the <code class="language-plaintext highlighter-rouge">bulkActionButtons</code> prop. When using a <code class="language-plaintext highlighter-rouge">Datagrid</code> inside a <code class="language-plaintext highlighter-rouge">List</code> with disabled bulk actions, the checkboxes column won’t be added.</p>

<p>Bulk action button components receive several props allowing them to perform their job:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">resource</code>: the currently displayed resource (eg <code class="language-plaintext highlighter-rouge">posts</code>, <code class="language-plaintext highlighter-rouge">comments</code>, etc.)</li>
  <li><code class="language-plaintext highlighter-rouge">basePath</code>: the current router base path for the resource (eg <code class="language-plaintext highlighter-rouge">/posts</code>, <code class="language-plaintext highlighter-rouge">/comments</code>, etc.)</li>
  <li><code class="language-plaintext highlighter-rouge">filterValues</code>: the filter values. This can be useful if you want to apply your action on all items matching the filter.</li>
  <li><code class="language-plaintext highlighter-rouge">selectedIds</code>: the identifiers of the currently selected items.</li>
</ul>

<p>Here is an example leveraging the <code class="language-plaintext highlighter-rouge">useUpdateMany</code> hook, which sets the <code class="language-plaintext highlighter-rouge">views</code> property of all posts to <code class="language-plaintext highlighter-rouge">0</code>:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in ./ResetViewsButton.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
    <span class="nx">Button</span><span class="p">,</span>
    <span class="nx">useUpdateMany</span><span class="p">,</span>
    <span class="nx">useRefresh</span><span class="p">,</span>
    <span class="nx">useNotify</span><span class="p">,</span>
    <span class="nx">useUnselectAll</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">VisibilityOff</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/icons</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ResetViewsButton</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">selectedIds</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">refresh</span> <span class="o">=</span> <span class="nf">useRefresh</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">notify</span> <span class="o">=</span> <span class="nf">useNotify</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">unselectAll</span> <span class="o">=</span> <span class="nf">useUnselectAll</span><span class="p">();</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">updateMany</span><span class="p">,</span> <span class="p">{</span> <span class="nx">loading</span> <span class="p">}]</span> <span class="o">=</span> <span class="nf">useUpdateMany</span><span class="p">(</span>
        <span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span>
        <span class="nx">selectedIds</span><span class="p">,</span>
        <span class="p">{</span> <span class="na">views</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span>
        <span class="p">{</span>
            <span class="na">onSuccess</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="nf">refresh</span><span class="p">();</span>
                <span class="nf">notify</span><span class="p">(</span><span class="dl">'</span><span class="s1">Posts updated</span><span class="dl">'</span><span class="p">);</span>
                <span class="nf">unselectAll</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">);</span>
            <span class="p">},</span>
            <span class="na">onFailure</span><span class="p">:</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nf">notify</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error: posts not updated</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">warning</span><span class="dl">'</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">);</span>

    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">Button</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"simple.action.resetViews"</span>
            <span class="na">disabled</span><span class="p">=</span><span class="si">{</span><span class="nx">loading</span><span class="si">}</span>
            <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">updateMany</span><span class="si">}</span>
        <span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">VisibilityOff</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">ResetViewsButton</span><span class="p">;</span>
</code></pre></div></div>

<p>But most of the time, bulk actions are mini-applications with a standalone user interface (in a Dialog). Here is the same <code class="language-plaintext highlighter-rouge">ResetViewsAction</code> implemented behind a confirmation dialog:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in ./ResetViewsButton.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Fragment</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
    <span class="nx">Button</span><span class="p">,</span>
    <span class="nx">Confirm</span><span class="p">,</span>
    <span class="nx">useUpdateMany</span><span class="p">,</span>
    <span class="nx">useRefresh</span><span class="p">,</span>
    <span class="nx">useNotify</span><span class="p">,</span>
    <span class="nx">useUnselectAll</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ResetViewsButton</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">selectedIds</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">open</span><span class="p">,</span> <span class="nx">setOpen</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">refresh</span> <span class="o">=</span> <span class="nf">useRefresh</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">notify</span> <span class="o">=</span> <span class="nf">useNotify</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">unselectAll</span> <span class="o">=</span> <span class="nf">useUnselectAll</span><span class="p">();</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">updateMany</span><span class="p">,</span> <span class="p">{</span> <span class="nx">loading</span> <span class="p">}]</span> <span class="o">=</span> <span class="nf">useUpdateMany</span><span class="p">(</span>
        <span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span>
        <span class="nx">selectedIds</span><span class="p">,</span>
        <span class="p">{</span> <span class="na">views</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span>
        <span class="p">{</span>
            <span class="na">onSuccess</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="nf">refresh</span><span class="p">();</span>
                <span class="nf">notify</span><span class="p">(</span><span class="dl">'</span><span class="s1">Posts updated</span><span class="dl">'</span><span class="p">);</span>
                <span class="nf">unselectAll</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">);</span>
            <span class="p">},</span>
            <span class="na">onFailure</span><span class="p">:</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nf">notify</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error: posts not updated</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">warning</span><span class="dl">'</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">);</span>
    <span class="kd">const</span> <span class="nx">handleClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">setOpen</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">handleDialogClose</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">setOpen</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">handleConfirm</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">updateMany</span><span class="p">();</span>
        <span class="nf">setOpen</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">Fragment</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">label</span><span class="p">=</span><span class="s">"Reset Views"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">handleClick</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">Confirm</span>
                <span class="na">isOpen</span><span class="p">=</span><span class="si">{</span><span class="nx">open</span><span class="si">}</span>
                <span class="na">loading</span><span class="p">=</span><span class="si">{</span><span class="nx">loading</span><span class="si">}</span>
                <span class="na">title</span><span class="p">=</span><span class="s">"Update View Count"</span>
                <span class="na">content</span><span class="p">=</span><span class="s">"Are you sure you want to reset the views for these items?"</span>
                <span class="na">onConfirm</span><span class="p">=</span><span class="si">{</span><span class="nx">handleConfirm</span><span class="si">}</span>
                <span class="na">onClose</span><span class="p">=</span><span class="si">{</span><span class="nx">handleDialogClose</span><span class="si">}</span>
            <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Fragment</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">ResetViewsButton</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>Tip</strong>: <code class="language-plaintext highlighter-rouge">&lt;Confirm&gt;</code> leverages material-ui’s <code class="language-plaintext highlighter-rouge">&lt;Dialog&gt;</code> component to implement a confirmation popup. Feel free to use it in your admins!</p>

<p><strong>Tip</strong>: <code class="language-plaintext highlighter-rouge">&lt;Confirm&gt;</code> text props such as <code class="language-plaintext highlighter-rouge">title</code> and <code class="language-plaintext highlighter-rouge">content</code> are translatable. You can pass use translation keys in these props.</p>

<p><strong>Tip</strong>: You can customize the text of the two <code class="language-plaintext highlighter-rouge">&lt;Confirm&gt;</code> component buttons using the <code class="language-plaintext highlighter-rouge">cancel</code> and <code class="language-plaintext highlighter-rouge">confirm</code> props which accept translation keys. You can customize the icons by setting the <code class="language-plaintext highlighter-rouge">ConfirmIcon</code> and <code class="language-plaintext highlighter-rouge">CancelIcon</code> props, which accept a SvgIcon type.</p>

<p><strong>Tip</strong>: React-admin doesn’t use the <code class="language-plaintext highlighter-rouge">&lt;Confirm&gt;</code> component internally, because deletes and updates are applied locally immediately, then dispatched to the server after a few seconds, unless the user chooses to undo the modification. That’s what we call optimistic rendering. You can do the same for the <code class="language-plaintext highlighter-rouge">ResetViewsButton</code> by setting <code class="language-plaintext highlighter-rouge">undoable: true</code> in the last argument of <code class="language-plaintext highlighter-rouge">useUpdateMany()</code>, as follows:</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// in ./ResetViewsButton.js
<span class="p">import * as React from "react";
import {
</span>    Button,
    Confirm,
    useUpdateMany,
    useRefresh,
    useNotify,
    useUnselectAll,
} from 'react-admin';
<span class="p">import { VisibilityOff } from '@material-ui/icons';
</span><span class="err">
</span><span class="p">const ResetViewsButton = ({ selectedIds }) =&gt; {
</span>    const refresh = useRefresh();
    const notify = useNotify();
    const unselectAll = useUnselectAll();
    const [updateMany, { loading }] = useUpdateMany(
        'posts',
        selectedIds,
        { views: 0 },
        {
            onSuccess: () =&gt; {
                refresh();
<span class="gd">-               notify('Posts updated');
</span><span class="gi">+               notify('Posts updated', 'info', '{}, true); // the last argument forces the display of 'undo' in the notification
</span>                unselectAll('posts');
            },
            onFailure: error =&gt; notify('Error: posts not updated', 'warning'),
<span class="gi">+           undoable: true
</span>        }
    );
<span class="err">
</span>    return (
        &lt;Button
            label="simple.action.resetViews"
            disabled={loading}
            onClick={updateMany}
        &gt;
            &lt;VisibilityOff /&gt;
        &lt;/Button&gt;
    );
};
</code></pre></div></div>

<h3 id="filters">Filters</h3>

<p><img src="./img/list_filter.gif" alt="List Filters" /></p>

<p>You can add a filter component to the list using the <code class="language-plaintext highlighter-rouge">filters</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">PostFilter</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Filter</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Search"</span> <span class="na">source</span><span class="p">=</span><span class="s">"q"</span> <span class="na">alwaysOn</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Title"</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="na">defaultValue</span><span class="p">=</span><span class="s">"Hello, World!"</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Filter</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">filters</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostFilter</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>The filter component must be a <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> with <code class="language-plaintext highlighter-rouge">&lt;Input&gt;</code> children.</p>

<p><strong>Tip</strong>: Don’t mix up this <code class="language-plaintext highlighter-rouge">filters</code> prop, expecting a React element, with the <code class="language-plaintext highlighter-rouge">filter</code> props, which expects an object to define permanent filters (see below).</p>

<p>Children of the <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> form are regular inputs. <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> hides them all by default, except those that have the <code class="language-plaintext highlighter-rouge">alwaysOn</code> prop.</p>

<p>For more details about the <code class="language-plaintext highlighter-rouge">filters</code> prop, see the <a href="#filtering-the-list">Filtering the List</a> section below.</p>

<h3 id="filter-default-values">Filter Default Values</h3>

<p>To set default values to filters, you can either pass an object literal as the <code class="language-plaintext highlighter-rouge">filterDefaultValues</code> prop of the <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> element, or use the <code class="language-plaintext highlighter-rouge">defaultValue</code> prop of any input component.</p>

<p>There is one exception: inputs with <code class="language-plaintext highlighter-rouge">alwaysOn</code> don’t accept <code class="language-plaintext highlighter-rouge">defaultValue</code>. You have to use the <code class="language-plaintext highlighter-rouge">filterDefaultValues</code> for those.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="kd">const</span> <span class="nx">PostFilter</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Filter</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Search"</span> <span class="na">source</span><span class="p">=</span><span class="s">"q"</span> <span class="na">alwaysOn</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">BooleanInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"is_published"</span> <span class="na">alwaysOn</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="na">defaultValue</span><span class="p">=</span><span class="s">"Hello, World!"</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Filter</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">filters</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostFilter</span> <span class="p">/&gt;</span><span class="si">}</span> <span class="na">filterDefaultValues</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">is_published</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: The <code class="language-plaintext highlighter-rouge">filter</code> and <code class="language-plaintext highlighter-rouge">filterDefaultValues</code> props have one key difference: the <code class="language-plaintext highlighter-rouge">filterDefaultValues</code> can be overridden by the user, while the <code class="language-plaintext highlighter-rouge">filter</code> values are always sent to the data provider. Or, to put it otherwise:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">filterSentToDataProvider</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="nx">filterDefaultValues</span><span class="p">,</span> <span class="p">...</span><span class="nx">filterChosenByUser</span><span class="p">,</span> <span class="p">...</span><span class="nx">filter</span> <span class="p">};</span>
</code></pre></div></div>

<h3 id="records-per-page">Records Per Page</h3>

<p>By default, the list paginates results by groups of 10. You can override this setting by specifying the <code class="language-plaintext highlighter-rouge">perPage</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">perPage</span><span class="p">=</span><span class="si">{</span><span class="mi">25</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="default-sort-field">Default Sort Field</h3>

<p>Pass an object literal as the <code class="language-plaintext highlighter-rouge">sort</code> prop to determine the default <code class="language-plaintext highlighter-rouge">field</code> and <code class="language-plaintext highlighter-rouge">order</code> used for sorting:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">sort</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="dl">'</span><span class="s1">published_at</span><span class="dl">'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DESC</span><span class="dl">'</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">sort</code> defines the <em>default</em> sort order ; the list remains sortable by clicking on column headers.</p>

<p>For more details on list sort, see the <a href="#sorting-the-list">Sorting The List</a> section below.</p>

<h3 id="permanent-filter">Permanent Filter</h3>

<p>You can choose to always filter the list, without letting the user disable this filter - for instance to display only published posts. Write the filter to be passed to the data provider in the <code class="language-plaintext highlighter-rouge">filter</code> props:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">filter</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">is_published</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>The actual filter parameter sent to the data provider is the result of the combination of the <em>user</em> filters (the ones set through the <code class="language-plaintext highlighter-rouge">filters</code> component form), and the <em>permanent</em> filter. The user cannot override the permanent filters set by way of <code class="language-plaintext highlighter-rouge">filter</code>.</p>

<h3 id="pagination">Pagination</h3>

<p>The <code class="language-plaintext highlighter-rouge">pagination</code> prop allows to replace the default pagination controls by your own.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/MyPagination.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Pagination</span><span class="p">,</span> <span class="nx">List</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostPagination</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">&lt;</span><span class="nc">Pagination</span> <span class="na">rowsPerPageOptions</span><span class="p">=</span><span class="si">{</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">/&gt;;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">pagination</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostPagination</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>See <a href="#paginating-the-list">Paginating the List</a> below for details.</p>

<h3 id="aside-component">Aside component</h3>

<p>You may want to display additional information on the side of the list. Use the <code class="language-plaintext highlighter-rouge">aside</code> prop for that, passing the component of your choice:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Aside</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">width</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="na">margin</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1em</span><span class="dl">'</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Typography</span> <span class="na">variant</span><span class="p">=</span><span class="s">"h6"</span><span class="p">&gt;</span>Post details<span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Typography</span> <span class="na">variant</span><span class="p">=</span><span class="s">"body2"</span><span class="p">&gt;</span>
            Posts will only be published one an editor approves them
        <span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="na">aside</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">Aside</span> <span class="p">/&gt;</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">aside</code> component can call the <code class="language-plaintext highlighter-rouge">useListContext()</code> hook to receive the same props as the <code class="language-plaintext highlighter-rouge">List</code> child component, including the following:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">basePath</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">currentSort</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">data</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">defaultTitle</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">filterValues</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">ids</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">page</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">perPage</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">resource</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">selectedIds</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">total</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">version</code>,</li>
</ul>

<p>That means you can display additional details of the current list in the aside component:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Aside</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">ids</span> <span class="p">}</span> <span class="o">=</span> <span class="nf">useListContext</span><span class="p">();</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">width</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="na">margin</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1em</span><span class="dl">'</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">Typography</span> <span class="na">variant</span><span class="p">=</span><span class="s">"h6"</span><span class="p">&gt;</span>Posts stats<span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">Typography</span> <span class="na">variant</span><span class="p">=</span><span class="s">"body2"</span><span class="p">&gt;</span>
                Total views: <span class="si">{</span><span class="nx">ids</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">id</span> <span class="o">=&gt;</span> <span class="nx">data</span><span class="p">[</span><span class="nx">id</span><span class="p">]).</span><span class="nf">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">post</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">post</span><span class="p">.</span><span class="nx">views</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="si">}</span>
            <span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="empty-page">Empty page</h3>

<p>When there is no result, and there is no active filter, and the resource has a create page, react-admin displays a special page inviting the user to create the first record.</p>

<p>You can use the <code class="language-plaintext highlighter-rouge">empty</code> prop to replace that page by a custom component:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Box</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/Box</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Button</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/Button</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Typography</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/Typography</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CreateButton</span><span class="p">,</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">useListContext</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">Empty</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">basePath</span><span class="p">,</span> <span class="nx">resource</span> <span class="p">}</span> <span class="o">=</span> <span class="nf">useListContext</span><span class="p">();</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">textAlign</span><span class="p">=</span><span class="s">"center"</span> <span class="na">m</span><span class="p">=</span><span class="si">{</span><span class="mi">1</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">Typography</span> <span class="na">variant</span><span class="p">=</span><span class="s">"h4"</span> <span class="na">paragraph</span><span class="p">&gt;</span>
                No products available
            <span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">Typography</span> <span class="na">variant</span><span class="p">=</span><span class="s">"body1"</span><span class="p">&gt;</span>
                Create one or import from a file
            <span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">CreateButton</span> <span class="na">basePath</span><span class="p">=</span><span class="si">{</span><span class="nx">basePath</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="cm">/* ... */</span><span class="si">}</span><span class="p">&gt;</span>Import<span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">ProductList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="na">empty</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">Empty</span> <span class="p">/&gt;</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">empty</code> component can call the <code class="language-plaintext highlighter-rouge">useListContext()</code> hook to receive the same props as the <code class="language-plaintext highlighter-rouge">List</code> child component, including the following:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">basePath</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">currentSort</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">data</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">defaultTitle</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">filterValues</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">ids</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">page</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">perPage</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">resource</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">selectedIds</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">total</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">version</code>,</li>
</ul>

<p>You can also set the <code class="language-plaintext highlighter-rouge">empty</code> props value to <code class="language-plaintext highlighter-rouge">false</code> to bypass the empty page display and render an empty list instead.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import { List } from 'react-admin';

const ProductList = props =&gt; (
    &lt;List empty={false} {...props}&gt;
        ...
    &lt;/List&gt;
);
</code></pre></div></div>

<h3 id="component">Component</h3>

<p>By default, the List view renders the main content area inside a material-ui <code class="language-plaintext highlighter-rouge">&lt;Card&gt;</code> element. The actual layout of the list depends on the child component you’re using (<code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;SimpleList&gt;</code>, or a custom layout component).</p>

<p>Some List layouts display each record in a <code class="language-plaintext highlighter-rouge">&lt;Card&gt;</code>, in which case the user ends up seeing a card inside a card, which is bad UI. To avoid that, you can override the main area container by passing a <code class="language-plaintext highlighter-rouge">component</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// use a div as root component</span>
<span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="na">component</span><span class="p">=</span><span class="s">"div"</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="c1">// use a custom component as root component </span>
<span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="na">component</span><span class="p">=</span><span class="si">{</span><span class="nx">MyComponent</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>The default value for the <code class="language-plaintext highlighter-rouge">component</code> prop is <code class="language-plaintext highlighter-rouge">Card</code>.</p>

<h3 id="css-api">CSS API</h3>

<p>The <code class="language-plaintext highlighter-rouge">List</code> component accepts the usual <code class="language-plaintext highlighter-rouge">className</code> prop but you can override many class names injected to the inner components by React-admin thanks to the <code class="language-plaintext highlighter-rouge">classes</code> property (as most Material UI components, see their <a href="https://material-ui.com/customization/components/#overriding-styles-with-classes">documentation about it</a>). This property accepts the following keys:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">root</code>: alternative to using <code class="language-plaintext highlighter-rouge">className</code>. Applied to the root element.</li>
  <li><code class="language-plaintext highlighter-rouge">actions</code>: applied to the actions container</li>
  <li><code class="language-plaintext highlighter-rouge">main</code>: applied to the main container</li>
  <li><code class="language-plaintext highlighter-rouge">noResults</code>: applied to the component shown when there is no result</li>
</ul>

<p>You can customize the list styles by passing a <code class="language-plaintext highlighter-rouge">classes</code> object as prop, through <code class="language-plaintext highlighter-rouge">useStyles()</code>. Here is an example:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">makeStyles</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">useStyles</span> <span class="o">=</span> <span class="nf">makeStyles</span><span class="p">({</span>
    <span class="na">header</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#ccc</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">classes</span> <span class="o">=</span> <span class="nf">useStyles</span><span class="p">();</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">classes</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">header</span><span class="p">:</span> <span class="nx">classes</span><span class="p">.</span><span class="nx">header</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
                ...
            <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">PostList</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="filtering-the-list">Filtering The List</h2>

<table><tbody><tr style="border:none">
<td style="width:50%;border:none;">
<a title="&lt;Filter&gt; Button/Form Combo" href="./img/list_filter.gif"><img src="./img/list_filter.gif" /></a>
</td>
<td style="width:50%;border:none;">
<a title="&lt;FilterList&gt; Sidebar" href="./img/filter-sidebar.gif"><img src="./img/filter-sidebar.gif" /></a>
</td>
</tr></tbody></table>

<p>One of the most important features of the List page is the ability to filter the results. React-admin does its best to offer a powerful filter functionality, and to get out of the way when you want to go further.</p>

<p>The next sections explain hows to use the filter functionality. And first, a few explanations about the inner workings of filters:</p>

<ul>
  <li><a href="#filter-query-parameter">Filter Query Parameter</a></li>
  <li><a href="#linking-to-a-pre-filtered-list">Linking To A Pre-Filtered List</a></li>
</ul>

<p>React-admin proposes several UI components to let users see and modify filters, and gives you the tools to build custom ones.</p>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> Button/Form Combo
    <ul>
      <li><a href="#the-filter-buttonform-combo">Usage</a></li>
      <li><a href="#full-text-search">Full-Text Search</a></li>
      <li><a href="#quick-filters">Quick Filters</a></li>
    </ul>
  </li>
  <li>The <code class="language-plaintext highlighter-rouge">&lt;FilterList&gt;</code> Sidebar
    <ul>
      <li><a href="#the-filterlist-sidebar">Usage</a></li>
      <li><a href="#live-search">Full-Text Search</a></li>
    </ul>
  </li>
  <li><a href="#building-a-custom-filter">Building A Custom Filter</a></li>
</ul>

<h3 id="filter-query-parameter">Filter Query Parameter</h3>

<p>React-admin uses the <code class="language-plaintext highlighter-rouge">filter</code> query parameter from the URL to determine the filters to apply to the list. To change the filters, react-admin simply changes this <code class="language-plaintext highlighter-rouge">filter</code> query parameter, and the <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> components fetches <code class="language-plaintext highlighter-rouge">dataProvider.getList()</code> again with the new filters.</p>

<p>Here is a typical List URL:</p>

<blockquote>
  <p>https://myadmin.dev/#/posts?displayedFilters=%7B%22commentable%22%3Atrue%7D&amp;filter=%7B%22commentable%22%3Atrue%2C%22q%22%3A%22lorem%20%22%7D&amp;order=DESC&amp;page=1&amp;perPage=10&amp;sort=published_at</p>
</blockquote>

<p>Once decoded, the <code class="language-plaintext highlighter-rouge">filter</code> query parameter reveals as a JSON value:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>filter={"commentable":true,"q":"lorem "}
</code></pre></div></div>

<p>You can change the filters by updating the query parameter, e.g. using the <code class="language-plaintext highlighter-rouge">&lt;Link&gt;</code> component or the <code class="language-plaintext highlighter-rouge">history.push()</code> method from <code class="language-plaintext highlighter-rouge">react-router</code>.</p>

<p><strong>Tip</strong>: Once a user sets a filter, react-admin persists the filter value in the application state, so that when the user comes back to the list, they should see the filtered list. That’s a design choice.</p>

<h3 id="linking-to-a-pre-filtered-list">Linking To A Pre-Filtered List</h3>

<p>As the filter values are taken from the URL, you can link to a pre-filtered list by setting the query parameter.</p>

<p>For instance, if you have a list of tags, you can display a button for each category to link to the list of posts filtered by that tag:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Button</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/Button</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Link</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-router-dom</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">stringify</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">query-string</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">LinkToRelatedProducts</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">record</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">translate</span> <span class="o">=</span> <span class="nf">useTranslate</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">record</span> <span class="p">?</span> <span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">Button</span>
            <span class="na">color</span><span class="p">=</span><span class="s">"primary"</span>
            <span class="na">component</span><span class="p">=</span><span class="si">{</span><span class="nx">Link</span><span class="si">}</span>
            <span class="na">to</span><span class="p">=</span><span class="si">{</span><span class="p">{</span>
                <span class="na">pathname</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/posts</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">search</span><span class="p">:</span> <span class="nf">stringify</span><span class="p">({</span>
                    <span class="na">page</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="na">perPage</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
                    <span class="na">sort</span><span class="p">:</span> <span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">,</span>
                    <span class="na">order</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DESC</span><span class="dl">'</span><span class="p">,</span>
                    <span class="na">filter</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">({</span> <span class="na">category_id</span><span class="p">:</span> <span class="nx">record</span><span class="p">.</span><span class="nx">id</span> <span class="p">}),</span>
                <span class="p">}),</span>
            <span class="p">}</span><span class="si">}</span>
        <span class="p">&gt;</span>
            All posts with the category <span class="si">{</span><span class="nx">record</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span> ; 
        <span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
    <span class="p">)</span> <span class="p">:</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>You can use this button e.g. as a child of <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code>. You can also create a custom Menu button with that technique to link to the unfiltered list by setting the filter value to <code class="language-plaintext highlighter-rouge">{}</code>.</p>

<p><strong>Tip</strong>: You have to pass <em>all</em> the query string parameters - not just <code class="language-plaintext highlighter-rouge">filter</code>. That’s a current limitation of react-admin.</p>

<h3 id="the-filter-buttonform-combo">The <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> Button/Form Combo</h3>

<p><img src="./img/list_filter.gif" alt="List Filters" /></p>

<p>The default appearance for filters is an inline form displayed on top of the list. Users also see a dropdown button allowing to add more inputs to that form. This functionality relies on the <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> component:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Filter</span><span class="p">,</span> <span class="nx">TextInput</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostFilter</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Filter</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Search"</span> <span class="na">source</span><span class="p">=</span><span class="s">"q"</span> <span class="na">alwaysOn</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Title"</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="na">defaultValue</span><span class="p">=</span><span class="s">"Hello, World!"</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Filter</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>Children of the <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> component are regular inputs. That means you can build sophisticated filters based on references, array values, etc. <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> hides all inputs in the filter form by default, except those that have the <code class="language-plaintext highlighter-rouge">alwaysOn</code> prop.</p>

<p><strong>Tip</strong>: For technical reasons, react-admin does not accept children of <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> having both a <code class="language-plaintext highlighter-rouge">defaultValue</code> and <code class="language-plaintext highlighter-rouge">alwaysOn</code>. To set default values for always on filters, use the <a href="#filter-default-values"><code class="language-plaintext highlighter-rouge">filterDefaultValues</code></a> prop of the <List> component instead.</List></p>

<p>To inject the filter form in a <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code>, use the <code class="language-plaintext highlighter-rouge">filters</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">filters</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostFilter</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> clones the component passed as <code class="language-plaintext highlighter-rouge">filters</code> twice:</p>

<ul>
  <li>once with the prop <code class="language-plaintext highlighter-rouge">context="form"</code>, to render the filter <em>form</em></li>
  <li>once with the prop <code class="language-plaintext highlighter-rouge">context="button"</code>, to render the filter <em>button</em></li>
</ul>

<p>The component passed as <code class="language-plaintext highlighter-rouge">filters</code> should know how to render differently according to the <code class="language-plaintext highlighter-rouge">context</code> prop.</p>

<p>That’s the case of the react-admin <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> component:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;Filter context="form"&gt;</code> renders an inline form based on its children which must be <code class="language-plaintext highlighter-rouge">&lt;Input&gt;</code> components</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;Filter context="button"&gt;</code> renders a dropdown allowing enabling filters based on the <code class="language-plaintext highlighter-rouge">source</code> prop of its children.</li>
</ul>

<h3 id="full-text-search">Full-Text Search</h3>

<p><img src="./img/search_input.gif" alt="`&lt;SearchInput&gt;`" /></p>

<p>In addition to <a href="./Inputs.md">the usual input types</a> (<code class="language-plaintext highlighter-rouge">&lt;TextInput&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;SelectInput&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;ReferenceInput&gt;</code>, etc.), you can use the <code class="language-plaintext highlighter-rouge">&lt;SearchInput&gt;</code>, which is designed especially for the filter form. It’s like a <code class="language-plaintext highlighter-rouge">&lt;TextInput resettable&gt;</code> with a magnifier glass icon - exactly the type of input users look for when they want to do a full-text search.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Filter</span><span class="p">,</span> <span class="nx">SearchInput</span><span class="p">,</span> <span class="nx">TextInput</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostFilter</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Filter</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SearchInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"q"</span> <span class="na">alwaysOn</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Filter</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>In the example given above, the <code class="language-plaintext highlighter-rouge">q</code> filter triggers a full-text search on all fields. It’s your responsibility to implement the full-text filtering capabilities in your <code class="language-plaintext highlighter-rouge">dataProvider</code>, or in your API.</p>

<h3 id="quick-filters">Quick Filters</h3>

<p><img src="./img/quick_filters.gif" alt="`&lt;QuickFilter&gt;`" /></p>

<p>Users usually dislike using their keyboard to filter a list (especially on mobile). A good way to satisfy this user requirement is to turn filters into <em>quick filter</em>. A Quick filter is a filter with a non-editable <code class="language-plaintext highlighter-rouge">defaultValue</code>. Users can only enable or disable them.</p>

<p>Here is how to implement a generic <code class="language-plaintext highlighter-rouge">&lt;QuickFilter&gt;</code> component:</p>
<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Filter</span><span class="p">,</span> <span class="nx">SearchInput</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">makeStyles</span><span class="p">,</span> <span class="nx">Chip</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">useQuickFilterStyles</span> <span class="o">=</span> <span class="nf">makeStyles</span><span class="p">(</span><span class="nx">theme</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="na">chip</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">marginBottom</span><span class="p">:</span> <span class="nx">theme</span><span class="p">.</span><span class="nf">spacing</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">},</span>
<span class="p">}));</span>
<span class="kd">const</span> <span class="nx">QuickFilter</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">label</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">translate</span> <span class="o">=</span> <span class="nf">useTranslate</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">classes</span> <span class="o">=</span> <span class="nf">useQuickFilterStyles</span><span class="p">();</span>
    <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Chip</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="nx">classes</span><span class="p">.</span><span class="nx">chip</span><span class="si">}</span> <span class="na">label</span><span class="p">=</span><span class="si">{</span><span class="nf">translate</span><span class="p">(</span><span class="nx">label</span><span class="p">)</span><span class="si">}</span> <span class="p">/&gt;;</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">PostFilter</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Filter</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SearchInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"q"</span> <span class="na">alwaysOn</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">QuickFilter</span> <span class="na">source</span><span class="p">=</span><span class="s">"commentable"</span> <span class="na">label</span><span class="p">=</span><span class="s">"Commentable"</span> <span class="na">defaultValue</span><span class="p">=</span><span class="si">{</span><span class="kc">true</span><span class="si">}</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">QuickFilter</span> <span class="na">source</span><span class="p">=</span><span class="s">"views_lte"</span> <span class="na">label</span><span class="p">=</span><span class="s">"Low views"</span> <span class="na">defaultValue</span><span class="p">=</span><span class="si">{</span><span class="mi">150</span><span class="si">}</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">QuickFilter</span> <span class="na">source</span><span class="p">=</span><span class="s">"tags"</span> <span class="na">label</span><span class="p">=</span><span class="s">"Tagged Code"</span> <span class="na">defaultValue</span><span class="p">=</span><span class="si">{</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Filter</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: It’s currently not possible to use two quick filters for the same source.</p>

<h3 id="the-filterlist-sidebar">The <code class="language-plaintext highlighter-rouge">&lt;FilterList&gt;</code> Sidebar</h3>

<p><img src="./img/filter-sidebar.gif" alt="Filter Sidebar" /></p>

<p>An alternative UI to the <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> Button/Form Combo is the FilterList Sidebar. Similar to what users usually see on e-commerce websites, it’s a panel with many simple filters that can be enabled and combined using the mouse. The user experience is better than the Button/Form Combo, because the filter values are explicit, and it doesn’t require typing anything in a form. But it’s a bit less powerful, as only filters with a finite set of values (or intervals) can be used in the <code class="language-plaintext highlighter-rouge">&lt;FilterList&gt;</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">&lt;FilterList&gt;</code> component expects a list of <code class="language-plaintext highlighter-rouge">&lt;FilterListItem&gt;</code> as children. Each <code class="language-plaintext highlighter-rouge">&lt;FilterListItem&gt;</code> defines a filter <code class="language-plaintext highlighter-rouge">label</code> and a <code class="language-plaintext highlighter-rouge">value</code>, which is merged with the current filter value when enabled by the user. Here is an example usage for a list of customers:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">AccessTimeIcon</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/icons/AccessTime</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">MonetizationOnIcon</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/icons/MonetizationOnOutlined</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">MailIcon</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/icons/MailOutline</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">LocalOfferIcon</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/icons/LocalOfferOutlined</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FilterList</span><span class="p">,</span> <span class="nx">FilterListItem</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
    <span class="nx">endOfYesterday</span><span class="p">,</span>
    <span class="nx">startOfWeek</span><span class="p">,</span>
    <span class="nx">subWeeks</span><span class="p">,</span>
    <span class="nx">startOfMonth</span><span class="p">,</span>
    <span class="nx">subMonths</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">date-fns</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="nx">segments</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../segments/data</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">LastVisitedFilter</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">FilterList</span> <span class="na">label</span><span class="p">=</span><span class="s">"Last visited"</span> <span class="na">icon</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">AccessTimeIcon</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">FilterListItem</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"Today"</span>
            <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="p">{</span>
                <span class="na">last_seen_gte</span><span class="p">:</span> <span class="nf">endOfYesterday</span><span class="p">().</span><span class="nf">toISOString</span><span class="p">(),</span>
                <span class="na">last_seen_lte</span><span class="p">:</span> <span class="kc">undefined</span><span class="p">,</span>
            <span class="p">}</span><span class="si">}</span>
        <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">FilterListItem</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"This week"</span>
            <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="p">{</span>
                <span class="na">last_seen_gte</span><span class="p">:</span> <span class="nf">startOfWeek</span><span class="p">(</span><span class="k">new</span> <span class="nc">Date</span><span class="p">()).</span><span class="nf">toISOString</span><span class="p">(),</span>
                <span class="na">last_seen_lte</span><span class="p">:</span> <span class="kc">undefined</span><span class="p">,</span>
            <span class="p">}</span><span class="si">}</span>
        <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">FilterListItem</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"Last week"</span>
            <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="p">{</span>
                <span class="na">last_seen_gte</span><span class="p">:</span> <span class="nf">subWeeks</span><span class="p">(</span><span class="nf">startOfWeek</span><span class="p">(</span><span class="k">new</span> <span class="nc">Date</span><span class="p">()),</span> <span class="mi">1</span><span class="p">).</span><span class="nf">toISOString</span><span class="p">(),</span>
                <span class="na">last_seen_lte</span><span class="p">:</span> <span class="nf">startOfWeek</span><span class="p">(</span><span class="k">new</span> <span class="nc">Date</span><span class="p">()).</span><span class="nf">toISOString</span><span class="p">(),</span>
            <span class="p">}</span><span class="si">}</span>
        <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">FilterListItem</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"This month"</span>
            <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="p">{</span>
                <span class="na">last_seen_gte</span><span class="p">:</span> <span class="nf">startOfMonth</span><span class="p">(</span><span class="k">new</span> <span class="nc">Date</span><span class="p">()).</span><span class="nf">toISOString</span><span class="p">(),</span>
                <span class="na">last_seen_lte</span><span class="p">:</span> <span class="kc">undefined</span><span class="p">,</span>
            <span class="p">}</span><span class="si">}</span>
        <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">FilterListItem</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"Last month"</span>
            <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="p">{</span>
                <span class="na">last_seen_gte</span><span class="p">:</span> <span class="nf">subMonths</span><span class="p">(</span><span class="nf">startOfMonth</span><span class="p">(</span><span class="k">new</span> <span class="nc">Date</span><span class="p">()),</span><span class="mi">1</span><span class="p">).</span><span class="nf">toISOString</span><span class="p">(),</span>
                <span class="na">last_seen_lte</span><span class="p">:</span> <span class="nf">startOfMonth</span><span class="p">(</span><span class="k">new</span> <span class="nc">Date</span><span class="p">()).</span><span class="nf">toISOString</span><span class="p">(),</span>
            <span class="p">}</span><span class="si">}</span>
        <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">FilterListItem</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"Earlier"</span>
            <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="p">{</span>
                <span class="na">last_seen_gte</span><span class="p">:</span> <span class="kc">undefined</span><span class="p">,</span>
                <span class="na">last_seen_lte</span><span class="p">:</span> <span class="nf">subMonths</span><span class="p">(</span><span class="nf">startOfMonth</span><span class="p">(</span><span class="k">new</span> <span class="nc">Date</span><span class="p">()),</span><span class="mi">1</span><span class="p">).</span><span class="nf">toISOString</span><span class="p">(),</span>
            <span class="p">}</span><span class="si">}</span>
        <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">FilterList</span><span class="p">&gt;</span>
<span class="p">);</span>
<span class="kd">const</span> <span class="nx">HasOrderedFilter</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">FilterList</span>
        <span class="na">label</span><span class="p">=</span><span class="s">"Has ordered"</span>
        <span class="na">icon</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">MonetizationOnIcon</span> <span class="p">/&gt;</span><span class="si">}</span>
    <span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">FilterListItem</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"True"</span>
            <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="p">{</span>
                <span class="na">nb_commands_gte</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="na">nb_commands_lte</span><span class="p">:</span> <span class="kc">undefined</span><span class="p">,</span>
            <span class="p">}</span><span class="si">}</span>
        <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">FilterListItem</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"False"</span>
            <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="p">{</span>
                <span class="na">nb_commands_gte</span><span class="p">:</span> <span class="kc">undefined</span><span class="p">,</span>
                <span class="na">nb_commands_lte</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">}</span><span class="si">}</span>
        <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">FilterList</span><span class="p">&gt;</span>
<span class="p">);</span>
<span class="kd">const</span> <span class="nx">HasNewsletterFilter</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">FilterList</span>
        <span class="na">label</span><span class="p">=</span><span class="s">"Has newsletter"</span>
        <span class="na">icon</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">MailIcon</span> <span class="p">/&gt;</span><span class="si">}</span>
    <span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">FilterListItem</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"True"</span>
            <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">has_newsletter</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span><span class="si">}</span>
        <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">FilterListItem</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"False"</span>
            <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">has_newsletter</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}</span><span class="si">}</span>
        <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">FilterList</span><span class="p">&gt;</span>
<span class="p">);</span>
<span class="kd">const</span> <span class="nx">SegmentFilter</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">FilterList</span>
        <span class="na">label</span><span class="p">=</span><span class="s">"Segment"</span>
        <span class="na">icon</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">LocalOfferIcon</span> <span class="p">/&gt;</span><span class="si">}</span>
    <span class="p">&gt;</span>
        <span class="si">{</span><span class="nx">segments</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">segment</span> <span class="o">=&gt;</span> <span class="p">(</span>
            <span class="p">&lt;</span><span class="nc">FilterListItem</span>
                <span class="na">label</span><span class="p">=</span><span class="si">{</span><span class="nx">segment</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span>
                <span class="na">key</span><span class="p">=</span><span class="si">{</span><span class="nx">segment</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span>
                <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">groups</span><span class="p">:</span> <span class="nx">segment</span><span class="p">.</span><span class="nx">id</span> <span class="p">}</span><span class="si">}</span>
            <span class="p">/&gt;</span>
        <span class="p">))</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nc">FilterList</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>You can place these <code class="language-plaintext highlighter-rouge">&lt;FilterList&gt;</code> anywhere inside a <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code>. The most common case is to put them in a sidebar that is on the left hand side of the datagrid. You can use the <code class="language-plaintext highlighter-rouge">aside</code> property for that:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Card</span> <span class="k">as</span> <span class="nx">MuiCard</span><span class="p">,</span> <span class="nx">CardContent</span><span class="p">,</span> <span class="nx">withStyles</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">LastVisitedFilter</span><span class="p">,</span> <span class="nx">HasOrderedFilter</span><span class="p">,</span> <span class="nx">HasNewsletterFilter</span><span class="p">,</span> <span class="nx">SegmentFilter</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./filters</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">Card</span> <span class="o">=</span> <span class="nf">withStyles</span><span class="p">(</span><span class="nx">theme</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="na">root</span><span class="p">:</span> <span class="p">{</span>
        <span class="p">[</span><span class="nx">theme</span><span class="p">.</span><span class="nx">breakpoints</span><span class="p">.</span><span class="nf">up</span><span class="p">(</span><span class="dl">'</span><span class="s1">sm</span><span class="dl">'</span><span class="p">)]:</span> <span class="p">{</span>
            <span class="na">order</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="c1">// display on the left rather than on the right of the list</span>
            <span class="na">width</span><span class="p">:</span> <span class="dl">'</span><span class="s1">15em</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">marginRight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1em</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="p">[</span><span class="nx">theme</span><span class="p">.</span><span class="nx">breakpoints</span><span class="p">.</span><span class="nf">down</span><span class="p">(</span><span class="dl">'</span><span class="s1">sm</span><span class="dl">'</span><span class="p">)]:</span> <span class="p">{</span>
            <span class="na">display</span><span class="p">:</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}))(</span><span class="nx">MuiCard</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">FilterSidebar</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Card</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">CardContent</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">LastVisitedFilter</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">HasOrderedFilter</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">HasNewsletterFilter</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">SegmentFilter</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">CardContent</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Card</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">CustomerList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="na">aside</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">FilterSidebar</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
        // ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">)</span>
</code></pre></div></div>

<p><strong>Tip</strong>: The <code class="language-plaintext highlighter-rouge">&lt;FilterList&gt;</code> Sidebar is not a good UI for small screens. You can choose to hide it on small screens (as in the previous example). A good tradeoff is to use <code class="language-plaintext highlighter-rouge">&lt;FilterList&gt;</code> on large screens, and the <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> Button/Form combo on Mobile.</p>

<h3 id="live-search">Live Search</h3>

<p><img src="./img/filter-live-search.gif" alt="Filter Live Search" /></p>

<p>The filter sidebar is not a form. Therefore, if your users need to enter complex filters, you’ll have to recreate a filter form using react-final-form (see the <a href="#building-a-custom-filter">Filter on submit</a> section below for an example). However, if you only need one text input with a filter-as-you-type behavior, you’ll find the <code class="language-plaintext highlighter-rouge">&lt;FilterLiveSearch&gt;</code> component convenient.</p>

<p>It outputs a form containing a single <code class="language-plaintext highlighter-rouge">&lt;SearchInput&gt;</code>, which modifies the page filter on change. That’s usually what users expect for a full-text filter. <code class="language-plaintext highlighter-rouge">&lt;FilterLiveSearch&gt;</code> only needs a <code class="language-plaintext highlighter-rouge">source</code> field.</p>

<p>So for instance, to add a search filter on the customer full name, add the following line to the Sidebar:</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gi">+import { FilterLiveSearch } from 'react-admin';
</span><span class="err">
</span><span class="p">const FilterSidebar = () =&gt; (
</span>    &lt;Card&gt;
        &lt;CardContent&gt;
<span class="gi">+           &lt;FilterLiveSearch source="full_name" /&gt;
</span>            &lt;LastVisitedFilter /&gt;
            &lt;HasOrderedFilter /&gt;
            &lt;HasNewsletterFilter /&gt;
            &lt;SegmentFilter /&gt;
        &lt;/CardContent&gt;
    &lt;/Card&gt;
);
</code></pre></div></div>

<h3 id="building-a-custom-filter">Building a Custom Filter</h3>

<p><img src="./img/filter_with_submit.gif" alt="Filters with submit button" /></p>

<p>If neither the <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> button/form combo or the <code class="language-plaintext highlighter-rouge">&lt;FilterList&gt;</code> sidebar match your need, you can always build your own. React-admin provides shortcuts to facilitate the development of custom filters.</p>

<p>For instance, by default, the filter button/form combo doesn’t provide a submit button, and submits automatically after the user has finished interacting with the form. This provides a smooth user experience, but for some APIs, it can cause too many calls.</p>

<p>In that case, the solution is to process the filter when users click on a submit button, rather than when they type values in form inputs. React-admin doesn’t provide any component for that, but it’s a good opportunity to illustrate the internals of the filter functionality. We’ll actually provide an alternative implementation to the <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> button/form combo.</p>

<p>The new filter element can use the <code class="language-plaintext highlighter-rouge">useListContext()</code> hook to interact with the URI query parameter more easily. The hook returns the following constants:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">filterValues</code>: Value of the filters based on the URI, e.g. <code class="language-plaintext highlighter-rouge">{"commentable":true,"q":"lorem "}</code></li>
  <li><code class="language-plaintext highlighter-rouge">setFilters()</code>: Callback to set the filter values, e.g. <code class="language-plaintext highlighter-rouge">setFilters({"commentable":true})</code></li>
  <li><code class="language-plaintext highlighter-rouge">displayedFilters</code>: Names of the filters displayed in the form, e.g. <code class="language-plaintext highlighter-rouge">['commentable','title']</code></li>
  <li><code class="language-plaintext highlighter-rouge">showFilter()</code>: Callback to display an additional filter in the form, e.g. <code class="language-plaintext highlighter-rouge">showFilter('views')</code></li>
  <li><code class="language-plaintext highlighter-rouge">hideFilter()</code>: Callback to hide a filter in the form, e.g. <code class="language-plaintext highlighter-rouge">hideFilter('title')</code></li>
</ul>

<p>Let’s use this knowledge to write a custom <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> component that filters on submit.</p>

<p>As explained earlier, <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> clones the element passed as <code class="language-plaintext highlighter-rouge">filters</code> prop twice - once to display the filter <em>button</em>, and once to display the filter <em>form</em>. So first, let’s create a <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code> component rendering either a button or a form depending on the <code class="language-plaintext highlighter-rouge">context</code>:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">PostFilter</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">props</span><span class="p">.</span><span class="nx">context</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">button</span><span class="dl">"</span> <span class="p">?</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">PostFilterButton</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">/&gt;</span>
  <span class="p">)</span> <span class="p">:</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">PostFilterForm</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">/&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">&lt;PostListFilterButton&gt;</code> simply shows the filter form on click. We’ll take advantage of the <code class="language-plaintext highlighter-rouge">showFilter</code> function:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useListContext</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Button</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@material-ui/core</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ContentFilter</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@material-ui/icons/FilterList</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostFilterButton</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">showFilter</span> <span class="p">}</span> <span class="o">=</span> <span class="nf">useListContext</span><span class="p">();</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">Button</span>
            <span class="na">size</span><span class="p">=</span><span class="s">"small"</span>
            <span class="na">color</span><span class="p">=</span><span class="s">"primary"</span>
            <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">showFilter</span><span class="p">(</span><span class="dl">"</span><span class="s2">main</span><span class="dl">"</span><span class="p">)</span><span class="si">}</span>
            <span class="na">startIcon</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">ContentFilter</span> <span class="p">/&gt;</span><span class="si">}</span>
        <span class="p">&gt;</span>
            Filter
        <span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Normally, <code class="language-plaintext highlighter-rouge">showFilter()</code> adds one input to the <code class="language-plaintext highlighter-rouge">displayedFilters</code> list. As the filter form will be entirely hidden or shown, we use <code class="language-plaintext highlighter-rouge">showFilter()</code> with a virtual “main” input, which represents the entire form.</p>

<p>Next is the form component, based on <code class="language-plaintext highlighter-rouge">react-final-form</code>. The form inputs appear directly in the form, and the form submission triggers the <code class="language-plaintext highlighter-rouge">setFilters()</code> callback passed as parameter:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Form</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-final-form</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Box</span><span class="p">,</span> <span class="nx">Button</span><span class="p">,</span> <span class="nx">InputAdornment</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">SearchIcon</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/icons/Search</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">TextInput</span><span class="p">,</span> <span class="nx">NullableBooleanInput</span><span class="p">,</span> <span class="nx">useListContext</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostFilterForm</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">open</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span>
        <span class="nx">displayedFilters</span><span class="p">,</span>
        <span class="nx">filterValues</span><span class="p">,</span>
        <span class="nx">setFilters</span><span class="p">,</span>
        <span class="nx">hideFilter</span><span class="p">,</span>
    <span class="p">}</span> <span class="o">=</span> <span class="nf">useListContext</span><span class="p">();</span>

    <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">displayedFilters</span><span class="p">.</span><span class="nx">main</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>

    <span class="kd">const</span> <span class="nx">onSubmit</span> <span class="o">=</span> <span class="nx">values</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nf">keys</span><span class="p">(</span><span class="nx">values</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nf">setFilters</span><span class="p">(</span><span class="nx">values</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nf">hideFilter</span><span class="p">(</span><span class="dl">"</span><span class="s2">main</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">resetFilter</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">setFilters</span><span class="p">({},</span> <span class="p">[]);</span>
    <span class="p">};</span>

    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Form</span> <span class="na">onSubmit</span><span class="p">=</span><span class="si">{</span><span class="nx">onSubmit</span><span class="si">}</span> <span class="na">initialValues</span><span class="p">=</span><span class="si">{</span><span class="nx">filterValues</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="si">{</span><span class="p">({</span> <span class="nx">handleSubmit</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
            <span class="p">&lt;</span><span class="nt">form</span> <span class="na">onSubmit</span><span class="p">=</span><span class="si">{</span><span class="nx">handleSubmit</span><span class="si">}</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">mt</span><span class="p">=</span><span class="si">{</span><span class="mi">8</span><span class="si">}</span> <span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">display</span><span class="p">=</span><span class="s">"flex"</span> <span class="na">alignItems</span><span class="p">=</span><span class="s">"flex-end"</span> <span class="na">mb</span><span class="p">=</span><span class="si">{</span><span class="mi">1</span><span class="si">}</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">component</span><span class="p">=</span><span class="s">"span"</span> <span class="na">mr</span><span class="p">=</span><span class="si">{</span><span class="mi">2</span><span class="si">}</span><span class="p">&gt;</span>
                    <span class="si">{</span><span class="cm">/* Full-text search filter. We don't use &lt;SearchFilter&gt; to force a large form input */</span><span class="si">}</span>
                    <span class="p">&lt;</span><span class="nc">TextInput</span>
                    <span class="na">resettable</span>
                    <span class="na">helperText</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span>
                    <span class="na">source</span><span class="p">=</span><span class="s">"q"</span>
                    <span class="na">label</span><span class="p">=</span><span class="s">"Search"</span>
                    <span class="na">InputProps</span><span class="p">=</span><span class="si">{</span><span class="p">{</span>
                        <span class="na">endAdornment</span><span class="p">:</span> <span class="p">(</span>
                        <span class="p">&lt;</span><span class="nc">InputAdornment</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nc">SearchIcon</span> <span class="na">color</span><span class="p">=</span><span class="s">"disabled"</span> <span class="p">/&gt;</span>
                        <span class="p">&lt;/</span><span class="nc">InputAdornment</span><span class="p">&gt;</span>
                        <span class="p">)</span>
                    <span class="p">}</span><span class="si">}</span>
                    <span class="p">/&gt;</span>
                <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">component</span><span class="p">=</span><span class="s">"span"</span> <span class="na">mr</span><span class="p">=</span><span class="si">{</span><span class="mi">2</span><span class="si">}</span><span class="p">&gt;</span>
                    <span class="si">{</span><span class="cm">/* Commentable filter */</span><span class="si">}</span>
                    <span class="p">&lt;</span><span class="nc">NullableBooleanInput</span> <span class="na">helperText</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span> <span class="na">source</span><span class="p">=</span><span class="s">"commentable"</span> <span class="p">/&gt;</span>
                <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">component</span><span class="p">=</span><span class="s">"span"</span> <span class="na">mr</span><span class="p">=</span><span class="si">{</span><span class="mi">2</span><span class="si">}</span> <span class="na">mb</span><span class="p">=</span><span class="si">{</span><span class="mf">1.5</span><span class="si">}</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">variant</span><span class="p">=</span><span class="s">"outlined"</span> <span class="na">color</span><span class="p">=</span><span class="s">"primary"</span> <span class="na">type</span><span class="p">=</span><span class="s">"submit"</span><span class="p">&gt;</span>
                    Filter
                    <span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">component</span><span class="p">=</span><span class="s">"span"</span> <span class="na">mb</span><span class="p">=</span><span class="si">{</span><span class="mf">1.5</span><span class="si">}</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">variant</span><span class="p">=</span><span class="s">"outlined"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">resetFilter</span><span class="si">}</span><span class="p">&gt;</span>
                    Close
                    <span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
            <span class="p">)</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nc">Form</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p>To finish, we pass the <code class="language-plaintext highlighter-rouge">&lt;PostFilter&gt;</code> component to the <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> component using the <code class="language-plaintext highlighter-rouge">filters</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">filters</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostFilter</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>You can use a similar approach to customize the list filter completely, e.g. to display the filters in a sidebar, or as a line in the datagrid, etc.</p>

<h2 id="sorting-the-list">Sorting The List</h2>

<table><tbody><tr style="border:none">
<td style="width:55%;border:none;">
<a title="&lt;Datagrid&gt; column sort" href="./img/sort-column-header.gif"><img src="./img/sort-column-header.gif" /></a>
</td>
<td style="width:45%;border:none;">
<a title="&lt;SortButton&gt; Component" href="./img/sort-button.gif"><img src="./img/sort-button.gif" /></a>
</td>
</tr></tbody></table>

<p>React-admin does its best to offer a powerful sort functionality, and to get out of the way when you want to go further.</p>

<p>The next sections explain hows to use the sort functionality. And first, a few explanations about the inner workings of sorting in react-admin:</p>

<ul>
  <li><a href="#sort-query-parameter">Sort Query Parameter</a></li>
  <li><a href="#linking-to-a-pre-sorted-list">Linking To A Pre-Sorted List</a></li>
</ul>

<p>React-admin proposes several UI components to let users to see and modify sort parameters, and gives you the tools to build custom ones.</p>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> Column Headers
    <ul>
      <li><a href="#using-datagrid-headers-to-modify-list-sort">Usage</a></li>
      <li><a href="#disabling-sorting">Disabling Sorting</a></li>
      <li><a href="#specifying-a-sort-field">Specifying A Sort Field</a></li>
      <li><a href="#specifying-the-sort-order">Specifying The Sort Order</a></li>
    </ul>
  </li>
  <li>The <code class="language-plaintext highlighter-rouge">&lt;SortButton&gt;</code> Component
    <ul>
      <li><a href="#the-sortbutton-component">Usage</a></li>
    </ul>
  </li>
  <li><a href="#building-a-custom-sort-control">Building A Custom Sort Control</a></li>
</ul>

<h3 id="sort-query-parameter">Sort Query Parameter</h3>

<p>Just like for the filters, the List view uses the <code class="language-plaintext highlighter-rouge">sort</code> and <code class="language-plaintext highlighter-rouge">order</code> query parameters to determine the sort field and order passed to <code class="language-plaintext highlighter-rouge">dataProvider.getList()</code>.</p>

<p>Here is a typical List URL:</p>

<blockquote>
  <p>https://myadmin.dev/#/posts?displayedFilters=%7B%22commentable%22%3Atrue%7D&amp;filter=%7B%22commentable%22%3Atrue%2C%22q%22%3A%22lorem%20%22%7D&amp;order=DESC&amp;page=1&amp;perPage=10&amp;sort=published_at</p>
</blockquote>

<p>Once decoded, this URL reveals the intended sort:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sort=published_at
order=DESC
</code></pre></div></div>

<h3 id="linking-to-a-pre-sorted-list">Linking to a Pre-Sorted List</h3>

<p>As the sort values are taken from the URL, you can link to a pre-sorted list by setting the <code class="language-plaintext highlighter-rouge">sort</code> and <code class="language-plaintext highlighter-rouge">order</code> query parameters.</p>

<p>For instance, if you have a list of posts ordered by publication date, and you want to provide a button to sort the list by number of views descendent:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Button</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/Button</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Link</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-router-dom</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">stringify</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">query-string</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">SortByViews</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Button</span>
        <span class="na">color</span><span class="p">=</span><span class="s">"primary"</span>
        <span class="na">component</span><span class="p">=</span><span class="si">{</span><span class="nx">Link</span><span class="si">}</span>
        <span class="na">to</span><span class="p">=</span><span class="si">{</span><span class="p">{</span>
            <span class="na">pathname</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/posts</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">search</span><span class="p">:</span> <span class="nf">stringify</span><span class="p">({</span>
                <span class="na">page</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="na">perPage</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
                <span class="na">sort</span><span class="p">:</span> <span class="dl">'</span><span class="s1">nb_views</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">order</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DESC</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">filter</span><span class="p">:</span> <span class="p">{},</span>
            <span class="p">}),</span>
        <span class="p">}</span><span class="si">}</span>
    <span class="p">&gt;</span>
        Sort by views 
    <span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: You have to pass <em>all</em> the query string parameters - not just <code class="language-plaintext highlighter-rouge">sort</code> and <code class="language-plaintext highlighter-rouge">order</code>. That’s a current limitation of react-admin.</p>

<h3 id="using-datagrid-headers-to-modify-list-sort">Using Datagrid Headers To Modify List Sort</h3>

<p><img src="./img/sort-column-header.gif" alt="Sort Column Header" /></p>

<p>If you’re using a <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> inside the List view, then the column headers are buttons allowing users to change the list sort field and order. This feature requires no configuration and works out fo the box. The next sections explain how you can disable of modify the field used for sorting on a particular column.</p>

<h3 id="disabling-sorting">Disabling Sorting</h3>

<p>It is possible to disable sorting for a specific <code class="language-plaintext highlighter-rouge">&lt;Field&gt;</code> by passing a <code class="language-plaintext highlighter-rouge">sortable</code> property set to <code class="language-plaintext highlighter-rouge">false</code>:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">Datagrid</span><span class="p">,</span> <span class="nx">TextField</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="na">sortable</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="specifying-a-sort-field">Specifying A Sort Field</h3>

<p>By default, a column is sorted by the <code class="language-plaintext highlighter-rouge">source</code> property. To define another attribute to sort by, set it via the <code class="language-plaintext highlighter-rouge">&lt;Field sortBy&gt;</code> property:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">Datagrid</span><span class="p">,</span> <span class="nx">TextField</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">ReferenceField</span> <span class="na">label</span><span class="p">=</span><span class="s">"Post"</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="na">reference</span><span class="p">=</span><span class="s">"posts"</span> <span class="na">sortBy</span><span class="p">=</span><span class="s">"title"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nc">ReferenceField</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">FunctionField</span>
                <span class="na">label</span><span class="p">=</span><span class="s">"Author"</span>
                <span class="na">sortBy</span><span class="p">=</span><span class="s">"last_name"</span>
                <span class="na">render</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="s2">`</span><span class="p">${</span><span class="nx">record</span><span class="p">.</span><span class="nx">author</span><span class="p">.</span><span class="nx">first_name</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">record</span><span class="p">.</span><span class="nx">author</span><span class="p">.</span><span class="nx">last_name</span><span class="p">}</span><span class="s2">`</span><span class="si">}</span>
            <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="specifying-the-sort-order">Specifying The Sort Order</h3>

<p>By default, when the user clicks on a column header, the list becomes sorted in the ascending order. You change this behavior by setting the <code class="language-plaintext highlighter-rouge">sortByOrder</code> prop to <code class="language-plaintext highlighter-rouge">"DESC"</code> in a <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> <code class="language-plaintext highlighter-rouge">&lt;Field&gt;</code>:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">Datagrid</span><span class="p">,</span> <span class="nx">TextField</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">ReferenceField</span> <span class="na">label</span><span class="p">=</span><span class="s">"Post"</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="na">reference</span><span class="p">=</span><span class="s">"posts"</span> <span class="na">sortByOrder</span><span class="p">=</span><span class="s">"DESC"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nc">ReferenceField</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">FunctionField</span>
                <span class="na">label</span><span class="p">=</span><span class="s">"Author"</span>
                <span class="na">sortBy</span><span class="p">=</span><span class="s">"last_name"</span>
                <span class="na">sortByOrder</span><span class="p">=</span><span class="s">"DESC"</span>
                <span class="na">render</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="s2">`</span><span class="p">${</span><span class="nx">record</span><span class="p">.</span><span class="nx">author</span><span class="p">.</span><span class="nx">first_name</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">record</span><span class="p">.</span><span class="nx">author</span><span class="p">.</span><span class="nx">last_name</span><span class="p">}</span><span class="s2">`</span><span class="si">}</span>
            <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="the-sortbutton-component">The <code class="language-plaintext highlighter-rouge">&lt;SortButton&gt;</code> Component</h3>

<p><img src="./img/sort-button.gif" alt="Sort Button" /></p>

<p>Some List views don’t have a natural UI for sorting - e.g. the <code class="language-plaintext highlighter-rouge">&lt;SimpleList&gt;</code>, or a list of images, don’t have column headers like the <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code>. For these cases, react-admin offers the <code class="language-plaintext highlighter-rouge">&lt;SortButton&gt;</code>, which displays a drodown list of fields that the user can choose to sort on.</p>

<p><code class="language-plaintext highlighter-rouge">&lt;SortButton&gt;</code> expects one prop: <code class="language-plaintext highlighter-rouge">fields</code>, the list of fields it should allows to sort on. For instance, here is how to offer a button to sort on the <code class="language-plaintext highlighter-rouge">reference</code>, <code class="language-plaintext highlighter-rouge">sales</code>, and <code class="language-plaintext highlighter-rouge">stock</code> fields:</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">TopToolbar</span><span class="p">,</span> <span class="nx">SortButton</span><span class="p">,</span> <span class="nx">CreateButton</span><span class="p">,</span> <span class="nx">ExportButton</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ListActions</span><span class="p">:</span> <span class="nx">FC</span><span class="o">&lt;</span><span class="kr">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">TopToolbar</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SortButton</span> <span class="na">fields</span><span class="p">=</span><span class="si">{</span><span class="p">[</span><span class="dl">'</span><span class="s1">reference</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">sales</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">stock</span><span class="dl">'</span><span class="p">]</span><span class="si">}</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">CreateButton</span> <span class="na">basePath</span><span class="p">=</span><span class="s">"/products"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">ExportButton</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">TopToolbar</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="building-a-custom-sort-control">Building a Custom Sort Control</h3>

<p>When neither the <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> or the <code class="language-plaintext highlighter-rouge">&lt;SortButton&gt;</code> fit your UI needs, you have to write a custom sort control. As with custom filters, this boils down to grabbing the required data and callbacks from the <code class="language-plaintext highlighter-rouge">ListContext</code>. Let’s use the <code class="language-plaintext highlighter-rouge">&lt;SortButton&gt;</code> source as an example usage of <code class="language-plaintext highlighter-rouge">currentSort</code> and <code class="language-plaintext highlighter-rouge">setSort</code>:</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Button</span><span class="p">,</span> <span class="nx">Menu</span><span class="p">,</span> <span class="nx">MenuItem</span><span class="p">,</span> <span class="nx">Tooltip</span><span class="p">,</span> <span class="nx">IconButton</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">SortIcon</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/icons/Sort</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ArrowDropDownIcon</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/icons/ArrowDropDown</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useListSortContext</span><span class="p">,</span> <span class="nx">useTranslate</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">SortButton</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">fields</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// currentSort is an object { field, order } containing the current sort</span>
    <span class="c1">// setSort is a callback (field, order) =&gt; void allowing to change the sort field and order</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">currentSort</span><span class="p">,</span> <span class="nx">setSort</span> <span class="p">}</span> <span class="o">=</span> <span class="nf">useListSortContext</span><span class="p">();</span>
    <span class="c1">// rely on the translations to display labels like 'Sort by sales descending'</span>
    <span class="kd">const</span> <span class="nx">translate</span> <span class="o">=</span> <span class="nf">useTranslate</span><span class="p">();</span>
    <span class="c1">// open/closed state for dropdown</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">anchorEl</span><span class="p">,</span> <span class="nx">setAnchorEl</span><span class="p">]</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nf">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

    <span class="c1">// mouse handlers</span>
    <span class="kd">const</span> <span class="nx">handleClick</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">setAnchorEl</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="kd">const</span> <span class="nx">handleClose</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">setAnchorEl</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="kd">const</span> <span class="nx">handleChangeSort</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">field</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">sort</span><span class="p">;</span>
        <span class="nf">setSort</span><span class="p">(</span>
            <span class="nx">field</span><span class="p">,</span>
            <span class="nx">field</span> <span class="o">===</span> <span class="nx">currentSort</span><span class="p">.</span><span class="nx">field</span>
                <span class="p">?</span> <span class="nf">inverseOrder</span><span class="p">(</span><span class="nx">currentSort</span><span class="p">.</span><span class="nx">order</span><span class="p">)</span>
                <span class="p">:</span> <span class="dl">'</span><span class="s1">ASC</span><span class="dl">'</span>
        <span class="p">);</span>
        <span class="nf">setAnchorEl</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="c1">// English stranslation is 'Sort by %{field} %{order}'</span>
    <span class="kd">const</span> <span class="nx">buttonLabel</span> <span class="o">=</span> <span class="nf">translate</span><span class="p">(</span><span class="dl">'</span><span class="s1">ra.sort.sort_by</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">field</span><span class="p">:</span> <span class="nf">translate</span><span class="p">(</span><span class="s2">`resources.products.fields.</span><span class="p">${</span><span class="nx">currentSort</span><span class="p">.</span><span class="nx">field</span><span class="p">}</span><span class="s2">`</span><span class="p">),</span>
        <span class="na">order</span><span class="p">:</span> <span class="nf">translate</span><span class="p">(</span><span class="s2">`ra.sort.</span><span class="p">${</span><span class="nx">currentSort</span><span class="p">.</span><span class="nx">order</span><span class="p">}</span><span class="s2">`</span><span class="p">),</span>
    <span class="p">});</span>

    <span class="k">return </span><span class="p">(&lt;&gt;</span>
        <span class="p">&lt;</span><span class="nc">Button</span>
            <span class="na">aria-controls</span><span class="p">=</span><span class="s">"simple-menu"</span>
            <span class="na">aria-haspopup</span><span class="p">=</span><span class="s">"true"</span>
            <span class="na">color</span><span class="p">=</span><span class="s">"primary"</span>
            <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">handleClick</span><span class="si">}</span>
            <span class="na">startIcon</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">SortIcon</span> <span class="p">/&gt;</span><span class="si">}</span>
            <span class="na">endIcon</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">ArrowDropDownIcon</span> <span class="p">/&gt;</span><span class="si">}</span>
            <span class="na">size</span><span class="p">=</span><span class="s">"small"</span>
        <span class="p">&gt;</span>
            <span class="si">{</span><span class="nx">buttonLabel</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Menu</span>
            <span class="na">id</span><span class="p">=</span><span class="s">"simple-menu"</span>
            <span class="na">anchorEl</span><span class="p">=</span><span class="si">{</span><span class="nx">anchorEl</span><span class="si">}</span>
            <span class="na">keepMounted</span>
            <span class="na">open</span><span class="p">=</span><span class="si">{</span><span class="nc">Boolean</span><span class="p">(</span><span class="nx">anchorEl</span><span class="p">)</span><span class="si">}</span>
            <span class="na">onClose</span><span class="p">=</span><span class="si">{</span><span class="nx">handleClose</span><span class="si">}</span>
        <span class="p">&gt;</span>
            <span class="si">{</span><span class="nx">fields</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">field</span> <span class="o">=&gt;</span> <span class="p">(</span>
                <span class="p">&lt;</span><span class="nc">MenuItem</span>
                    <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">handleChangeSort</span><span class="si">}</span>
                    <span class="c1">// store the sort field in the element dataset to avoid creating a new click handler for each item (better for performance)</span>
                    <span class="na">data-sort</span><span class="p">=</span><span class="si">{</span><span class="nx">field</span><span class="si">}</span>
                    <span class="na">key</span><span class="p">=</span><span class="si">{</span><span class="nx">field</span><span class="si">}</span>
                <span class="p">&gt;</span>
                    <span class="si">{</span><span class="nf">translate</span><span class="p">(</span><span class="s2">`resources.products.fields.</span><span class="p">${</span><span class="nx">field</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span><span class="si">}{</span><span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="si">}</span>
                    <span class="si">{</span><span class="nf">translate</span><span class="p">(</span>
                        <span class="s2">`ra.sort.</span><span class="p">${</span>
                            <span class="nx">currentSort</span><span class="p">.</span><span class="nx">field</span> <span class="o">===</span> <span class="nx">field</span>
                                <span class="p">?</span> <span class="nf">inverseOrder</span><span class="p">(</span><span class="nx">currentSort</span><span class="p">.</span><span class="nx">order</span><span class="p">)</span>
                                <span class="p">:</span> <span class="dl">'</span><span class="s1">ASC</span><span class="dl">'</span>
                        <span class="p">}</span><span class="s2">`</span>
                    <span class="p">)</span><span class="si">}</span>
                <span class="p">&lt;/</span><span class="nc">MenuItem</span><span class="p">&gt;</span>
            <span class="p">))</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nc">Menu</span><span class="p">&gt;</span>
    <span class="p">&lt;/&gt;);</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">inverseOrder</span> <span class="o">=</span> <span class="p">(</span><span class="nx">sort</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">sort</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">ASC</span><span class="dl">'</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">DESC</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">ASC</span><span class="dl">'</span><span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">SortButton</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="paginating-the-list">Paginating the List</h2>

<h3 id="the-pagination-component">The <code class="language-plaintext highlighter-rouge">&lt;Pagination&gt;</code> Component</h3>

<p><img src="./img/pagination-buttons.gif" alt="Pagination buttons" /></p>

<p>By default, the <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> uses the <code class="language-plaintext highlighter-rouge">&lt;Pagination&gt;</code> component for pagination. This component displays buttons to navigate between pages, including buttons for the surrounding pages.</p>

<p>By decorating this component, you can create your own variant with a different set of perPage options.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/MyPagination.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Pagination</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostPagination</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">&lt;</span><span class="nc">Pagination</span> <span class="na">rowsPerPageOptions</span><span class="p">=</span><span class="si">{</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">/&gt;;</span>
</code></pre></div></div>

<p>Then, to use this component instead of the default <code class="language-plaintext highlighter-rouge">&lt;Pagination&gt;</code>, use the <code class="language-plaintext highlighter-rouge">&lt;List pagination&gt;</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">List</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">PostPagination</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./PostPagination</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">pagination</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostPagination</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: Pass an empty array to <code class="language-plaintext highlighter-rouge">rowsPerPageOptions</code> to disable the rows per page selection.</p>

<h3 id="building-a-custom-pagination-control">Building a Custom Pagination Control</h3>

<p>The <code class="language-plaintext highlighter-rouge">&lt;Pagination&gt;</code> component gets the following constants from <a href="#uselistcontext">the <code class="language-plaintext highlighter-rouge">useListContext</code> hook</a>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">page</code>: The current page number (integer). First page is <code class="language-plaintext highlighter-rouge">1</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">perPage</code>: The number of records per page.</li>
  <li><code class="language-plaintext highlighter-rouge">setPage</code>: <code class="language-plaintext highlighter-rouge">Function(page: number) =&gt; void</code>. A function that set the current page number.</li>
  <li><code class="language-plaintext highlighter-rouge">total</code>: The total number of records.</li>
  <li><code class="language-plaintext highlighter-rouge">actions</code>: A component that displays the pagination buttons (default: <code class="language-plaintext highlighter-rouge">&lt;PaginationActions&gt;</code>)</li>
  <li><code class="language-plaintext highlighter-rouge">limit</code>: An element that is displayed if there is no data to show (default: <code class="language-plaintext highlighter-rouge">&lt;PaginationLimit&gt;</code>)</li>
</ul>

<p>If you want to replace the default pagination by a “&lt;previous - next&gt;” pagination, create a pagination component like the following:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useListContext</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Button</span><span class="p">,</span> <span class="nx">Toolbar</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ChevronLeft</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/icons/ChevronLeft</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ChevronRight</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/icons/ChevronRight</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostPagination</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">page</span><span class="p">,</span> <span class="nx">perPage</span><span class="p">,</span> <span class="nx">total</span><span class="p">,</span> <span class="nx">setPage</span> <span class="p">}</span> <span class="o">=</span> <span class="nf">useListContext</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">nbPages</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">ceil</span><span class="p">(</span><span class="nx">total</span> <span class="o">/</span> <span class="nx">perPage</span><span class="p">)</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="nx">nbPages</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span>
            <span class="p">&lt;</span><span class="nc">Toolbar</span><span class="p">&gt;</span>
                <span class="si">{</span><span class="nx">page</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span>
                    <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">color</span><span class="p">=</span><span class="s">"primary"</span> <span class="na">key</span><span class="p">=</span><span class="s">"prev"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">setPage</span><span class="p">(</span><span class="nx">page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nc">ChevronLeft</span> <span class="p">/&gt;</span>
                        Prev
                    <span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
                <span class="si">}</span>
                <span class="si">{</span><span class="nx">page</span> <span class="o">!==</span> <span class="nx">nbPages</span> <span class="o">&amp;&amp;</span>
                    <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">color</span><span class="p">=</span><span class="s">"primary"</span> <span class="na">key</span><span class="p">=</span><span class="s">"next"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">setPage</span><span class="p">(</span><span class="nx">page</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>
                        Next
                        <span class="p">&lt;</span><span class="nc">ChevronRight</span> <span class="p">/&gt;</span>
                    <span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
                <span class="si">}</span>
            <span class="p">&lt;/</span><span class="nc">Toolbar</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">pagination</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostPagination</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>But if you just want to change the color property of the pagination button, you can extend the existing components:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span>
    <span class="nx">List</span><span class="p">,</span>
    <span class="nx">Pagination</span> <span class="k">as</span> <span class="nx">RaPagination</span><span class="p">,</span>
    <span class="nx">PaginationActions</span> <span class="k">as</span> <span class="nx">RaPaginationActions</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PaginationActions</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">&lt;</span><span class="nc">RaPaginationActions</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">color</span><span class="p">=</span><span class="s">"secondary"</span> <span class="p">/&gt;;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">Pagination</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">&lt;</span><span class="nc">RaPagination</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">ActionsComponent</span><span class="p">=</span><span class="si">{</span><span class="nx">PaginationActions</span><span class="si">}</span> <span class="p">/&gt;;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">UserList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">pagination</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">Pagination</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="the-listguesser-component">The <code class="language-plaintext highlighter-rouge">&lt;ListGuesser&gt;</code> Component</h2>

<p>Instead of a custom <code class="language-plaintext highlighter-rouge">List</code>, you can use the <code class="language-plaintext highlighter-rouge">ListGuesser</code> to determine which fields to use based on the data returned by the API.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/App.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Admin</span><span class="p">,</span> <span class="nx">Resource</span><span class="p">,</span> <span class="nx">ListGuesser</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">jsonServerProvider</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ra-data-json-server</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Admin</span> <span class="na">dataProvider</span><span class="p">=</span><span class="si">{</span><span class="nf">jsonServerProvider</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://jsonplaceholder.typicode.com</span><span class="dl">'</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Resource</span> <span class="na">name</span><span class="p">=</span><span class="s">"posts"</span> <span class="na">list</span><span class="p">=</span><span class="si">{</span><span class="nx">ListGuesser</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Admin</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>Just like <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;ListGuesser&gt;</code> fetches the data. It then analyzes the response, and guesses the fields it should use to display a basic <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> with the data. It also dumps the components it has guessed in the console, so you can copy it into your own code. Use this feature to quickly bootstrap a <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> on top of an existing API, without adding the fields one by one.</p>

<p><img src="./img/guessed-list.png" alt="Guessed List" /></p>

<p>React-admin provides guessers for the List view (<code class="language-plaintext highlighter-rouge">&lt;ListGuesser&gt;</code>), the Edit view (<code class="language-plaintext highlighter-rouge">&lt;EditGuesser&gt;</code>), and the Show view (<code class="language-plaintext highlighter-rouge">&lt;ShowGuesser&gt;</code>).</p>

<p><strong>Tip</strong>: Do not use the guessers in production. They are slower than manually-defined components, because they have to infer types based on the content. Besides, the guessers are not always perfect.</p>

<h2 id="uselistcontext"><code class="language-plaintext highlighter-rouge">useListContext</code></h2>

<p>The <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> component takes care of fetching the data, and puts that data in a context called <code class="language-plaintext highlighter-rouge">ListContext</code> so that it’s available for its descendants. In fact, it puts a lot of variables in the context because the List page is complex: based on the URL, the <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> component deduces filters, pagination, ordering, it provides callbacks to update them.</p>

<p>Any component can grab that data using the <code class="language-plaintext highlighter-rouge">useListContext</code> hook. As a matter of fact, react-admin’s <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;Filter&gt;</code>, and <code class="language-plaintext highlighter-rouge">&lt;Pagination&gt;</code> components all use the <code class="language-plaintext highlighter-rouge">useListContext</code> hook. Here is what it returns:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span>
    <span class="c1">// fetched data</span>
    <span class="nx">data</span><span class="p">,</span> <span class="c1">// an id-based dictionary of the list data, e.g. { 123: { id: 123, title: 'hello world' }, 456: { ... } }</span>
    <span class="nx">ids</span><span class="p">,</span> <span class="c1">// an array listing the ids of the records in the list, e.g [123, 456, ...]</span>
    <span class="nx">total</span><span class="p">,</span> <span class="c1">// the total number of results for the current filters, excluding pagination. Useful to build the pagination controls. e.g. 23 </span>
    <span class="nx">loaded</span><span class="p">,</span> <span class="c1">// boolean that is false until the data is available</span>
    <span class="nx">loading</span><span class="p">,</span> <span class="c1">// boolean that is true on mount, and false once the data was fetched</span>
    <span class="c1">// pagination</span>
    <span class="nx">page</span><span class="p">,</span> <span class="c1">// the current page. Starts at 1</span>
    <span class="nx">setPage</span><span class="p">,</span> <span class="c1">// a callback to change the page, e.g. setPage(3)</span>
    <span class="nx">perPage</span><span class="p">,</span> <span class="c1">// the number of results per page. Defaults to 25</span>
    <span class="nx">setPerPage</span><span class="p">,</span> <span class="c1">// a callback to change the number of results per page, e.g. setPerPage(25)</span>
    <span class="c1">// sorting</span>
    <span class="nx">currentSort</span><span class="p">,</span> <span class="c1">// a sort object { field, order }, e.g. { field: 'date', order: 'DESC' } </span>
    <span class="nx">setSort</span><span class="p">,</span> <span class="c1">// a callback to change the sort, e.g. setSort('name', 'ASC')</span>
    <span class="c1">// filtering</span>
    <span class="nx">filterValues</span><span class="p">,</span> <span class="c1">// a dictionary of filter values, e.g. { title: 'lorem', nationality: 'fr' }</span>
    <span class="nx">setFilters</span><span class="p">,</span> <span class="c1">// a callback to update the filters, e.g. setFilters(filters, displayedFilters)</span>
    <span class="nx">displayedFilters</span><span class="p">,</span> <span class="c1">// a dictionary of the displayed filters, e.g. { title: true, nationality: true }</span>
    <span class="nx">showFilter</span><span class="p">,</span> <span class="c1">// a callback to show one of the filters, e.g. showFilter('title', defaultValue)</span>
    <span class="nx">hideFilter</span><span class="p">,</span> <span class="c1">// a callback to hide one of the filters, e.g. hidefilter('title')</span>
    <span class="c1">// row selection</span>
    <span class="nx">selectedIds</span><span class="p">,</span> <span class="c1">// an array listing the ids of the selcted rows, e.g. [123, 456]</span>
    <span class="nx">onSelect</span><span class="p">,</span> <span class="c1">// callback to change the list of selected rows, e.g onSelect([456, 789])</span>
    <span class="nx">onToggleItem</span><span class="p">,</span> <span class="c1">// callback to toggle the selection of a given record based on its id, e.g. onToggleItem(456)</span>
    <span class="nx">onUnselectItems</span><span class="p">,</span> <span class="c1">// callback to clear the selection, e.g. onUnselectItems();</span>
    <span class="c1">// misc</span>
    <span class="nx">basePath</span><span class="p">,</span> <span class="c1">// deduced from the location, useful for action buttons</span>
    <span class="nx">defaultTitle</span><span class="p">,</span> <span class="c1">// the translated title based on the resource, e.g. 'Posts'</span>
    <span class="nx">resource</span><span class="p">,</span> <span class="c1">// the resource name, deduced from the location. e.g. 'posts'</span>
<span class="p">}</span> <span class="o">=</span> <span class="nf">useListContext</span><span class="p">();</span>
</code></pre></div></div>

<h2 id="listbase"><code class="language-plaintext highlighter-rouge">ListBase</code></h2>

<p>In addition to fetching the list data, the <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> component renders the page title, the actions, the content and aside areas. You may want to display a record list in an entirely different layout, i.e. use only the data fetching part of <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> and not the view layout. In that case, you should use <code class="language-plaintext highlighter-rouge">&lt;ListBase&gt;</code>.</p>

<p><code class="language-plaintext highlighter-rouge">&lt;ListBase&gt;</code> fetches the data and puts it in a <code class="language-plaintext highlighter-rouge">ListContext</code>, then renders its child.</p>

<p>You can use <code class="language-plaintext highlighter-rouge">ListBase</code> to create your own custom List component, like this one:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> 
    <span class="nx">Datagrid</span><span class="p">,</span>
    <span class="nx">ListBase</span><span class="p">,</span>
    <span class="nx">ListToolbar</span><span class="p">,</span>
    <span class="nx">BulkActionsToolbar</span><span class="p">,</span>
    <span class="nx">Pagination</span><span class="p">,</span>
    <span class="nx">useListContext</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Card</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/Card</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">MyList</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">MyList</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">MyList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">ListBase</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">ListToolbar</span>
            <span class="na">filters</span><span class="p">=</span><span class="si">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">filters</span><span class="si">}</span>
            <span class="na">actions</span><span class="p">=</span><span class="si">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">actions</span><span class="si">}</span>
        <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">Card</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">BulkActionsToolbar</span><span class="p">&gt;</span>
                <span class="si">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">bulkActionButtons</span><span class="si">}</span>
            <span class="p">&lt;/</span><span class="nc">BulkActionsToolbar</span><span class="p">&gt;</span>
            <span class="si">{</span><span class="nf">cloneElement</span><span class="p">(</span><span class="nx">children</span><span class="p">,</span> <span class="p">{</span>
                <span class="na">hasBulkActions</span><span class="p">:</span> <span class="nx">props</span><span class="p">.</span><span class="nx">bulkActionButtons</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">,</span>
            <span class="p">})</span><span class="si">}</span>
            <span class="p">&lt;</span><span class="nc">Pagination</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Card</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">ListBase</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>This custom List component has no aside component - it’s up to you to add it in pure React.</p>

<p><strong>Tip</strong>: You don’t have to clone the child element. If you can’t reuse an existing list view component like <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;SimpleList&gt;</code>, feel free to write the form code inside your custom <code class="language-plaintext highlighter-rouge">MyList</code> component.</p>

<h2 id="uselistcontroller"><code class="language-plaintext highlighter-rouge">useListController</code></h2>

<p>As explained above, <code class="language-plaintext highlighter-rouge">&lt;ListBase&gt;</code> fetches the data and puts it in a <code class="language-plaintext highlighter-rouge">ListContext</code>, then renders its child. In fact, the <code class="language-plaintext highlighter-rouge">ListBase</code> code is super simple:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useListController</span><span class="p">,</span> <span class="nx">ListContextProvider</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ListBase</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">ListContextProvider</span> <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="nf">useListController</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="si">{</span><span class="nx">children</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nc">ListContextProvider</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">ListBase</span><span class="p">;</span>
</code></pre></div></div>

<p>As you can see, the controller part of the List view is handled by a hook called <code class="language-plaintext highlighter-rouge">useListController</code>. If you don’t want to use the <code class="language-plaintext highlighter-rouge">ListContext</code> in your custom List view, you can call <code class="language-plaintext highlighter-rouge">useListController</code> directly to access the list data. It returns the same object as the one documented in <a href="#uselistcontext"><code class="language-plaintext highlighter-rouge">useListContext</code></a> above.</p>

<p><strong>Tip</strong>: If your custom List view doesn’t use a <code class="language-plaintext highlighter-rouge">ListContextProvider</code>, you can’t use <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;SimpleList&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;Pagination&gt;</code>, etc. All these components rely on the <code class="language-plaintext highlighter-rouge">ListContext</code>.</p>

<h2 id="the-datagrid-component">The <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> component</h2>

<p><img src="./img/tutorial_post_list_less_columns.png" alt="The `&lt;Datagrid&gt;` component" /></p>

<p>The <code class="language-plaintext highlighter-rouge">Datagrid</code> component renders a list of records as a table. It is usually used as a descendant of the <a href="#the-list-component"><code class="language-plaintext highlighter-rouge">&lt;List&gt;</code></a> and <a href="./Fields.md#referencemanyfield"><code class="language-plaintext highlighter-rouge">&lt;ReferenceManyField&gt;</code></a> components. Outside of these components, it must be used inside a <code class="language-plaintext highlighter-rouge">ListContext</code>.</p>

<p>Here are all the props accepted by the component:</p>

<ul>
  <li><a href="#body-element"><code class="language-plaintext highlighter-rouge">body</code></a></li>
  <li><a href="#row-style-function"><code class="language-plaintext highlighter-rouge">rowStyle</code></a></li>
  <li><a href="#rowclick"><code class="language-plaintext highlighter-rouge">rowClick</code></a></li>
  <li><a href="#expand"><code class="language-plaintext highlighter-rouge">expand</code></a></li>
  <li><a href="#isrowselectable"><code class="language-plaintext highlighter-rouge">isRowSelectable</code></a></li>
</ul>

<p>It renders as many columns as it receives <code class="language-plaintext highlighter-rouge">&lt;Field&gt;</code> children. It uses the field <code class="language-plaintext highlighter-rouge">label</code> as column header (or, for fields with not <code class="language-plaintext highlighter-rouge">label</code>, the field <code class="language-plaintext highlighter-rouge">source</code>).</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">Datagrid</span><span class="p">,</span> <span class="nx">TextField</span><span class="p">,</span> <span class="nx">EditButton</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">EditButton</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> is an <strong>iterator</strong> component: it gets an array of ids and a data store from the <code class="language-plaintext highlighter-rouge">ListContext</code>, and iterates over the ids to display each record. Another example of iterator component is <a href="#the-singlefieldlist-component"><code class="language-plaintext highlighter-rouge">&lt;SingleFieldList&gt;</code></a>.</p>

<h3 id="body-element">Body element</h3>

<p>By default, <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> renders its body using <code class="language-plaintext highlighter-rouge">&lt;DatagridBody&gt;</code>, an internal react-admin component. You can pass a custom component as the <code class="language-plaintext highlighter-rouge">body</code> prop to override that default. And by the way, <code class="language-plaintext highlighter-rouge">&lt;DatagridBody&gt;</code> has a <code class="language-plaintext highlighter-rouge">row</code> prop set to <code class="language-plaintext highlighter-rouge">&lt;DatagridRow&gt;</code> by default for the same purpose. <code class="language-plaintext highlighter-rouge">&lt;DatagridRow&gt;</code> receives the row <code class="language-plaintext highlighter-rouge">record</code>, the <code class="language-plaintext highlighter-rouge">resource</code>, and a copy of the <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> children. That means you can create custom datagrid logic without copying several components from the react-admin source.</p>

<p>For instance, the <code class="language-plaintext highlighter-rouge">&lt;Datagrid isRowselectable&gt;</code> prop allows to hide the selection checkbox for some records. To show a <em>disabled</em> checkbox instead of hiding it, you can override <code class="language-plaintext highlighter-rouge">&lt;DatagridRow&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;DatagridBody&gt;</code> as follows:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/PostList.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Datagrid</span><span class="p">,</span> <span class="nx">DatagridBody</span><span class="p">,</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">TextField</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">TableCell</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/TableCell</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">TableRow</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/TableRow</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Checkbox</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/Checkbox</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">MyDatagridRow</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">record</span><span class="p">,</span> <span class="nx">resource</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">onToggleItem</span><span class="p">,</span> <span class="nx">children</span><span class="p">,</span> <span class="nx">selected</span><span class="p">,</span> <span class="nx">basePath</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">TableRow</span> <span class="na">key</span><span class="p">=</span><span class="si">{</span><span class="nx">id</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="si">{</span><span class="cm">/* first column: selection checkbox */</span><span class="si">}</span>
        <span class="p">&lt;</span><span class="nc">TableCell</span> <span class="na">padding</span><span class="p">=</span><span class="s">"none"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">Checkbox</span>
                <span class="na">disabled</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span><span class="p">.</span><span class="nx">selectable</span><span class="si">}</span>
                <span class="na">checked</span><span class="p">=</span><span class="si">{</span><span class="nx">selected</span><span class="si">}</span>
                <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">onToggleItem</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span><span class="si">}</span>
            <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">TableCell</span><span class="p">&gt;</span>
        <span class="si">{</span><span class="cm">/* data columns based on children */</span><span class="si">}</span>
        <span class="si">{</span><span class="nx">React</span><span class="p">.</span><span class="nx">Children</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">children</span><span class="p">,</span> <span class="nx">field</span> <span class="o">=&gt;</span> <span class="p">(</span>
            <span class="p">&lt;</span><span class="nc">TableCell</span> <span class="na">key</span><span class="p">=</span><span class="si">{</span><span class="s2">`</span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">-</span><span class="p">${</span><span class="nx">field</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">source</span><span class="p">}</span><span class="s2">`</span><span class="si">}</span><span class="p">&gt;</span>
                <span class="si">{</span><span class="nx">React</span><span class="p">.</span><span class="nf">cloneElement</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="p">{</span>
                    <span class="nx">record</span><span class="p">,</span>
                    <span class="nx">basePath</span><span class="p">,</span>
                    <span class="nx">resource</span><span class="p">,</span>
                <span class="p">})</span><span class="si">}</span>
            <span class="p">&lt;/</span><span class="nc">TableCell</span><span class="p">&gt;</span>
        <span class="p">))</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nc">TableRow</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">MyDatagridBody</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">&lt;</span><span class="nc">DatagridBody</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">row</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">MyDatagridRow</span> <span class="p">/&gt;</span><span class="si">}</span> <span class="p">/&gt;;</span>
<span class="kd">const</span> <span class="nx">MyDatagrid</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">&lt;</span><span class="nc">Datagrid</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">body</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">MyDatagridBody</span> <span class="p">/&gt;</span><span class="si">}</span> <span class="p">/&gt;;</span>

<span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">MyDatagrid</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">MyDatagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">)</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">PostList</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="row-style-function">Row Style Function</h3>

<p>You can customize the <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> row style (applied to the <code class="language-plaintext highlighter-rouge">&lt;tr&gt;</code> element) based on the record, thanks to the <code class="language-plaintext highlighter-rouge">rowStyle</code> prop, which expects a function. React-admin calls this function for each row, passing the current record and index as arguments. The function should return a style object, which react-admin uses as a <code class="language-plaintext highlighter-rouge">&lt;tr style&gt;</code> prop.</p>

<p>For instance, this allows to apply a custom background to the entire row if one value of the record - like its number of views - passes a certain threshold.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">postRowStyle</span> <span class="o">=</span> <span class="p">(</span><span class="nx">record</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="nx">record</span><span class="p">.</span><span class="nx">nb_views</span> <span class="o">&gt;=</span> <span class="mi">500</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">#efe</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">white</span><span class="dl">'</span><span class="p">,</span>
<span class="p">});</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span> <span class="na">rowStyle</span><span class="p">=</span><span class="si">{</span><span class="nx">postRowStyle</span><span class="si">}</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="rowclick"><code class="language-plaintext highlighter-rouge">rowClick</code></h3>

<p>You can catch clicks on rows to redirect to the show or edit view by setting the <code class="language-plaintext highlighter-rouge">rowClick</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span> <span class="na">rowClick</span><span class="p">=</span><span class="s">"edit"</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">rowClick</code> accepts the following values:</p>

<ul>
  <li>“edit” to redirect to the edition vue</li>
  <li>“show” to redirect to the show vue</li>
  <li>“expand” to open the <code class="language-plaintext highlighter-rouge">expand</code> panel</li>
  <li>“toggleSelection” to trigger the <code class="language-plaintext highlighter-rouge">onToggleItem</code> function</li>
  <li>a function <code class="language-plaintext highlighter-rouge">(id, basePath, record) =&gt; path</code> to redirect to a custom path</li>
</ul>

<p><strong>Tip</strong>: If you pass a function, it can return <code class="language-plaintext highlighter-rouge">edit</code>, <code class="language-plaintext highlighter-rouge">show</code> or a router path. This allows to redirect to either <code class="language-plaintext highlighter-rouge">edit</code> or <code class="language-plaintext highlighter-rouge">show</code> after checking a condition on the record. For example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">postRowClick</span> <span class="o">=</span> <span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">basePath</span><span class="p">,</span> <span class="nx">record</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">record</span><span class="p">.</span><span class="nx">editable</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">edit</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">show</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>Tip</strong>: If you pass a function, it can also return a promise allowing you to check an external API before returning a path. For example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">fetchUserRights</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./fetchUserRights</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">postRowClick</span> <span class="o">=</span> <span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">basePath</span><span class="p">,</span> <span class="nx">record</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nf">fetchUserRights</span><span class="p">().</span><span class="nf">then</span><span class="p">(({</span> <span class="nx">canEdit</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">canEdit</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">edit</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">show</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="expand"><code class="language-plaintext highlighter-rouge">expand</code></h3>

<p><img src="./img/datagrid_expand.gif" alt="expandable panel" /></p>

<p>To show more data from the resource without adding too many columns, you can show data in an expandable panel below the row on demand, using the <code class="language-plaintext highlighter-rouge">expand</code> prop. For instance, this code shows the <code class="language-plaintext highlighter-rouge">body</code> of a post in an expandable panel:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">PostPanel</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">record</span><span class="p">,</span> <span class="nx">resource</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">dangerouslySetInnerHTML</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">__html</span><span class="p">:</span> <span class="nx">record</span><span class="p">.</span><span class="nx">body</span> <span class="p">}</span><span class="si">}</span> <span class="p">/&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span> <span class="na">expand</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostPanel</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">DateField</span> <span class="na">source</span><span class="p">=</span><span class="s">"published_at"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">BooleanField</span> <span class="na">source</span><span class="p">=</span><span class="s">"commentable"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">EditButton</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">)</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">expand</code> prop expects a component as value. When the user chooses to expand the row, the Datagrid renders the component and passes the current <code class="language-plaintext highlighter-rouge">record</code>, <code class="language-plaintext highlighter-rouge">id</code>, and <code class="language-plaintext highlighter-rouge">resource</code>.</p>

<p><strong>Tip</strong>: Since the <code class="language-plaintext highlighter-rouge">expand</code> element receives the same props as a detail view, you can actually use a <code class="language-plaintext highlighter-rouge">&lt;Show&gt;</code> view as component for the <code class="language-plaintext highlighter-rouge">expand</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">PostShow</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Show</span>
        <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span>
        <span class="cm">/* disable the app title change when shown */</span>
        <span class="na">title</span><span class="p">=</span><span class="s">" "</span>
    <span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleShowLayout</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">RichTextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">SimpleShowLayout</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Show</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span> <span class="na">expand</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostShow</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">DateField</span> <span class="na">source</span><span class="p">=</span><span class="s">"published_at"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">BooleanField</span> <span class="na">source</span><span class="p">=</span><span class="s">"commentable"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">EditButton</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">)</span>
</code></pre></div></div>

<p>The result will be the same as in the previous snippet, except that <code class="language-plaintext highlighter-rouge">&lt;Show&gt;</code> encloses the content inside a material-ui <code class="language-plaintext highlighter-rouge">&lt;Card&gt;</code>.</p>

<p><strong>Tip</strong>: You can go one step further and use an <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> view as <code class="language-plaintext highlighter-rouge">expand</code> component:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span>
        <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span>
        <span class="cm">/* disable the app title change when shown */</span>
        <span class="na">title</span><span class="p">=</span><span class="s">" "</span>
    <span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">RichTextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span> <span class="na">expand</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostEdit</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">DateField</span> <span class="na">source</span><span class="p">=</span><span class="s">"published_at"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">BooleanField</span> <span class="na">source</span><span class="p">=</span><span class="s">"commentable"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">EditButton</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">)</span>
</code></pre></div></div>

<h3 id="isrowselectable"><code class="language-plaintext highlighter-rouge">isRowSelectable</code></h3>

<p>You can customize which rows will show a selection checkbox using the <code class="language-plaintext highlighter-rouge">isRowSelectable</code> prop. It expects a function that will receive the record of each <code class="language-plaintext highlighter-rouge">&lt;DatagridRow&gt;</code> and returns a boolean expression.  For instance, this code shows a checkbox only for rows with an id greater than 300:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span> <span class="na">isRowSelectable</span><span class="p">=</span><span class="si">{</span> <span class="nx">record</span> <span class="o">=&gt;</span> <span class="nx">record</span><span class="p">.</span><span class="nx">id</span> <span class="o">&gt;</span> <span class="mi">300</span> <span class="si">}</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="css-api-1">CSS API</h3>

<p>The <code class="language-plaintext highlighter-rouge">Datagrid</code> component accepts the usual <code class="language-plaintext highlighter-rouge">className</code> prop but you can override many class names injected to the inner components by React-admin thanks to the <code class="language-plaintext highlighter-rouge">classes</code> property (as most Material UI components, see their <a href="https://material-ui.com/customization/components/#overriding-styles-with-classes">documentation about it</a>). This property accepts the following keys:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">table</code>: alternative to using <code class="language-plaintext highlighter-rouge">className</code>. Applied to the root element.</li>
  <li><code class="language-plaintext highlighter-rouge">tbody</code>: applied to the tbody</li>
  <li><code class="language-plaintext highlighter-rouge">headerCell</code>: applied to each header cell</li>
  <li><code class="language-plaintext highlighter-rouge">row</code>: applied to each row</li>
  <li><code class="language-plaintext highlighter-rouge">rowEven</code>: applied to each even row</li>
  <li><code class="language-plaintext highlighter-rouge">rowOdd</code>: applied to each odd row</li>
  <li><code class="language-plaintext highlighter-rouge">rowCell</code>: applied to each row cell</li>
</ul>

<p>Here is an example of how you can override some of these classes:</p>

<p>You can customize the <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> styles by passing a <code class="language-plaintext highlighter-rouge">classes</code> object as prop, through <code class="language-plaintext highlighter-rouge">useStyles()</code>. Here is an example:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">makeStyles</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">useStyles</span> <span class="o">=</span> <span class="nf">makeStyles</span><span class="p">({</span>
    <span class="na">row</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#ccc</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">classes</span> <span class="o">=</span> <span class="nf">useStyles</span><span class="p">();</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">Datagrid</span> <span class="na">classes</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">row</span><span class="p">:</span> <span class="nx">classes</span><span class="p">.</span><span class="nx">row</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
                ...
            <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">PostList</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>Tip</strong>: If you want to override the <code class="language-plaintext highlighter-rouge">header</code> and <code class="language-plaintext highlighter-rouge">cell</code> styles independently for each column, use the <code class="language-plaintext highlighter-rouge">headerClassName</code> and <code class="language-plaintext highlighter-rouge">cellClassName</code> props in <code class="language-plaintext highlighter-rouge">&lt;Field&gt;</code> components. For instance, to hide a certain column on small screens:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">makeStyles</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">useStyles</span> <span class="o">=</span> <span class="nf">makeStyles</span><span class="p">(</span><span class="nx">theme</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="na">hiddenOnSmallScreens</span><span class="p">:</span> <span class="p">{</span>
        <span class="p">[</span><span class="nx">theme</span><span class="p">.</span><span class="nx">breakpoints</span><span class="p">.</span><span class="nf">down</span><span class="p">(</span><span class="dl">'</span><span class="s1">md</span><span class="dl">'</span><span class="p">)]:</span> <span class="p">{</span>
            <span class="na">display</span><span class="p">:</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}));</span>

<span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">classes</span> <span class="o">=</span> <span class="nf">useStyles</span><span class="p">();</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nc">TextField</span>
                    <span class="na">source</span><span class="p">=</span><span class="s">"views"</span>
                    <span class="na">headerClassName</span><span class="p">=</span><span class="si">{</span><span class="nx">classes</span><span class="p">.</span><span class="nx">hiddenOnSmallScreens</span><span class="si">}</span>
                    <span class="na">cellClassName</span><span class="p">=</span><span class="si">{</span><span class="nx">classes</span><span class="p">.</span><span class="nx">hiddenOnSmallScreens</span><span class="si">}</span>
                <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">PostList</span><span class="p">;</span>
</code></pre></div></div>

<p>This feature has a limit, though. <code class="language-plaintext highlighter-rouge">Datagrid</code> inspects its children for <code class="language-plaintext highlighter-rouge">headerClassName</code> and <code class="language-plaintext highlighter-rouge">cellClassName</code> props. This means you can’t use these props in a <em>wrapped</em> component:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">useStyles</span> <span class="o">=</span> <span class="nf">makeStyles</span><span class="p">({</span>
    <span class="na">priceCell</span><span class="p">:</span> <span class="p">{</span> <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">blue</span><span class="dl">'</span> <span class="p">},</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">PriceField</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">classes</span> <span class="o">=</span> <span class="nf">useStyles</span><span class="p">();</span>
    <span class="k">return</span> <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">cellClassName</span><span class="p">=</span><span class="si">{</span><span class="nx">classes</span><span class="p">.</span><span class="nx">priceCell</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">/&gt;;</span>
<span class="p">};</span>

<span class="c1">// the cell class name won't be applied here because Datagrid doesn't see it in its children</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">ProductList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">PriceField</span> <span class="na">source</span><span class="p">=</span><span class="s">"price"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>For this kind of use case, you need to use a <a href="#body-element">custom datagrid body component</a>.</p>

<h3 id="performance">Performance</h3>

<p>When displaying large pages of data, you might experience some performance issues.
This is mostly due to the fact that we iterate over the <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> children and clone them.</p>

<p>In such cases, you can opt-in for an optimized version of the <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> by setting its <code class="language-plaintext highlighter-rouge">optimized</code> prop to <code class="language-plaintext highlighter-rouge">true</code>. 
Be aware that you can’t have dynamic children, such as those displayed or hidden by checking permissions, when using this mode.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span> <span class="na">optimized</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"views"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nf">withStyles</span><span class="p">(</span><span class="nx">styles</span><span class="p">)(</span><span class="nx">PostList</span><span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: You can use the <code class="language-plaintext highlighter-rouge">Datagrid</code> component with <a href="./Actions.md#usequery-hook">custom queries</a>:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">keyBy</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">lodash/keyBy</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useQuery</span><span class="p">,</span> <span class="nx">Datagrid</span><span class="p">,</span> <span class="nx">TextField</span><span class="p">,</span> <span class="nx">Pagination</span><span class="p">,</span> <span class="nx">Loading</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">CustomList</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">page</span><span class="p">,</span> <span class="nx">setPage</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">perPage</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">total</span><span class="p">,</span> <span class="nx">loading</span><span class="p">,</span> <span class="nx">error</span> <span class="p">}</span> <span class="o">=</span> <span class="nf">useQuery</span><span class="p">({</span>
        <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET_LIST</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">resource</span><span class="p">:</span> <span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">payload</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">pagination</span><span class="p">:</span> <span class="p">{</span> <span class="nx">page</span><span class="p">,</span> <span class="nx">perPage</span> <span class="p">},</span>
            <span class="na">sort</span><span class="p">:</span> <span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ASC</span><span class="dl">'</span> <span class="p">},</span>
            <span class="na">filter</span><span class="p">:</span> <span class="p">{},</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="k">if </span><span class="p">(</span><span class="nx">loading</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Loading</span> <span class="p">/&gt;</span>
    <span class="p">}</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>ERROR: <span class="si">{</span><span class="nx">error</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">}</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;&gt;</span>
            <span class="p">&lt;</span><span class="nc">Datagrid</span>
                <span class="na">data</span><span class="p">=</span><span class="si">{</span><span class="nf">keyBy</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">)</span><span class="si">}</span>
                <span class="na">ids</span><span class="p">=</span><span class="si">{</span><span class="nx">data</span><span class="p">.</span><span class="nf">map</span><span class="p">(({</span> <span class="nx">id</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">id</span><span class="p">)</span><span class="si">}</span>
                <span class="na">currentSort</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ASC</span><span class="dl">'</span> <span class="p">}</span><span class="si">}</span>
                <span class="na">basePath</span><span class="p">=</span><span class="s">"/posts"</span> <span class="c1">// required only if you set use "rowClick"</span>
                <span class="na">rowClick</span><span class="p">=</span><span class="s">"edit"</span>
            <span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"name"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">Pagination</span>
                <span class="na">page</span><span class="p">=</span><span class="si">{</span><span class="nx">page</span><span class="si">}</span>
                <span class="na">perPage</span><span class="p">=</span><span class="si">{</span><span class="nx">perPage</span><span class="si">}</span>
                <span class="na">setPage</span><span class="p">=</span><span class="si">{</span><span class="nx">setPage</span><span class="si">}</span>
                <span class="na">total</span><span class="p">=</span><span class="si">{</span><span class="nx">total</span><span class="si">}</span>
            <span class="p">/&gt;</span>
        <span class="p">&lt;/&gt;</span>
    <span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="the-simplelist-component">The <code class="language-plaintext highlighter-rouge">&lt;SimpleList&gt;</code> component</h2>

<p><a href="./img/simple-list.gif"><img src="./img/simple-list.gif" style="height:300px" alt="The `&lt;SimpleList&gt;` component" /></a></p>

<p>For mobile devices, a <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> is often unusable - there is simply not enough space to display several columns. The convention in that case is to use a simple list, with only one column per row. The <code class="language-plaintext highlighter-rouge">&lt;SimpleList&gt;</code> component serves that purpose, leveraging <a href="https://material-ui.com/components/lists/">material-ui’s <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;ListItem&gt;</code> components</a>. <code class="language-plaintext highlighter-rouge">&lt;SimpleList&gt;</code> is an <strong>iterator</strong> component: it gets an array of ids and a data store from the <code class="language-plaintext highlighter-rouge">ListContext</code>, and iterates over the ids to display each record.</p>

<h3 id="properties">Properties</h3>

<table>
  <thead>
    <tr>
      <th>Prop</th>
      <th>Required</th>
      <th>Type</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">primaryText</code></td>
      <td>Required</td>
      <td><code class="language-plaintext highlighter-rouge">Function</code></td>
      <td>-</td>
      <td>Passed as <code class="language-plaintext highlighter-rouge">&lt;ListItemText primary&gt;</code> prop</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">secondaryText</code></td>
      <td>Optional</td>
      <td><code class="language-plaintext highlighter-rouge">Function</code></td>
      <td>-</td>
      <td>Passed as <code class="language-plaintext highlighter-rouge">&lt;ListItemText secondary&gt;</code> prop</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tertiaryText</code></td>
      <td>Optional</td>
      <td><code class="language-plaintext highlighter-rouge">Function</code></td>
      <td>-</td>
      <td>Passed as a complement to <code class="language-plaintext highlighter-rouge">&lt;ListItemText primary&gt;</code> with a custom style</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">linkType</code></td>
      <td>Optional</td>
      <td><code class="language-plaintext highlighter-rouge">string</code> | <code class="language-plaintext highlighter-rouge">Function</code> | <code class="language-plaintext highlighter-rouge">false</code></td>
      <td><code class="language-plaintext highlighter-rouge">edit</code></td>
      <td>Target of the <code class="language-plaintext highlighter-rouge">&lt;ListItem&gt;</code> link. Set to <code class="language-plaintext highlighter-rouge">false</code> to disable the link. Set to a function <code class="language-plaintext highlighter-rouge">(record, id) =&gt; string</code> to have the link target vary per record.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">leftAvatar</code></td>
      <td>Optional</td>
      <td><code class="language-plaintext highlighter-rouge">Function</code></td>
      <td>-</td>
      <td>When present, the <code class="language-plaintext highlighter-rouge">&lt;ListItem&gt;</code> renders a <code class="language-plaintext highlighter-rouge">&lt;ListItemAvatar&gt;</code> before the <code class="language-plaintext highlighter-rouge">&lt;ListItemText&gt;</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">leftIcon</code></td>
      <td>Optional</td>
      <td><code class="language-plaintext highlighter-rouge">Function</code></td>
      <td>-</td>
      <td>When present, the <code class="language-plaintext highlighter-rouge">&lt;ListItem&gt;</code> renders a <code class="language-plaintext highlighter-rouge">&lt;ListIcon&gt;</code> before the <code class="language-plaintext highlighter-rouge">&lt;ListItemText&gt;</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rightAvatar</code></td>
      <td>Optional</td>
      <td><code class="language-plaintext highlighter-rouge">Function</code></td>
      <td>-</td>
      <td>When present, the <code class="language-plaintext highlighter-rouge">&lt;ListItem&gt;</code> renders a <code class="language-plaintext highlighter-rouge">&lt;ListItemAvatar&gt;</code> after the <code class="language-plaintext highlighter-rouge">&lt;ListItemText&gt;</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rightIcon</code></td>
      <td>Optional</td>
      <td><code class="language-plaintext highlighter-rouge">Function</code></td>
      <td>-</td>
      <td>When present, the <code class="language-plaintext highlighter-rouge">&lt;ListItem&gt;</code> renders a <code class="language-plaintext highlighter-rouge">&lt;ListIcon&gt;</code> after the <code class="language-plaintext highlighter-rouge">&lt;ListItemText&gt;</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">className</code></td>
      <td>Optional</td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>Applied to the root element</td>
    </tr>
  </tbody>
</table>

<h3 id="usage">Usage</h3>

<p>You can use <code class="language-plaintext highlighter-rouge">&lt;SimpleList&gt;</code> as <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;ReferenceManyField&gt;</code> child:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">SimpleList</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleList</span>
            <span class="na">primaryText</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="nx">record</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span>
            <span class="na">secondaryText</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="s2">`</span><span class="p">${</span><span class="nx">record</span><span class="p">.</span><span class="nx">views</span><span class="p">}</span><span class="s2"> views`</span><span class="si">}</span>
            <span class="na">tertiaryText</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">(</span><span class="nx">record</span><span class="p">.</span><span class="nx">published_at</span><span class="p">).</span><span class="nf">toLocaleDateString</span><span class="p">()</span><span class="si">}</span>
            <span class="na">linkType</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="nx">record</span><span class="p">.</span><span class="nx">canEdit</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">edit</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">show</span><span class="dl">"</span><span class="si">}</span>
        <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>For each record, <code class="language-plaintext highlighter-rouge">&lt;SimpleList&gt;</code> executes the <code class="language-plaintext highlighter-rouge">primaryText</code>, <code class="language-plaintext highlighter-rouge">secondaryText</code>, <code class="language-plaintext highlighter-rouge">linkType</code>, <code class="language-plaintext highlighter-rouge">leftAvatar</code>, <code class="language-plaintext highlighter-rouge">leftIcon</code>, <code class="language-plaintext highlighter-rouge">rightAvatar</code>, and <code class="language-plaintext highlighter-rouge">rightIcon</code> props functions, and creates a <code class="language-plaintext highlighter-rouge">&lt;ListItem&gt;</code> with the result.</p>

<p><strong>Tip</strong>: To use a <code class="language-plaintext highlighter-rouge">&lt;SimpleList&gt;</code> on small screens and a <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> on larger screens, use material-ui’s <code class="language-plaintext highlighter-rouge">useMediaQuery</code> hook:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useMediaQuery</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">SimpleList</span><span class="p">,</span> <span class="nx">Datagrid</span><span class="p">,</span> <span class="nx">TextField</span><span class="p">,</span> <span class="nx">ReferenceField</span><span class="p">,</span> <span class="nx">EditButton</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">isSmall</span> <span class="o">=</span> <span class="nf">useMediaQuery</span><span class="p">(</span><span class="nx">theme</span> <span class="o">=&gt;</span> <span class="nx">theme</span><span class="p">.</span><span class="nx">breakpoints</span><span class="p">.</span><span class="nf">down</span><span class="p">(</span><span class="dl">'</span><span class="s1">sm</span><span class="dl">'</span><span class="p">));</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="si">{</span><span class="nx">isSmall</span> <span class="p">?</span> <span class="p">(</span>
                <span class="p">&lt;</span><span class="nc">SimpleList</span>
                    <span class="na">primaryText</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="nx">record</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span>
                    <span class="na">secondaryText</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="s2">`</span><span class="p">${</span><span class="nx">record</span><span class="p">.</span><span class="nx">views</span><span class="p">}</span><span class="s2"> views`</span><span class="si">}</span>
                    <span class="na">tertiaryText</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">(</span><span class="nx">record</span><span class="p">.</span><span class="nx">published_at</span><span class="p">).</span><span class="nf">toLocaleDateString</span><span class="p">()</span><span class="si">}</span>
                    <span class="na">linkType</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="nx">record</span><span class="p">.</span><span class="nx">canEdit</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">edit</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">show</span><span class="dl">"</span><span class="si">}</span>   
                <span class="p">/&gt;</span>
            <span class="p">)</span> <span class="p">:</span> <span class="p">(</span>
                <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
                    //...
                <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
            <span class="p">)</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Tip</strong>: The <code class="language-plaintext highlighter-rouge">&lt;SimpleList&gt;</code> items link to the edition page by default. You can also set the <code class="language-plaintext highlighter-rouge">linkType</code> prop to <code class="language-plaintext highlighter-rouge">show</code> directly to link to the <code class="language-plaintext highlighter-rouge">&lt;Show&gt;</code> page instead.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/posts.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">SimpleList</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleList</span>
            <span class="na">primaryText</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="nx">record</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span>
            <span class="na">secondaryText</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="s2">`</span><span class="p">${</span><span class="nx">record</span><span class="p">.</span><span class="nx">views</span><span class="p">}</span><span class="s2"> views`</span><span class="si">}</span>
            <span class="na">tertiaryText</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">(</span><span class="nx">record</span><span class="p">.</span><span class="nx">published_at</span><span class="p">).</span><span class="nf">toLocaleDateString</span><span class="p">()</span><span class="si">}</span>
            <span class="na">linkType</span><span class="p">=</span><span class="s">"show"</span>
        <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>Setting the <code class="language-plaintext highlighter-rouge">linkType</code> prop to <code class="language-plaintext highlighter-rouge">false</code> (boolean, not string) removes the link in all list items.</p>

<h2 id="the-singlefieldlist-component">The <code class="language-plaintext highlighter-rouge">&lt;SingleFieldList&gt;</code> component</h2>

<p>When you want to display only one property of a list of records, instead of using a <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code>, use the <code class="language-plaintext highlighter-rouge">&lt;SingleFieldList&gt;</code>. It expects a single <code class="language-plaintext highlighter-rouge">&lt;Field&gt;</code> as child. <code class="language-plaintext highlighter-rouge">&lt;SingleFieldList&gt;</code> is an <strong>iterator</strong> component: it gets an array of ids and a data store from the <code class="language-plaintext highlighter-rouge">ListContext</code>, and iterates over the ids to display each record.</p>

<p>It’s especially useful for <code class="language-plaintext highlighter-rouge">&lt;ReferenceManyField&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;ReferenceArrayField&gt;</code> components:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Display all the tags for the current post</span>
<span class="p">&lt;</span><span class="nc">ReferenceArrayField</span>
    <span class="na">label</span><span class="p">=</span><span class="s">"Tags"</span>
    <span class="na">reference</span><span class="p">=</span><span class="s">"tags"</span>
    <span class="na">source</span><span class="p">=</span><span class="s">"tags"</span>
<span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nc">SingleFieldList</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">ChipField</span> <span class="na">source</span><span class="p">=</span><span class="s">"name"</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">SingleFieldList</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nc">ReferenceArrayField</span><span class="p">&gt;</span>
</code></pre></div></div>

<p><img src="./img/reference-many-field-single-field-list.png" alt="ReferenceManyFieldSingleFieldList" /></p>

<p><strong>Tip</strong>: The <code class="language-plaintext highlighter-rouge">&lt;SingleFieldList&gt;</code> items link to the edition page by default. You can set the <code class="language-plaintext highlighter-rouge">linkType</code> prop to <code class="language-plaintext highlighter-rouge">show</code> to link to the <code class="language-plaintext highlighter-rouge">&lt;Show&gt;</code> page instead.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Display all the tags for the current post</span>
<span class="p">&lt;</span><span class="nc">ReferenceArrayField</span>
    <span class="na">label</span><span class="p">=</span><span class="s">"Tags"</span>
    <span class="na">reference</span><span class="p">=</span><span class="s">"tags"</span>
    <span class="na">source</span><span class="p">=</span><span class="s">"tags"</span>
<span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nc">SingleFieldList</span> <span class="na">linkType</span><span class="p">=</span><span class="s">"show"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">ChipField</span> <span class="na">source</span><span class="p">=</span><span class="s">"name"</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">SingleFieldList</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nc">ReferenceArrayField</span><span class="p">&gt;</span>
</code></pre></div></div>

<h2 id="using-a-custom-iterator">Using a Custom Iterator</h2>

<p>A <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> can delegate to any iterator component - <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code> is just one example. An iterator component can get the data to display from <a href="#uselistcontext">the <code class="language-plaintext highlighter-rouge">useListContext</code> hook</a>. The data comes in two constants:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ids</code> is an array of the ids currently displayed in the list</li>
  <li><code class="language-plaintext highlighter-rouge">data</code> is an object of all the fetched data for this resource, indexed by id.</li>
</ul>

<p>For instance, what if you prefer to show a list of cards rather than a datagrid?</p>

<p><img src="./img/custom-iterator.png" alt="Custom iterator" /></p>

<p>You’ll need to create your own iterator component as follows:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/comments.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useListContext</span><span class="p">,</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">TextField</span><span class="p">,</span> <span class="nx">DateField</span><span class="p">,</span> <span class="nx">ReferenceField</span><span class="p">,</span> <span class="nx">EditButton</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Card</span><span class="p">,</span> <span class="nx">CardActions</span><span class="p">,</span> <span class="nx">CardContent</span><span class="p">,</span> <span class="nx">CardHeader</span><span class="p">,</span> <span class="nx">Avatar</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">PersonIcon</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/icons/Person</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">cardStyle</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">width</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
    <span class="na">minHeight</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
    <span class="na">margin</span><span class="p">:</span> <span class="dl">'</span><span class="s1">0.5em</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">display</span><span class="p">:</span> <span class="dl">'</span><span class="s1">inline-block</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">verticalAlign</span><span class="p">:</span> <span class="dl">'</span><span class="s1">top</span><span class="dl">'</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">CommentGrid</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">ids</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">basePath</span> <span class="p">}</span> <span class="o">=</span> <span class="nf">useListContext</span><span class="p">();</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">margin</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1em</span><span class="dl">'</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="si">{</span><span class="nx">ids</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">id</span> <span class="o">=&gt;</span>
            <span class="p">&lt;</span><span class="nc">Card</span> <span class="na">key</span><span class="p">=</span><span class="si">{</span><span class="nx">id</span><span class="si">}</span> <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="nx">cardStyle</span><span class="si">}</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">CardHeader</span>
                    <span class="na">title</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">record</span><span class="p">=</span><span class="si">{</span><span class="nx">data</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span><span class="si">}</span> <span class="na">source</span><span class="p">=</span><span class="s">"author.name"</span> <span class="p">/&gt;</span><span class="si">}</span>
                    <span class="na">subheader</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">DateField</span> <span class="na">record</span><span class="p">=</span><span class="si">{</span><span class="nx">data</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span><span class="si">}</span> <span class="na">source</span><span class="p">=</span><span class="s">"created_at"</span> <span class="p">/&gt;</span><span class="si">}</span>
                    <span class="na">avatar</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">Avatar</span> <span class="na">icon</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PersonIcon</span> <span class="p">/&gt;</span><span class="si">}</span> <span class="p">/&gt;</span><span class="si">}</span>
                <span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nc">CardContent</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">record</span><span class="p">=</span><span class="si">{</span><span class="nx">data</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span><span class="si">}</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
                <span class="p">&lt;/</span><span class="nc">CardContent</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">CardContent</span><span class="p">&gt;</span>
                    about<span class="ni">&amp;nbsp;</span>
                    <span class="p">&lt;</span><span class="nc">ReferenceField</span> <span class="na">label</span><span class="p">=</span><span class="s">"Post"</span> <span class="na">resource</span><span class="p">=</span><span class="s">"comments"</span> <span class="na">record</span><span class="p">=</span><span class="si">{</span><span class="nx">data</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span><span class="si">}</span> <span class="na">source</span><span class="p">=</span><span class="s">"post_id"</span> <span class="na">reference</span><span class="p">=</span><span class="s">"posts"</span> <span class="na">basePath</span><span class="p">=</span><span class="si">{</span><span class="nx">basePath</span><span class="si">}</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
                    <span class="p">&lt;/</span><span class="nc">ReferenceField</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nc">CardContent</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">CardActions</span> <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">textAlign</span><span class="p">:</span> <span class="dl">'</span><span class="s1">right</span><span class="dl">'</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nc">EditButton</span> <span class="na">resource</span><span class="p">=</span><span class="s">"posts"</span> <span class="na">basePath</span><span class="p">=</span><span class="si">{</span><span class="nx">basePath</span><span class="si">}</span> <span class="na">record</span><span class="p">=</span><span class="si">{</span><span class="nx">data</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span><span class="si">}</span> <span class="p">/&gt;</span>
                <span class="p">&lt;/</span><span class="nc">CardActions</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nc">Card</span><span class="p">&gt;</span>
        <span class="p">)</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">CommentList</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="na">title</span><span class="p">=</span><span class="s">"All comments"</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">CommentGrid</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>As you can see, nothing prevents you from using <code class="language-plaintext highlighter-rouge">&lt;Field&gt;</code> components inside your own components… provided you inject the current <code class="language-plaintext highlighter-rouge">record</code>. Also, notice that components building links require the <code class="language-plaintext highlighter-rouge">basePath</code> component, which is also available from <code class="language-plaintext highlighter-rouge">useListContext</code>.</p>

<h2 id="third-party-components">Third-Party Components</h2>

<p>You can find components for react-admin in third-party repositories.</p>

<ul>
  <li><a href="https://marmelab.com/ra-enterprise/modules/ra-editable-datagrid">ra-editable-datagrid</a> <img class="icon" src="./img/premium.svg" />: a <a href="https://marmelab.com/ra-enterprise">ra-enterprise</a> component which offers an “edit-in-place” experience in a <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code>.</li>
  <li><a href="https://marmelab.com/ra-enterprise/modules/ra-tree">ra-tree</a> <img class="icon" src="./img/premium.svg" />: tree hooks and components from the <a href="https://marmelab.com/ra-enterprise">ra-enterprise</a> package. This module is agnostic as to how you store the tree structure in the backend side.</li>
  <li><a href="https://github.com/fizix-io/ra-customizable-datagrid">ra-customizable-datagrid</a>: plugin that allows to hide / show columns dynamically.</li>
</ul>

<h2 id="displaying-fields-depending-on-the-user-permissions">Displaying Fields Depending On The User Permissions</h2>

<p>You might want to display some fields or filters only to users with specific permissions.</p>

<p>Before rendering the <code class="language-plaintext highlighter-rouge">List</code>, react-admin calls the <code class="language-plaintext highlighter-rouge">authProvider.getPermissions()</code> method, and passes the result to the component as the <code class="language-plaintext highlighter-rouge">permissions</code> prop. It’s up to your <code class="language-plaintext highlighter-rouge">authProvider</code> to return whatever you need to check roles and permissions inside your component.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">UserFilter</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">permissions</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="o">=&gt;</span>
    <span class="p">&lt;</span><span class="nc">Filter</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">TextInput</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"user.list.search"</span>
            <span class="na">source</span><span class="p">=</span><span class="s">"q"</span>
            <span class="na">alwaysOn</span>
        <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"name"</span> <span class="p">/&gt;</span>
        <span class="si">{</span><span class="nx">permissions</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">admin</span><span class="dl">'</span> <span class="p">?</span> <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"role"</span> <span class="p">/&gt;</span> <span class="p">:</span> <span class="kc">null</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nc">Filter</span><span class="p">&gt;;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">UserList</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">permissions</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">isSmall</span> <span class="o">=</span> <span class="nf">useMediaQuery</span><span class="p">(</span><span class="nx">theme</span> <span class="o">=&gt;</span> <span class="nx">theme</span><span class="p">.</span><span class="nx">breakpoints</span><span class="p">.</span><span class="nf">down</span><span class="p">(</span><span class="dl">'</span><span class="s1">sm</span><span class="dl">'</span><span class="p">));</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">List</span>
            <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span>
            <span class="na">filters</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">UserFilter</span> <span class="na">permissions</span><span class="p">=</span><span class="si">{</span><span class="nx">permissions</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">/&gt;</span><span class="si">}</span>
            <span class="na">sort</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">field</span><span class="p">:</span> <span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ASC</span><span class="dl">'</span> <span class="p">}</span><span class="si">}</span>
        <span class="p">&gt;</span>
            <span class="si">{</span><span class="nx">isSmall</span> <span class="p">?</span> <span class="p">(</span>
                <span class="p">&lt;</span><span class="nc">SimpleList</span>
                    <span class="na">primaryText</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="nx">record</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span>
                    <span class="na">secondaryText</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span> <span class="o">=&gt;</span>
                        <span class="nx">permissions</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">admin</span><span class="dl">'</span> <span class="p">?</span> <span class="nx">record</span><span class="p">.</span><span class="nx">role</span> <span class="p">:</span> <span class="kc">null</span><span class="si">}</span>
                <span class="p">/&gt;</span>
            <span class="p">):</span> <span class="p">(</span>
                <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="p">/&gt;</span>
                    <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"name"</span> <span class="p">/&gt;</span>
                    <span class="si">{</span><span class="nx">permissions</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">admin</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"role"</span> <span class="p">/&gt;</span><span class="si">}</span>
                    <span class="si">{</span><span class="nx">permissions</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">admin</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nc">EditButton</span> <span class="p">/&gt;</span><span class="si">}</span>
                    <span class="p">&lt;</span><span class="nc">ShowButton</span> <span class="p">/&gt;</span>
                <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
            <span class="p">)</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
    <span class="p">)</span>
<span class="p">};</span>
</code></pre></div></div>

<p><strong>Tip</strong>: Note how the <code class="language-plaintext highlighter-rouge">permissions</code> prop is passed down to the custom <code class="language-plaintext highlighter-rouge">filters</code> component.</p>

                </div>
                <div class="col hide-on-small-only m3 xl3 offset-xl1">
                    <div class="toc-wrapper">
                        <div style="height: 1px;">
                            <ul class="section table-of-contents pushpin">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="/js/materialize.min.js"></script>
    <script src="/js/prism.js"></script>
    <script>
        function slugify(text) {
            return text.toString().toLowerCase()
                .replace(/\s+/g, '-')           // Replace spaces with -
                .replace(/[^\w\-]+/g, '')       // Remove all non-word chars
                .replace(/\-\-+/g, '-')         // Replace multiple - with single -
                .replace(/^-+/, '')             // Trim - from start of text
                .replace(/-+$/, '');            // Trim - from end of text
        }
        document.addEventListener('DOMContentLoaded', function () {
            /* Generate table of contents */
            document.querySelectorAll('.markdown-section h2').forEach(element => {
                element.classList.add('scrollspy');
                var a = document.createElement('a');
                a.href = "#" + slugify(element.innerText);
                a.innerText = element.innerText;
                var li = document.createElement('li');
                li.appendChild(a);
                document.querySelector('.table-of-contents').appendChild(li)
            })
            M.Sidenav.init(document.querySelectorAll('.sidenav'));
            M.Pushpin.init(document.querySelector('.pushpin'), { offset: 75, top: 75 });
            M.ScrollSpy.init(document.querySelectorAll('.scrollspy'));
            M.Dropdown.init(document.querySelectorAll('.dropdown-trigger'));
        });
    </script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script type="text/javascript">
        docsearch({
            apiKey: '32f254b1de6a25a96665d1229b6eb8f7',
            indexName: 'marmelab-react-admin',
            inputSelector: '#query',
            debug: false, // Set debug to true if you want to inspect the dropdown 
            autocompleteOptions: {
                appendTo: '#search',
                hint: false,
            }
        }); 
    </script>
</body>

</html>
