<!DOCTYPE HTML>
<html lang="en-US">

<head>
    <title>React-admin - The Create and Edit Views</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="">
    <meta name="HandheldFriendly" content="true" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="/css/materialize.min.css">
    <link rel="stylesheet" href="/css/style-v6.css">
    <link rel="stylesheet" href="/css/syntax.css">
    <link rel="stylesheet" href="/css/prism.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <!-- You won't find analytics tags in this page. React-admin protects your privacy! -->
</head>

<body>

    <header>
        <nav>
            <a href="#" data-target="slide-out" class="sidenav-trigger"><i class="material-icons">menu</i></a>
            <div class="nav-wrapper" style="background: linear-gradient(145deg,#027be3 11%,#1a237e 75%)">
                <div class="left">
                    <form action="#" onsubmit="return false;">
                        <div class="input-field" style="position:absolute">
                            <input type="search" name="q" id="query" size="31" maxlength="255" value=""
                                style="vertical-align:inherit!important" />
                            <label class="label-icon" for="test"><i class="material-icons">search</i></label>
                            <i class="material-icons">close</i>
                        </div>
                        <span id="search"></span>
                    </form>
                </div>
                <ul id="nav-mobile" class="right hide-on-med-and-down">
                    <li class="active"><a href="https://marmelab.com/react-admin/Readme.html">Documentation</a></li>
                    <li><a href="https://marmelab.com/react-admin-demo">Demo</a></li>
                    <li><a href="https://marmelab.com/en/blog/#react-admin">Blog</a></li>
                    <li><a href="https://github.com/marmelab/react-admin">GitHub</a></li>
                </ul>
            </div>
        </nav>
        <ul id="slide-out" class="sidenav sidenav-fixed">
            <li class="logo">
                <a href="http://localhost:4000"><img src="http://localhost:4000/assets/logo_white.png" /></a>
            </li>
            <li class="version">
                
            </li>
            <li ><a href="./Readme.html">Read Me</a></li>
<li ><a href="./Tutorial.html">Tutorial</a>
</li>
<li ><a href="./DataProviders.html">Data
                Providers</a></li>
<li ><a
                href="./Admin.html"><code>&lt;Admin&gt;</code></a>
</li>
<li ><a href="./Resource.html">
                <code>&lt;Resource&gt;</code>
        </a></li>
<li ><a href="./List.html"><code>&lt;List&gt;</code>
                View</a></li>
<li  class="active" ><a
                href="./CreateEdit.html"><code>&lt;Create&gt;</code>
                and <code>&lt;Edit&gt;</code> Views</a>
</li>
<li ><a href="./Show.html"><code>&lt;Show&gt;</code>
    View</a></li>
<li ><a
    href="./Fields.html"><code>&lt;Field&gt;</code>
    Components</a></li>
<li ><a
                href="./Inputs.html"><code>&lt;Input&gt;</code>
                Components</a></li>
<li ><a
                href="./Authentication.html">Authentication</a></li>
<li ><a
                href="./Authorization.html">Authorization</a></li>
<li ><a href="./Actions.html">Querying the
                API</a></li>
<li ><a href="./Theming.html">Theming</a></li>
<li ><a href="./Translation.html">Translation</a>
</li>
<li ><a href="./Caching.html">Caching</a>
</li>
<li ><a href="./CustomApp.html">Including in
                Another App</a>
</li>
<li ><a href="./Reference.html">Reference</a>
</li>
<li ><a href="./Ecosystem.html">Ecosystem</a>
</li>
<li ><a href="./UnitTesting.html">Unit
    Testing</a></li>
<li ><a
        href="./AdvancedTutorials.html">Advanced
        tutorials</a></li>
<li ><a href="./FAQ.html">FAQ</a></li>

        </ul>

    </header>

    <main>
        <div class="container">
            <div class="row">
                <div class="col s12 m8 offset-m1 xl7 offset-xl1 markdown-section DocSearch-content">
                    <h1 id="the-create-and-edit-views">The Create and Edit Views</h1>

<p><code class="language-plaintext highlighter-rouge">&lt;Resource&gt;</code> maps URLs to components - it takes care or <em>routing</em>. When you set a component as the <code class="language-plaintext highlighter-rouge">create</code> prop for a Resource, react-admin renders that component when users go to the <code class="language-plaintext highlighter-rouge">/[resource]/create</code> URL. When you set a component as the <code class="language-plaintext highlighter-rouge">edit</code> prop for a resource, react-admin renders that component when users go to the <code class="language-plaintext highlighter-rouge">/[resource]/:id</code> URL.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;Resource name="posts" create={PostCreate} edit={PostEdit} /&gt;
                               ----------        --------
                                    |               |
    displayed when browsing to /posts/create        |
                                                    |
                    displayed when browsing to /posts/123
</code></pre></div></div>

<p>You can pass any component you want as <code class="language-plaintext highlighter-rouge">create</code> of <code class="language-plaintext highlighter-rouge">edit</code> props of a <code class="language-plaintext highlighter-rouge">&lt;Resource&gt;</code>. But you’ll probably want to fetch a record based on the URL, and display a form to edit that record. That’s what the <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> components do. So in most cases, the component passed as <code class="language-plaintext highlighter-rouge">create</code> view uses the react-admin <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> component, and the component passed as <code class="language-plaintext highlighter-rouge">edit</code> view uses the react-admin <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> component. Here is an example:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/App.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Admin</span><span class="p">,</span> <span class="nx">Resource</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">jsonServerProvider</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ra-data-json-server</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">PostCreate</span><span class="p">,</span> <span class="nx">PostEdit</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./posts</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Admin</span> <span class="na">dataProvider</span><span class="p">=</span><span class="si">{</span><span class="nf">jsonServerProvider</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://jsonplaceholder.typicode.com</span><span class="dl">'</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Resource</span> <span class="na">name</span><span class="p">=</span><span class="s">"posts"</span> <span class="na">create</span><span class="p">=</span><span class="si">{</span><span class="nx">PostCreate</span><span class="si">}</span> <span class="na">edit</span><span class="p">=</span><span class="si">{</span><span class="nx">PostEdit</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Admin</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>

<span class="c1">// in src/posts.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Create</span><span class="p">,</span> <span class="nx">Edit</span><span class="p">,</span> <span class="nx">SimpleForm</span><span class="p">,</span> <span class="nx">TextInput</span><span class="p">,</span> <span class="nx">DateInput</span><span class="p">,</span> <span class="nx">ReferenceManyField</span><span class="p">,</span> <span class="nx">Datagrid</span><span class="p">,</span> <span class="nx">TextField</span><span class="p">,</span> <span class="nx">DateField</span><span class="p">,</span> <span class="nx">EditButton</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">RichTextInput</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ra-input-rich-text</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostCreate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Create</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"teaser"</span> <span class="na">options</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">multiLine</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">RichTextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">DateInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Publication date"</span> <span class="na">source</span><span class="p">=</span><span class="s">"published_at"</span> <span class="na">defaultValue</span><span class="p">=</span><span class="si">{</span><span class="k">new</span> <span class="nc">Date</span><span class="p">()</span><span class="si">}</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Create</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">disabled</span> <span class="na">label</span><span class="p">=</span><span class="s">"Id"</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nf">required</span><span class="p">()</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">multiline</span> <span class="na">source</span><span class="p">=</span><span class="s">"teaser"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nf">required</span><span class="p">()</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">RichTextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nf">required</span><span class="p">()</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">DateInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Publication date"</span> <span class="na">source</span><span class="p">=</span><span class="s">"published_at"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">ReferenceManyField</span> <span class="na">label</span><span class="p">=</span><span class="s">"Comments"</span> <span class="na">reference</span><span class="p">=</span><span class="s">"comments"</span> <span class="na">target</span><span class="p">=</span><span class="s">"post_id"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
                    <span class="p">&lt;</span><span class="nc">DateField</span> <span class="na">source</span><span class="p">=</span><span class="s">"created_at"</span> <span class="p">/&gt;</span>
                    <span class="p">&lt;</span><span class="nc">EditButton</span> <span class="p">/&gt;</span>
                <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nc">ReferenceManyField</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>That’s enough to display the post edit form:</p>

<p><img src="./img/post-edition.png" alt="post edition form" /></p>

<p><strong>Tip</strong>: You might find it cumbersome to repeat the same input components for both the <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> and the <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> view. In practice, these two views almost never have exactly the same form inputs. For instance, in the previous snippet, the <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> views show related comments to the current post, which makes no sense for a new post. Having two separate sets of input components for the two views is, therefore, a deliberate choice. However, if you have the same set of input components, export them as a custom Form component to avoid repetition.</p>

<p>React-admin injects a few props to the <code class="language-plaintext highlighter-rouge">create</code> and <code class="language-plaintext highlighter-rouge">edit</code> views: the <code class="language-plaintext highlighter-rouge">resource</code> name, the <code class="language-plaintext highlighter-rouge">basePath</code> (the root URL), the <code class="language-plaintext highlighter-rouge">permissions</code>, and, in the case of the <code class="language-plaintext highlighter-rouge">edit</code> view, the record <code class="language-plaintext highlighter-rouge">id</code>. That’s why you need to pass the <code class="language-plaintext highlighter-rouge">props</code> to the <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> components.</p>

<h2 id="the-create-and-edit-components">The <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> components</h2>

<p>The <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> components call the <code class="language-plaintext highlighter-rouge">dataProvider</code>, prepare the form submit handler, and render the page title and actions. They are not responsible for rendering the actual form - that’s the job of their child component (usually <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code>). This form component uses its children (<a href="./Inputs.md"><code class="language-plaintext highlighter-rouge">&lt;Input&gt;</code></a> components) to render each form input.</p>

<p><img src="./img/create-view.png" alt="post creation form" /></p>

<p>The <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> component clones its child, and passes it an empty object <code class="language-plaintext highlighter-rouge">{}</code>) as <code class="language-plaintext highlighter-rouge">record</code> prop. It also passes a callback as <code class="language-plaintext highlighter-rouge">save</code> prop, which calls <code class="language-plaintext highlighter-rouge">dataProvider.create()</code>.</p>

<p><img src="./img/edit-view.png" alt="post edition form" /></p>

<p>The <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> component calls <code class="language-plaintext highlighter-rouge">dataProvider.getOne()</code>, using the id from the URL. It also clones its child, and passes it the fetched record as <code class="language-plaintext highlighter-rouge">record</code> prop. It also passes a callback as <code class="language-plaintext highlighter-rouge">save</code> prop, which calls <code class="language-plaintext highlighter-rouge">dataProvider.update()</code>.</p>

<p>You can customize the <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> components using the following props:</p>

<ul>
  <li><a href="#page-title"><code class="language-plaintext highlighter-rouge">title</code></a></li>
  <li><a href="#actions"><code class="language-plaintext highlighter-rouge">actions</code></a></li>
  <li><a href="#aside-component"><code class="language-plaintext highlighter-rouge">aside</code></a></li>
  <li><a href="#component"><code class="language-plaintext highlighter-rouge">component</code></a></li>
  <li><a href="#undoable"><code class="language-plaintext highlighter-rouge">undoable</code></a> (<code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> only)</li>
  <li><a href="#onsuccess"><code class="language-plaintext highlighter-rouge">onSuccess</code></a></li>
  <li><a href="#onfailure"><code class="language-plaintext highlighter-rouge">onFailure</code></a></li>
  <li><a href="#transform"><code class="language-plaintext highlighter-rouge">transform</code></a></li>
  <li><a href="#success-message"><code class="language-plaintext highlighter-rouge">successMessage</code></a> (deprecated - use <code class="language-plaintext highlighter-rouge">onSuccess</code> instead)</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> also accepts a <code class="language-plaintext highlighter-rouge">record</code> prop, to initialize the form based on a value object.</p>

<h3 id="page-title">Page Title</h3>

<p>By default, the title for the <code class="language-plaintext highlighter-rouge">Create</code> view is “Create [resource_name]”, and the title for the <code class="language-plaintext highlighter-rouge">Edit</code> view is “Edit [resource_name] #[record_id]”.</p>

<p>You can customize this title by specifying a custom <code class="language-plaintext highlighter-rouge">title</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="na">title</span><span class="p">=</span><span class="s">"Post edition"</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>More interestingly, you can pass an element as <code class="language-plaintext highlighter-rouge">title</code>. React-admin clones this element and, in the <code class="language-plaintext highlighter-rouge">&lt;EditView&gt;</code>, injects the current <code class="language-plaintext highlighter-rouge">record</code>. This allows to customize the title according to the current record:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">PostTitle</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">record</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Post <span class="si">{</span><span class="nx">record</span> <span class="p">?</span> <span class="s2">`"</span><span class="p">${</span><span class="nx">record</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="s2">"`</span> <span class="p">:</span> <span class="dl">''</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;;</span>
<span class="p">};</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="na">title</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostTitle</span> <span class="p">/&gt;</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="actions">Actions</h3>

<p>You can replace the list of default actions by your own element using the <code class="language-plaintext highlighter-rouge">actions</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Button</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/Button</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">TopToolbar</span><span class="p">,</span> <span class="nx">ShowButton</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostEditActions</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">basePath</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">resource</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">TopToolbar</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">ShowButton</span> <span class="na">basePath</span><span class="p">=</span><span class="si">{</span><span class="nx">basePath</span><span class="si">}</span> <span class="na">record</span><span class="p">=</span><span class="si">{</span><span class="nx">data</span><span class="si">}</span> <span class="p">/&gt;</span>
        <span class="si">{</span><span class="cm">/* Add your custom actions */</span><span class="si">}</span>
        <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">color</span><span class="p">=</span><span class="s">"primary"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">customAction</span><span class="si">}</span><span class="p">&gt;</span>Custom Action<span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">TopToolbar</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="na">actions</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostEditActions</span> <span class="p">/&gt;</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>A common customization is to add a button to go back to the List. Use the <code class="language-plaintext highlighter-rouge">&lt;ListButton&gt;</code> for that:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">TopToolbar</span><span class="p">,</span> <span class="nx">ListButton</span><span class="p">,</span> <span class="nx">ShowButton</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostEditActions</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">basePath</span><span class="p">,</span> <span class="nx">data</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">TopToolbar</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">ListButton</span> <span class="na">basePath</span><span class="p">=</span><span class="si">{</span><span class="nx">basePath</span><span class="si">}</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">ShowButton</span> <span class="na">basePath</span><span class="p">=</span><span class="si">{</span><span class="nx">basePath</span><span class="si">}</span> <span class="na">record</span><span class="p">=</span><span class="si">{</span><span class="nx">data</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">TopToolbar</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>If you want this button to look like a Back button, you can pass a custom label and icon to the ListButton:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">ChevronLeft</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/icons/ChevronLeft</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostEditActions</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">basePath</span><span class="p">,</span> <span class="nx">data</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">TopToolbar</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">ListButton</span> <span class="na">basePath</span><span class="p">=</span><span class="si">{</span><span class="nx">basePath</span><span class="si">}</span> <span class="na">label</span><span class="p">=</span><span class="s">"Back"</span> <span class="na">icon</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">ChevronLeft</span> <span class="p">/&gt;</span><span class="si">}</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">ShowButton</span> <span class="na">basePath</span><span class="p">=</span><span class="si">{</span><span class="nx">basePath</span><span class="si">}</span> <span class="na">record</span><span class="p">=</span><span class="si">{</span><span class="nx">data</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">TopToolbar</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="aside-component">Aside component</h3>

<p>You may want to display additional information on the side of the form. Use the <code class="language-plaintext highlighter-rouge">aside</code> prop for that, passing the component of your choice:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Aside</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">width</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="na">margin</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1em</span><span class="dl">'</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Typography</span> <span class="na">variant</span><span class="p">=</span><span class="s">"h6"</span><span class="p">&gt;</span>Post details<span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Typography</span> <span class="na">variant</span><span class="p">=</span><span class="s">"body2"</span><span class="p">&gt;</span>
            Posts will only be published once an editor approves them
        <span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="na">aside</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">Aside</span> <span class="p">/&gt;</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
       // ...
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">aside</code> component receives the same props as the <code class="language-plaintext highlighter-rouge">Edit</code> or <code class="language-plaintext highlighter-rouge">Create</code> child component: <code class="language-plaintext highlighter-rouge">basePath</code>, <code class="language-plaintext highlighter-rouge">record</code>, <code class="language-plaintext highlighter-rouge">resource</code>, and <code class="language-plaintext highlighter-rouge">version</code>. That means you can display non-editable details of the current record in the aside component:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Aside</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">record</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">width</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="na">margin</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1em</span><span class="dl">'</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Typography</span> <span class="na">variant</span><span class="p">=</span><span class="s">"h6"</span><span class="p">&gt;</span>Post details<span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>
        <span class="si">{</span><span class="nx">record</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
            <span class="p">&lt;</span><span class="nc">Typography</span> <span class="na">variant</span><span class="p">=</span><span class="s">"body2"</span><span class="p">&gt;</span>
                Creation date: <span class="si">{</span><span class="nx">record</span><span class="p">.</span><span class="nx">createdAt</span><span class="si">}</span>
            <span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>
        <span class="p">)</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: Always test the <code class="language-plaintext highlighter-rouge">record</code> is defined before using it, as react-admin starts rendering the UI before the API call is over.</p>

<h3 id="component">Component</h3>

<p>By default, the <code class="language-plaintext highlighter-rouge">Create</code> and <code class="language-plaintext highlighter-rouge">Edit</code> views render the main form inside a material-ui <code class="language-plaintext highlighter-rouge">&lt;Card&gt;</code> element. The actual layout of the form depends on the <code class="language-plaintext highlighter-rouge">Form</code> component you’re using (<code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code>, or a custom form component).</p>

<p>Some form layouts also use <code class="language-plaintext highlighter-rouge">Card</code>, in which case the user ends up seeing a card inside a card, which is bad UI. To avoid that, you can override the main form container by passing a <code class="language-plaintext highlighter-rouge">component</code> prop :</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// use a div as root component</span>
<span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="na">component</span><span class="p">=</span><span class="s">"div"</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="c1">// use a custom component as root component </span>
<span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="na">component</span><span class="p">=</span><span class="si">{</span><span class="nx">MyComponent</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        ...
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>The default value for the <code class="language-plaintext highlighter-rouge">component</code> prop is <code class="language-plaintext highlighter-rouge">Card</code>.</p>

<h3 id="undoable">Undoable</h3>

<p>By default, the Save and Delete actions are undoable, i.e. react-admin only sends the related request to the data provider after a short delay, during which the user can cancel the action. This is part of the “optimistic rendering” strategy of react-admin ; it makes the user interactions more reactive.</p>

<p>You can disable this behavior by setting <code class="language-plaintext highlighter-rouge">undoable={false}</code>. With that setting, clicking on the Delete button displays a confirmation dialog. Both the <code class="language-plaintext highlighter-rouge">Save</code> and <code class="language-plaintext highlighter-rouge">Delete</code> actions become blocking and delay the refresh of the screen until the data provider responds.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="na">undoable</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        // ...
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: If you want a confirmation dialog for the Delete button but don’t mind undoable Edits, then pass a <a href="#toolbar">custom toolbar</a> to the form, as follows:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
    <span class="nx">Toolbar</span><span class="p">,</span>
    <span class="nx">SaveButton</span><span class="p">,</span>
    <span class="nx">DeleteButton</span><span class="p">,</span>
    <span class="nx">Edit</span><span class="p">,</span>
    <span class="nx">SimpleForm</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">makeStyles</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/styles</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">useStyles</span> <span class="o">=</span> <span class="nf">makeStyles</span><span class="p">({</span>
    <span class="na">toolbar</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">display</span><span class="p">:</span> <span class="dl">'</span><span class="s1">flex</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">justifyContent</span><span class="p">:</span> <span class="dl">'</span><span class="s1">space-between</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">CustomToolbar</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Toolbar</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">classes</span><span class="p">=</span><span class="si">{</span><span class="nf">useStyles</span><span class="p">()</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SaveButton</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">DeleteButton</span> <span class="na">undoable</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Toolbar</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">toolbar</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">CustomToolbar</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="onsuccess"><code class="language-plaintext highlighter-rouge">onSuccess</code></h3>

<p>By default, when the save action succeeds, react-admin shows a notification, and redirects to another page. You can override this behavior and pass custom side effects by providing a function as <code class="language-plaintext highlighter-rouge">onSuccess</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useNotify</span><span class="p">,</span> <span class="nx">useRefresh</span><span class="p">,</span> <span class="nx">useRedirect</span><span class="p">,</span> <span class="nx">Edit</span><span class="p">,</span> <span class="nx">SimpleForm</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">notify</span> <span class="o">=</span> <span class="nf">useNotify</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">refresh</span> <span class="o">=</span> <span class="nf">useRefresh</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">redirect</span> <span class="o">=</span> <span class="nf">useRedirect</span><span class="p">();</span>

    <span class="kd">const</span> <span class="nx">onSuccess</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">data</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">notify</span><span class="p">(</span><span class="s2">`Changes to post "</span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="s2">" saved`</span><span class="p">)</span>
        <span class="nf">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">/posts</span><span class="dl">'</span><span class="p">);</span>
        <span class="nf">refresh</span><span class="p">();</span>
    <span class="p">};</span>

    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">Edit</span> <span class="na">onSuccess</span><span class="p">=</span><span class="si">{</span><span class="nx">onSuccess</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
                ...
            <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">onSuccess</code> function receives the response from the dataProvider call (<code class="language-plaintext highlighter-rouge">dataProvider.create()</code> or <code class="language-plaintext highlighter-rouge">dataProvider.update()</code>), which is the created/edited record (see <a href="./DataProviders.md#response-format">the dataProvider documentation for details</a>)</p>

<p>The default <code class="language-plaintext highlighter-rouge">onSuccess</code> function is:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// for the &lt;Create&gt; component:</span>
<span class="p">({</span> <span class="nx">data</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">notify</span><span class="p">(</span><span class="dl">'</span><span class="s1">ra.notification.created</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">info</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">smart_count</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="nx">undoable</span><span class="p">);</span>
    <span class="nf">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">edit</span><span class="dl">'</span><span class="p">,</span> <span class="nx">basePath</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// for the &lt;Edit&gt; component: </span>
<span class="p">({</span> <span class="nx">data</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">notify</span><span class="p">(</span><span class="dl">'</span><span class="s1">ra.notification.updated</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">info</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">smart_count</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="nx">undoable</span><span class="p">);</span>
    <span class="nf">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">list</span><span class="dl">'</span><span class="p">,</span> <span class="nx">basePath</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To learn more about built-in side effect hooks like <code class="language-plaintext highlighter-rouge">useNotify</code>, <code class="language-plaintext highlighter-rouge">useRedirect</code> and <code class="language-plaintext highlighter-rouge">useRefresh</code>, check the <a href="./Actions.md#handling-side-effects-in-usedataprovider">Querying the API documentation</a>.</p>

<p><strong>Tip</strong>: When you set the <code class="language-plaintext highlighter-rouge">onSuccess</code> prop, the <code class="language-plaintext highlighter-rouge">successMessage</code> prop is ignored.</p>

<p><strong>Tip</strong>: If you want to have different success side effects based on the button clicked by the user (e.g. if the creation form displays two submit buttons, one to “save and redirect to the list”, and another to “save and display an empty form”), you can set the <code class="language-plaintext highlighter-rouge">onSuccess</code> prop on the <code class="language-plaintext highlighter-rouge">&lt;SaveButton&gt;</code> component, too.</p>

<h3 id="onfailure"><code class="language-plaintext highlighter-rouge">onFailure</code></h3>

<p>By default, when the save action fails at the dataProvider level, react-admin shows an error notification. On an Edit page with <code class="language-plaintext highlighter-rouge">undoable</code> set to <code class="language-plaintext highlighter-rouge">true</code>, it refreshes the page, too.</p>

<p>You can override this behavior and pass custom side effects by providing a function as <code class="language-plaintext highlighter-rouge">onFailure</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useNotify</span><span class="p">,</span> <span class="nx">useRefresh</span><span class="p">,</span> <span class="nx">useRedirect</span><span class="p">,</span> <span class="nx">Edit</span><span class="p">,</span> <span class="nx">SimpleForm</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">notify</span> <span class="o">=</span> <span class="nf">useNotify</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">refresh</span> <span class="o">=</span> <span class="nf">useRefresh</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">redirect</span> <span class="o">=</span> <span class="nf">useRedirect</span><span class="p">();</span>

    <span class="kd">const</span> <span class="nx">onFailure</span> <span class="o">=</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">notify</span><span class="p">(</span><span class="s2">`Could not edit post: </span><span class="p">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
        <span class="nf">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">/posts</span><span class="dl">'</span><span class="p">);</span>
        <span class="nf">refresh</span><span class="p">();</span>
    <span class="p">};</span>

    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">Edit</span> <span class="na">onFailure</span><span class="p">=</span><span class="si">{</span><span class="nx">onFailure</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
                ...
            <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">onFailure</code> function receives the error from the dataProvider call (<code class="language-plaintext highlighter-rouge">dataProvider.create()</code> or <code class="language-plaintext highlighter-rouge">dataProvider.update()</code>), which is a JavaScript Error object (see <a href="./DataProviders.md#error-format">the dataProvider documentation for details</a>).</p>

<p>The default <code class="language-plaintext highlighter-rouge">onOnFailure</code> function is:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// for the &lt;Create&gt; component:</span>
<span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">notify</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">error</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span> <span class="p">?</span> <span class="nx">error</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">ra.notification.http_error</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">warning</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// for the &lt;Edit&gt; component: </span>
<span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">notify</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">error</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span> <span class="p">?</span> <span class="nx">error</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">ra.notification.http_error</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">warning</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">undoable</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">refresh</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Tip</strong>: If you want to have different failure side effects based on the button clicked by the user, you can set the <code class="language-plaintext highlighter-rouge">onFailure</code> prop on the <code class="language-plaintext highlighter-rouge">&lt;SaveButton&gt;</code> component, too.</p>

<h3 id="transform"><code class="language-plaintext highlighter-rouge">transform</code></h3>

<p>To transform a record after the user has submitted the form but before the record is passed to the <code class="language-plaintext highlighter-rouge">dataProvider</code>, use the <code class="language-plaintext highlighter-rouge">transform</code> prop. It expects a function taking a record as argument, and returning a modified record. For instance, to add a computed field upon creation:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">UserCreate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">transform</span> <span class="o">=</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">({</span>
        <span class="p">...</span><span class="nx">data</span><span class="p">,</span>
        <span class="na">fullName</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span>
    <span class="p">});</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">Create</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">transform</span><span class="p">=</span><span class="si">{</span><span class="nx">transform</span><span class="si">}</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">Create</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">transform</code> function can also return a <code class="language-plaintext highlighter-rouge">Promise</code>, which allows you to do all sorts of asynchronous calls (e.g. to the <code class="language-plaintext highlighter-rouge">dataProvider</code>) during the transformation.</p>

<p><strong>Tip</strong>: If you want to have different transformations based on the button clicked by the user (e.g. if the creation form displays two submit buttons, one to “save”, and another to “save and notify other admins”), you can set the <code class="language-plaintext highlighter-rouge">transform</code> prop on the <code class="language-plaintext highlighter-rouge">&lt;SaveButton&gt;</code> component, too. See <a href="#altering-the-form-values-before-submitting">Altering the Form Values Before Submitting</a> for an example.</p>

<h3 id="success-message">Success message</h3>

<p><strong>Deprecated</strong>: use the <code class="language-plaintext highlighter-rouge">onSuccess</code> prop instead. See <a href="#changing-the-success-or-failure-notification-message">Changing The Success or Failure Notification Message</a> for the new syntax.</p>

<p>Once the <code class="language-plaintext highlighter-rouge">dataProvider</code> returns successfully after save, users see a generic notification (“Element created” / “Element updated”). You can customize this message by passing a <code class="language-plaintext highlighter-rouge">successMessage</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="na">successMessage</span><span class="p">=</span><span class="s">"messages.post_saved"</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        // ...
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: The message will be translated.</p>

<h2 id="prefilling-a-create-record">Prefilling a <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> Record</h2>

<p>You may need to prepopulate a record based on another one. For that use case, use the <code class="language-plaintext highlighter-rouge">&lt;CloneButton&gt;</code> component. It expects a <code class="language-plaintext highlighter-rouge">record</code> and a <code class="language-plaintext highlighter-rouge">basePath</code> (usually injected to children of <code class="language-plaintext highlighter-rouge">&lt;Datagrid&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;SimpleShowLayout&gt;</code>, etc.), so it’s as simple to use as a regular field or input.</p>

<p>For instance, to allow cloning all the posts from the list:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">List</span><span class="p">,</span> <span class="nx">Datagrid</span><span class="p">,</span> <span class="nx">TextField</span><span class="p">,</span> <span class="nx">CloneButton</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">CloneButton</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>Alternately, you may need to prepopulate a record based on a <em>related</em> record. For instance, in a <code class="language-plaintext highlighter-rouge">PostList</code> component, you may want to display a button to create a comment related to the current post. Clicking on that button would lead to a <code class="language-plaintext highlighter-rouge">CommentCreate</code> page where the <code class="language-plaintext highlighter-rouge">post_id</code> is preset to the id of the Post.</p>

<p><strong>Note</strong>  <code class="language-plaintext highlighter-rouge">&lt;CloneButton&gt;</code> is designed to be used in an edit view <code class="language-plaintext highlighter-rouge">&lt;Actions&gt;</code> component, not inside a <code class="language-plaintext highlighter-rouge">&lt;Toolbar&gt;</code>. The <code class="language-plaintext highlighter-rouge">Toolbar</code> is basically for submitting the form, not for going to another resource.</p>

<p>By default, the <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> view starts with an empty <code class="language-plaintext highlighter-rouge">record</code>. However, if the <code class="language-plaintext highlighter-rouge">location</code> object (injected by <a href="https://reacttraining.com/react-router/web/api/location">react-router-dom</a>) contains a <code class="language-plaintext highlighter-rouge">record</code> in its <code class="language-plaintext highlighter-rouge">state</code>, the <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> view uses that <code class="language-plaintext highlighter-rouge">record</code> instead of the empty object. That’s how the <code class="language-plaintext highlighter-rouge">&lt;CloneButton&gt;</code> works behind the hood.</p>

<p>That means that if you want to create a link to a creation form, presetting <em>some</em> values, all you have to do is to set the location <code class="language-plaintext highlighter-rouge">state</code>. <code class="language-plaintext highlighter-rouge">react-router-dom</code> provides the <code class="language-plaintext highlighter-rouge">&lt;Link&gt;</code> component for that:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Datagrid</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Button</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/Button</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Link</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-router-dom</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">CreateRelatedCommentButton</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">record</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Button</span>
        <span class="na">component</span><span class="p">=</span><span class="si">{</span><span class="nx">Link</span><span class="si">}</span>
        <span class="na">to</span><span class="p">=</span><span class="si">{</span><span class="p">{</span>
            <span class="na">pathname</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/comments/create</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">state</span><span class="p">:</span> <span class="p">{</span> <span class="na">record</span><span class="p">:</span> <span class="p">{</span> <span class="na">post_id</span><span class="p">:</span> <span class="nx">record</span><span class="p">.</span><span class="nx">id</span> <span class="p">}</span> <span class="p">},</span>
        <span class="p">}</span><span class="si">}</span>
    <span class="p">&gt;</span>
        Write a comment for that post
    <span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">PostList</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">List</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
            ...
            <span class="p">&lt;</span><span class="nc">CreateRelatedCommentButton</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">List</span><span class="p">&gt;</span>
<span class="p">)</span>
</code></pre></div></div>

<p><strong>Tip</strong>: To style the button with the main color from the material-ui theme, use the <code class="language-plaintext highlighter-rouge">Link</code> component from the <code class="language-plaintext highlighter-rouge">react-admin</code> package rather than the one from <code class="language-plaintext highlighter-rouge">react-router-dom</code>.</p>

<p><strong>Tip</strong>: The <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> component also watches the “source” parameter of <code class="language-plaintext highlighter-rouge">location.search</code> (the query string in the URL) in addition to <code class="language-plaintext highlighter-rouge">location.state</code> (a cross-page message hidden in the router memory). So the <code class="language-plaintext highlighter-rouge">CreateRelatedCommentButton</code> could also be written as:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Button</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/Button</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Link</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-router-dom</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">CreateRelatedCommentButton</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">record</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Button</span>
        <span class="na">component</span><span class="p">=</span><span class="si">{</span><span class="nx">Link</span><span class="si">}</span>
        <span class="na">to</span><span class="p">=</span><span class="si">{</span><span class="p">{</span>
            <span class="na">pathname</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/comments/create</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">search</span><span class="p">:</span> <span class="s2">`?source=</span><span class="p">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">({</span> <span class="na">post_id</span><span class="p">:</span> <span class="nx">record</span><span class="p">.</span><span class="nx">id</span> <span class="p">})}</span><span class="s2">`</span><span class="p">,</span>
        <span class="p">}</span><span class="si">}</span>
    <span class="p">&gt;</span>
        Write a comment for that post
    <span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="the-editguesser-component">The <code class="language-plaintext highlighter-rouge">&lt;EditGuesser&gt;</code> component</h2>

<p>Instead of a custom <code class="language-plaintext highlighter-rouge">Edit</code>, you can use the <code class="language-plaintext highlighter-rouge">EditGuesser</code> to determine which inputs to use based on the data returned by the API.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/App.js</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Admin</span><span class="p">,</span> <span class="nx">Resource</span><span class="p">,</span> <span class="nx">EditGuesser</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">jsonServerProvider</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ra-data-json-server</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Admin</span> <span class="na">dataProvider</span><span class="p">=</span><span class="si">{</span><span class="nf">jsonServerProvider</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://jsonplaceholder.typicode.com</span><span class="dl">'</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Resource</span> <span class="na">name</span><span class="p">=</span><span class="s">"posts"</span> <span class="na">edit</span><span class="p">=</span><span class="si">{</span><span class="nx">EditGuesser</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Admin</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>Just like <code class="language-plaintext highlighter-rouge">Edit</code>, <code class="language-plaintext highlighter-rouge">EditGuesser</code> fetches the data. It then analyzes the response and guesses the inputs it should use to display a basic form with the data. It also dumps the components it has guessed in the console, where you can copy it into your own code. Use this feature to quickly bootstrap an <code class="language-plaintext highlighter-rouge">Edit</code> on top of an existing API, without adding the inputs one by one.</p>

<p><img src="./img/guessed-edit.png" alt="Guessed Edit" /></p>

<p>React-admin provides guessers for the <code class="language-plaintext highlighter-rouge">List</code> view (<code class="language-plaintext highlighter-rouge">ListGuesser</code>), the <code class="language-plaintext highlighter-rouge">Edit</code> view (<code class="language-plaintext highlighter-rouge">EditGuesser</code>), and the <code class="language-plaintext highlighter-rouge">Show</code> view (<code class="language-plaintext highlighter-rouge">ShowGuesser</code>).</p>

<p><strong>Tip</strong>: Do not use the guessers in production. They are slower than manually-defined components because they have to infer types based on the content. Besides, the guesses are not always perfect.</p>

<h2 id="usecreatecontroller-and-useeditcontroller"><code class="language-plaintext highlighter-rouge">useCreateController</code> and <code class="language-plaintext highlighter-rouge">useEditController</code></h2>

<p>The <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> components both take care of two things:</p>

<ol>
  <li>(the “controller”) Fetching data based on the URL and transforming it</li>
  <li>(the “view”) Rendering the page title, the actions, the content and aside areas</li>
</ol>

<p>In some cases, you may want to customize the view entirely (i.e. keep the code for step 1, and provide your own code for step 2). For these cases, react-admin provides two hooks, <code class="language-plaintext highlighter-rouge">useCreateController()</code> and <code class="language-plaintext highlighter-rouge">useEditController()</code>. These hooks contain just the controller part of the <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> components.</p>

<p><strong>Tip</strong>: You should not use these hooks to hide or show form inputs based on the data. For that need, check <a href="./Inputs.md#linking-two-inputs"><code class="language-plaintext highlighter-rouge">&lt;FormDataConsumer&gt;</code></a></p>

<h3 id="usecreatecontroller"><code class="language-plaintext highlighter-rouge">useCreateController</code></h3>

<p>This hook takes one object as input (the props passed to a <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> component) and returns the save callback for the <code class="language-plaintext highlighter-rouge">Create</code> view, as well as some pre-computed values. You can use it to create your own custom <code class="language-plaintext highlighter-rouge">Create</code> view, like this one:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useCreateController</span><span class="p">,</span> <span class="nx">SimpleForm</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">MyCreate</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span>
        <span class="nx">basePath</span><span class="p">,</span> <span class="c1">// deduced from the location, useful for action buttons</span>
        <span class="nx">defaultTitle</span><span class="p">,</span> <span class="c1">// the translated title based on the resource, e.g. 'Create Post'</span>
        <span class="nx">record</span><span class="p">,</span> <span class="c1">// empty object, unless some values were passed in the location state to prefill the form</span>
        <span class="nx">redirect</span><span class="p">,</span> <span class="c1">// the default redirection route. Defaults to 'edit', unless the resource has no edit view, in which case it's 'list'</span>
        <span class="nx">resource</span><span class="p">,</span> <span class="c1">// the resource name, deduced from the location. e.g. 'posts'</span>
        <span class="nx">save</span><span class="p">,</span> <span class="c1">// the create callback, to be passed to the underlying form as submit handler</span>
        <span class="nx">saving</span><span class="p">,</span> <span class="c1">// boolean that becomes true when the dataProvider is called to create the record</span>
        <span class="nx">version</span><span class="p">,</span> <span class="c1">// integer used by the refresh feature</span>
    <span class="p">}</span> <span class="o">=</span> <span class="nf">useCreateController</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">defaultTitle</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
            <span class="si">{</span><span class="nf">cloneElement</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">basePath</span><span class="p">,</span>
                <span class="nx">record</span><span class="p">,</span>
                <span class="nx">redirect</span><span class="p">,</span>
                <span class="nx">resource</span><span class="p">,</span>
                <span class="nx">save</span><span class="p">,</span>
                <span class="nx">saving</span><span class="p">,</span>
                <span class="nx">version</span><span class="p">,</span>
            <span class="p">})</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">PostCreate</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">MyCreate</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">MyCreate</span><span class="p">&gt;</span>
<span class="p">)</span>
</code></pre></div></div>

<p>This custom Create view has no action buttons or aside component - it’s up to you to add them in pure React.</p>

<p><strong>Tip</strong>: You don’t have to clone the child element. If you can’t reuse an existing form component like <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code>, feel free to write the form code inside your custom <code class="language-plaintext highlighter-rouge">MyCreate</code> component.</p>

<h3 id="useeditcontroller"><code class="language-plaintext highlighter-rouge">useEditController</code></h3>

<p>This hook takes one object as input (the props passed to an <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> component) and returns the fetched data and callbacks for the Edit view. You can use it to create your own custom Edit view, like this one:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEditController</span><span class="p">,</span> <span class="nx">SimpleForm</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">MyEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span>
        <span class="nx">basePath</span><span class="p">,</span> <span class="c1">// deduced from the location, useful for action buttons</span>
        <span class="nx">defaultTitle</span><span class="p">,</span> <span class="c1">// the translated title based on the resource, e.g. 'Post #123'</span>
        <span class="nx">loaded</span><span class="p">,</span> <span class="c1">// boolean that is false until the record is available</span>
        <span class="nx">loading</span><span class="p">,</span> <span class="c1">// boolean that is true on mount, and false once the record was fetched</span>
        <span class="nx">record</span><span class="p">,</span> <span class="c1">// record fetched via dataProvider.getOne() based on the id from the location</span>
        <span class="nx">redirect</span><span class="p">,</span> <span class="c1">// the default redirection route. Defaults to 'list'</span>
        <span class="nx">resource</span><span class="p">,</span> <span class="c1">// the resource name, deduced from the location. e.g. 'posts'</span>
        <span class="nx">save</span><span class="p">,</span> <span class="c1">// the update callback, to be passed to the underlying form as submit handler</span>
        <span class="nx">saving</span><span class="p">,</span> <span class="c1">// boolean that becomes true when the dataProvider is called to update the record</span>
        <span class="nx">version</span><span class="p">,</span> <span class="c1">// integer used by the refresh feature</span>
    <span class="p">}</span> <span class="o">=</span> <span class="nf">useEditController</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">defaultTitle</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
            <span class="si">{</span><span class="nf">cloneElement</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">basePath</span><span class="p">,</span>
                <span class="nx">record</span><span class="p">,</span>
                <span class="nx">redirect</span><span class="p">,</span>
                <span class="nx">resource</span><span class="p">,</span>
                <span class="nx">save</span><span class="p">,</span>
                <span class="nx">saving</span><span class="p">,</span>
                <span class="nx">version</span><span class="p">,</span>
            <span class="p">})</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">MyEdit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">MyEdit</span><span class="p">&gt;</span>
<span class="p">)</span>
</code></pre></div></div>

<p>This custom Edit view has no action buttons or aside component - it’s up to you to add them in pure React.</p>

<p><strong>Tip</strong>: You don’t have to clone the child element. If you can’t reuse an existing form component like <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code>, feel free to write the form code inside your custom <code class="language-plaintext highlighter-rouge">MyEdit</code> component.</p>

<h2 id="the-simpleform-component">The <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> component</h2>

<p>The <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> component receives the <code class="language-plaintext highlighter-rouge">record</code> as prop from its parent component. It is responsible for rendering the actual form. It is also responsible for validating the form data. Finally, it receives a <code class="language-plaintext highlighter-rouge">handleSubmit</code> function as prop, to be called with the updated record as an argument when the user submits the form.</p>

<p>The <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> renders its child components line by line (within <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code> components). It accepts Input and Field components as children. It relies on <a href="https://github.com/final-form/react-final-form">react-final-form</a> for form handling.</p>

<p><img src="./img/post-edition.png" alt="post edition form" /></p>

<p>By default, the <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> submits the form when the user presses <code class="language-plaintext highlighter-rouge">ENTER</code>. If you want
to change this behaviour you can pass <code class="language-plaintext highlighter-rouge">false</code> for the <code class="language-plaintext highlighter-rouge">submitOnEnter</code> property, and the user will only be able to submit by pressing the save button. This can be useful e.g. if you have an input widget using <code class="language-plaintext highlighter-rouge">ENTER</code> for a special function.</p>

<p>Here are all the props you can set on the <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> component:</p>

<ul>
  <li><a href="#default-values"><code class="language-plaintext highlighter-rouge">initialValues</code></a></li>
  <li><a href="#validation"><code class="language-plaintext highlighter-rouge">validate</code></a></li>
  <li><a href="#submit-on-enter"><code class="language-plaintext highlighter-rouge">submitOnEnter</code></a></li>
  <li><a href="#redirection-after-submission"><code class="language-plaintext highlighter-rouge">redirect</code></a></li>
  <li><a href="#toolbar"><code class="language-plaintext highlighter-rouge">toolbar</code></a></li>
  <li><a href="#variant"><code class="language-plaintext highlighter-rouge">variant</code></a></li>
  <li><a href="#margin"><code class="language-plaintext highlighter-rouge">margin</code></a></li>
  <li><a href="#warning-about-unsaved-changes"><code class="language-plaintext highlighter-rouge">warnWhenUnsavedChanges</code></a></li>
  <li><a href="#setting-empty-values-to-null"><code class="language-plaintext highlighter-rouge">sanitizeEmptyValues</code></a></li>
</ul>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">PostCreate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Create</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">RichTextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">NumberInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"nb_views"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Create</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: <code class="language-plaintext highlighter-rouge">Create</code> and <code class="language-plaintext highlighter-rouge">Edit</code> inject more props to their child. So <code class="language-plaintext highlighter-rouge">SimpleForm</code> also expects these props to be set (but you shouldn’t set them yourself):</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">save</code>: The function invoked when the form is submitted.</li>
  <li><code class="language-plaintext highlighter-rouge">saving</code>: A boolean indicating whether a save operation is ongoing.</li>
</ul>

<h3 id="label-decoration">Label Decoration</h3>

<p><code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> scans its children for the <code class="language-plaintext highlighter-rouge">addLabel</code> prop, and automatically wraps a child in a <code class="language-plaintext highlighter-rouge">&lt;Labeled&gt;</code> component when found. This displays a label on top of the child, based on the <code class="language-plaintext highlighter-rouge">label</code> prop. This is not necessary for <code class="language-plaintext highlighter-rouge">&lt;Input&gt;</code> components, as they already contain their label. Also, all the react-admin <code class="language-plaintext highlighter-rouge">&lt;Field&gt;</code> components have a default prop <code class="language-plaintext highlighter-rouge">addLabel: true</code>, which explains why react-admin shows a label on top of Fields when they are used as children of <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code>.</p>

<p>For your own components that don’t include a label by default, set the <code class="language-plaintext highlighter-rouge">addLabel</code> prop if you want to use them as <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> children.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">IdentifierField</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">record</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Typography</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">record</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">BodyField</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">record</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Identifier</span> <span class="na">label</span><span class="p">=</span><span class="s">"body"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Typography</span><span class="p">&gt;</span>
            <span class="si">{</span><span class="nx">record</span><span class="p">.</span><span class="nx">body</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Identifier</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Create</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">IdentifierField</span> <span class="na">addLabel</span> <span class="na">label</span><span class="p">=</span><span class="s">"Identifier"</span> <span class="p">/&gt;</span> <span class="si">{</span><span class="cm">/* SimpleForm will add a label */</span><span class="si">}</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span> <span class="si">{</span><span class="cm">/* SimpleForm will add a label, too (TextField has addLabel:true in defaultProps) */</span><span class="si">}</span>
            <span class="p">&lt;</span><span class="nc">BodyField</span> <span class="p">/&gt;</span> <span class="si">{</span><span class="cm">/* SimpleForm will NOT add a label */</span><span class="si">}</span>
            <span class="p">&lt;</span><span class="nc">NumberInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"nb_views"</span> <span class="p">/&gt;</span> <span class="si">{</span><span class="cm">/* SimpleForm will NOT add a label */</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Create</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="the-tabbedform-component">The <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code> component</h2>

<p>Just like <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code> receives the <code class="language-plaintext highlighter-rouge">record</code> prop, renders the actual form, and handles form validation on submit. However, the <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code> component renders inputs grouped by tab. The tabs are set by using <code class="language-plaintext highlighter-rouge">&lt;FormTab&gt;</code> components, which expect a <code class="language-plaintext highlighter-rouge">label</code> and an <code class="language-plaintext highlighter-rouge">icon</code> prop.</p>

<p><img src="./img/tabbed-form.gif" alt="tabbed form" /></p>

<p>By default, the <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code> submits the form when the user presses <code class="language-plaintext highlighter-rouge">ENTER</code>, if you want
to change this behaviour you can pass <code class="language-plaintext highlighter-rouge">false</code> for the <code class="language-plaintext highlighter-rouge">submitOnEnter</code> property.</p>

<p>Here are all the props accepted by the <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code> component:</p>

<ul>
  <li><a href="#default-values"><code class="language-plaintext highlighter-rouge">initialValues</code></a></li>
  <li><a href="#validation"><code class="language-plaintext highlighter-rouge">validate</code></a></li>
  <li><a href="#submit-on-enter"><code class="language-plaintext highlighter-rouge">submitOnEnter</code></a></li>
  <li><a href="#redirection-after-submission"><code class="language-plaintext highlighter-rouge">redirect</code></a></li>
  <li><a href="#tabbedformtabs"><code class="language-plaintext highlighter-rouge">tabs</code></a></li>
  <li><a href="#toolbar"><code class="language-plaintext highlighter-rouge">toolbar</code></a></li>
  <li><a href="#variant"><code class="language-plaintext highlighter-rouge">variant</code></a></li>
  <li><a href="#margin"><code class="language-plaintext highlighter-rouge">margin</code></a></li>
  <li><code class="language-plaintext highlighter-rouge">save</code>: The function invoked when the form is submitted. This is passed automatically by <code class="language-plaintext highlighter-rouge">react-admin</code> when the form component is used inside <code class="language-plaintext highlighter-rouge">Create</code> and <code class="language-plaintext highlighter-rouge">Edit</code> components.</li>
  <li><code class="language-plaintext highlighter-rouge">saving</code>: A boolean indicating whether a save operation is ongoing. This is passed automatically by <code class="language-plaintext highlighter-rouge">react-admin</code> when the form component is used inside <code class="language-plaintext highlighter-rouge">Create</code> and <code class="language-plaintext highlighter-rouge">Edit</code> components.</li>
  <li><a href="#warning-about-unsaved-changes"><code class="language-plaintext highlighter-rouge">warnWhenUnsavedChanges</code></a></li>
  <li><a href="#setting-empty-values-to-null"><code class="language-plaintext highlighter-rouge">sanitizeEmptyValues</code></a></li>
</ul>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
    <span class="nx">TabbedForm</span><span class="p">,</span>
    <span class="nx">FormTab</span><span class="p">,</span>
    <span class="nx">Edit</span><span class="p">,</span>
    <span class="nx">Datagrid</span><span class="p">,</span>
    <span class="nx">TextField</span><span class="p">,</span>
    <span class="nx">DateField</span><span class="p">,</span>
    <span class="nx">TextInput</span><span class="p">,</span>
    <span class="nx">ReferenceManyField</span><span class="p">,</span>
    <span class="nx">NumberInput</span><span class="p">,</span>    
    <span class="nx">DateInput</span><span class="p">,</span>
    <span class="nx">BooleanInput</span><span class="p">,</span>
    <span class="nx">EditButton</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">TabbedForm</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">FormTab</span> <span class="na">label</span><span class="p">=</span><span class="s">"summary"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">disabled</span> <span class="na">label</span><span class="p">=</span><span class="s">"Id"</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nf">required</span><span class="p">()</span><span class="si">}</span> <span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">multiline</span> <span class="na">source</span><span class="p">=</span><span class="s">"teaser"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nf">required</span><span class="p">()</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nc">FormTab</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">FormTab</span> <span class="na">label</span><span class="p">=</span><span class="s">"body"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">RichTextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nf">required</span><span class="p">()</span><span class="si">}</span> <span class="na">addLabel</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nc">FormTab</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">FormTab</span> <span class="na">label</span><span class="p">=</span><span class="s">"Miscellaneous"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Password (if protected post)"</span> <span class="na">source</span><span class="p">=</span><span class="s">"password"</span> <span class="na">type</span><span class="p">=</span><span class="s">"password"</span> <span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nc">DateInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Publication date"</span> <span class="na">source</span><span class="p">=</span><span class="s">"published_at"</span> <span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nc">NumberInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"average_note"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="p">[</span> <span class="nf">number</span><span class="p">(),</span> <span class="nf">minValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">]</span><span class="si">}</span> <span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nc">BooleanInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Allow comments?"</span> <span class="na">source</span><span class="p">=</span><span class="s">"commentable"</span> <span class="na">defaultValue</span> <span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">disabled</span> <span class="na">label</span><span class="p">=</span><span class="s">"Nb views"</span> <span class="na">source</span><span class="p">=</span><span class="s">"views"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nc">FormTab</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">FormTab</span> <span class="na">label</span><span class="p">=</span><span class="s">"comments"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">ReferenceManyField</span> <span class="na">reference</span><span class="p">=</span><span class="s">"comments"</span> <span class="na">target</span><span class="p">=</span><span class="s">"post_id"</span> <span class="na">addLabel</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
                        <span class="p">&lt;</span><span class="nc">DateField</span> <span class="na">source</span><span class="p">=</span><span class="s">"created_at"</span> <span class="p">/&gt;</span>
                        <span class="p">&lt;</span><span class="nc">EditButton</span> <span class="p">/&gt;</span>
                    <span class="p">&lt;/</span><span class="nc">Datagrid</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nc">ReferenceManyField</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nc">FormTab</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">TabbedForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>To style the tabs, the <code class="language-plaintext highlighter-rouge">&lt;FormTab&gt;</code> component accepts two props:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">className</code> is passed to the tab <em>header</em></li>
  <li><code class="language-plaintext highlighter-rouge">contentClassName</code> is passed to the tab <em>content</em></li>
</ul>

<h3 id="label-decoration-1">Label Decoration</h3>

<p><code class="language-plaintext highlighter-rouge">&lt;FormTab&gt;</code> scans its children for the <code class="language-plaintext highlighter-rouge">addLabel</code> prop, and automatically wraps a child in a <code class="language-plaintext highlighter-rouge">&lt;Labeled&gt;</code> component when found. This displays a label on top of the child, based on the <code class="language-plaintext highlighter-rouge">label</code> prop. This is not necessary for <code class="language-plaintext highlighter-rouge">&lt;Input&gt;</code> components, as they already contain their label. Also, all the react-admin <code class="language-plaintext highlighter-rouge">&lt;Field&gt;</code> components have a default prop <code class="language-plaintext highlighter-rouge">addLabel: true</code>, which explains why react-admin shows a label on top of Fields when they are used as children of <code class="language-plaintext highlighter-rouge">&lt;FormTab&gt;</code>.</p>

<p>For your own components that don’t include a label by default, set the <code class="language-plaintext highlighter-rouge">addLabel</code> prop if you want to use them as <code class="language-plaintext highlighter-rouge">&lt;FormTab&gt;</code> children.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">IdentifierField</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">record</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Typography</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">record</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">BodyField</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">record</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Identifier</span> <span class="na">label</span><span class="p">=</span><span class="s">"body"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Typography</span><span class="p">&gt;</span>
            <span class="si">{</span><span class="nx">record</span><span class="p">.</span><span class="nx">body</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Identifier</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Create</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">TabbedForm</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">FormTab</span> <span class="na">label</span><span class="p">=</span><span class="s">"main"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">IdentifierField</span> <span class="na">addLabel</span> <span class="na">label</span><span class="p">=</span><span class="s">"Identifier"</span> <span class="p">/&gt;</span> <span class="si">{</span><span class="cm">/* FormTab will add a label */</span><span class="si">}</span>
                <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span> <span class="si">{</span><span class="cm">/* FormTab will add a label, too (TextField has addLabel:true) in defaultProps */</span><span class="si">}</span>
                <span class="p">&lt;</span><span class="nc">BodyField</span> <span class="p">/&gt;</span> <span class="si">{</span><span class="cm">/* FormTab will NOT add a label */</span><span class="si">}</span>
                <span class="p">&lt;</span><span class="nc">NumberInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"nb_views"</span> <span class="p">/&gt;</span> <span class="si">{</span><span class="cm">/* FormTab will NOT add a label */</span><span class="si">}</span>
            <span class="p">&lt;/</span><span class="nc">FormTab</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">TabbedForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Create</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="tabbedformtabs">TabbedFormTabs</h3>

<p>By default <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code> uses <code class="language-plaintext highlighter-rouge">&lt;TabbedFormTabs&gt;</code>, an internal react-admin component, to renders tabs. You can pass a custom component as the <code class="language-plaintext highlighter-rouge">tabs</code> prop to override the default component. Besides, props from <code class="language-plaintext highlighter-rouge">&lt;TabbedFormTabs&gt;</code> are passed to material-ui’s <code class="language-plaintext highlighter-rouge">&lt;Tabs&gt;</code> component inside <code class="language-plaintext highlighter-rouge">&lt;TabbedFormTabs&gt;</code>.</p>

<p>The following example shows how to make use of scrollable <code class="language-plaintext highlighter-rouge">&lt;Tabs&gt;</code>. Pass the <code class="language-plaintext highlighter-rouge">scrollable</code> prop to <code class="language-plaintext highlighter-rouge">&lt;TabbedFormTabs&gt;</code> and pass that as the <code class="language-plaintext highlighter-rouge">tabs</code> prop to <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code></p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
    <span class="nx">Edit</span><span class="p">,</span>
    <span class="nx">TabbedForm</span><span class="p">,</span>
    <span class="nx">TabbedFormTabs</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">TabbedForm</span> <span class="na">tabs</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">TabbedFormTabs</span> <span class="na">scrollable</span><span class="p">=</span><span class="si">{</span><span class="kc">true</span><span class="si">}</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">TabbedForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="default-values">Default Values</h2>

<p>To define default values, you can add a <code class="language-plaintext highlighter-rouge">initialValues</code> prop to form components (<code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code>, etc.), or add a <code class="language-plaintext highlighter-rouge">defaultValue</code> to individual input components. Let’s see each of these options.</p>

<p><strong>Note</strong>: on RA v2 the <code class="language-plaintext highlighter-rouge">initialValues</code> used to be named <code class="language-plaintext highlighter-rouge">defaultValue</code></p>

<h3 id="global-default-value">Global Default Value</h3>

<p>The value of the form <code class="language-plaintext highlighter-rouge">initialValues</code> prop is an object, or a function returning an object, specifying default values for the created record. For instance:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">postDefaultValue</span> <span class="o">=</span> <span class="p">{</span> <span class="na">created_at</span><span class="p">:</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">(),</span> <span class="na">nb_views</span><span class="p">:</span> <span class="mi">0</span> <span class="p">};</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostCreate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Create</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">initialValues</span><span class="p">=</span><span class="si">{</span><span class="nx">postDefaultValue</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">RichTextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">NumberInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"nb_views"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Create</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: You can include properties in the form <code class="language-plaintext highlighter-rouge">initialValues</code> that are not listed as input components, like the <code class="language-plaintext highlighter-rouge">created_at</code> property in the previous example.</p>

<h3 id="per-input-default-value">Per Input Default Value</h3>

<p>Alternatively, you can specify a <code class="language-plaintext highlighter-rouge">defaultValue</code> prop directly in <code class="language-plaintext highlighter-rouge">&lt;Input&gt;</code> components. React-admin will merge the input default values with the form default value (input &gt; form):</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">PostCreate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Create</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="na">defaultValue</span><span class="p">=</span><span class="si">{</span><span class="nx">React</span><span class="p">.</span><span class="nf">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nf">uuid</span><span class="p">(),</span> <span class="p">[])</span><span class="si">}</span> <span class="na">disabled</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">RichTextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">NumberInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"nb_views"</span> <span class="na">defaultValue</span><span class="p">=</span><span class="si">{</span><span class="mi">0</span><span class="si">}</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Create</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: For default values computed during the first render, or default values that are expensive to compute, use <code class="language-plaintext highlighter-rouge">React.useMemo</code> as in the example above.</p>

<h2 id="validation">Validation</h2>

<p>React-admin relies on <a href="https://github.com/final-form/react-final-form">react-final-form</a> for the validation.</p>

<p>To validate values submitted by a form, you can add a <code class="language-plaintext highlighter-rouge">validate</code> prop to the form component, to individual inputs, or even mix both approaches.</p>

<h3 id="global-validation">Global Validation</h3>

<p>The value of the form <code class="language-plaintext highlighter-rouge">validate</code> prop must be a function taking the record as input, and returning an object with error messages indexed by field. For instance:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">validateUserCreation</span> <span class="o">=</span> <span class="p">(</span><span class="nx">values</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">errors</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">values</span><span class="p">.</span><span class="nx">firstName</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">errors</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">The firstName is required</span><span class="dl">'</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">values</span><span class="p">.</span><span class="nx">age</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">errors</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">The age is required</span><span class="dl">'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if </span><span class="p">(</span><span class="nx">values</span><span class="p">.</span><span class="nx">age</span> <span class="o">&lt;</span> <span class="mi">18</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">errors</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Must be over 18</span><span class="dl">'</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">errors</span>
<span class="p">};</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">UserCreate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Create</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nx">validateUserCreation</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"First Name"</span> <span class="na">source</span><span class="p">=</span><span class="s">"firstName"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Age"</span> <span class="na">source</span><span class="p">=</span><span class="s">"age"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Create</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: The props you pass to <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code> are passed to the <a href="https://final-form.org/docs/react-final-form/api/Form">&lt;Form&gt;</a> of <code class="language-plaintext highlighter-rouge">react-final-form</code>.</p>

<h3 id="per-input-validation-built-in-field-validators">Per Input Validation: Built-in Field Validators</h3>

<p>Alternatively, you can specify a <code class="language-plaintext highlighter-rouge">validate</code> prop directly in <code class="language-plaintext highlighter-rouge">&lt;Input&gt;</code> components, taking either a function or an array of functions. React-admin already bundles a few validator functions, that you can just require, and use as input-level validators:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">required(message)</code> if the field is mandatory,</li>
  <li><code class="language-plaintext highlighter-rouge">minValue(min, message)</code> to specify a minimum value for integers,</li>
  <li><code class="language-plaintext highlighter-rouge">maxValue(max, message)</code> to specify a maximum value for integers,</li>
  <li><code class="language-plaintext highlighter-rouge">minLength(min, message)</code> to specify a minimum length for strings,</li>
  <li><code class="language-plaintext highlighter-rouge">maxLength(max, message)</code> to specify a maximum length for strings,</li>
  <li><code class="language-plaintext highlighter-rouge">number(message)</code> to check that the input is a valid number,</li>
  <li><code class="language-plaintext highlighter-rouge">email(message)</code> to check that the input is a valid email address,</li>
  <li><code class="language-plaintext highlighter-rouge">regex(pattern, message)</code> to validate that the input matches a regex,</li>
  <li><code class="language-plaintext highlighter-rouge">choices(list, message)</code> to validate that the input is within a given list,</li>
</ul>

<p>Example usage:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span>
    <span class="nx">required</span><span class="p">,</span>
    <span class="nx">minLength</span><span class="p">,</span>
    <span class="nx">maxLength</span><span class="p">,</span>
    <span class="nx">minValue</span><span class="p">,</span>
    <span class="nx">maxValue</span><span class="p">,</span>
    <span class="nx">number</span><span class="p">,</span>
    <span class="nx">regex</span><span class="p">,</span>
    <span class="nx">email</span><span class="p">,</span>
    <span class="nx">choices</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">validateFirstName</span> <span class="o">=</span> <span class="p">[</span><span class="nf">required</span><span class="p">(),</span> <span class="nf">minLength</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nf">maxLength</span><span class="p">(</span><span class="mi">15</span><span class="p">)];</span>
<span class="kd">const</span> <span class="nx">validateEmail</span> <span class="o">=</span> <span class="nf">email</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">validateAge</span> <span class="o">=</span> <span class="p">[</span><span class="nf">number</span><span class="p">(),</span> <span class="nf">minValue</span><span class="p">(</span><span class="mi">18</span><span class="p">)];</span>
<span class="kd">const</span> <span class="nx">validateZipCode</span> <span class="o">=</span> <span class="nf">regex</span><span class="p">(</span><span class="sr">/^</span><span class="se">\d{5}</span><span class="sr">$/</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Must be a valid Zip Code</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">validateSex</span> <span class="o">=</span> <span class="nf">choices</span><span class="p">([</span><span class="dl">'</span><span class="s1">m</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">f</span><span class="dl">'</span><span class="p">],</span> <span class="dl">'</span><span class="s1">Must be Male or Female</span><span class="dl">'</span><span class="p">);</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">UserCreate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Create</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"First Name"</span> <span class="na">source</span><span class="p">=</span><span class="s">"firstName"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nx">validateFirstName</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Email"</span> <span class="na">source</span><span class="p">=</span><span class="s">"email"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nx">validateEmail</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Age"</span> <span class="na">source</span><span class="p">=</span><span class="s">"age"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nx">validateAge</span><span class="si">}</span><span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Zip Code"</span> <span class="na">source</span><span class="p">=</span><span class="s">"zip"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nx">validateZipCode</span><span class="si">}</span><span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">SelectInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Sex"</span> <span class="na">source</span><span class="p">=</span><span class="s">"sex"</span> <span class="na">choices</span><span class="p">=</span><span class="si">{</span><span class="p">[</span>
                <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">m</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Male</span><span class="dl">'</span> <span class="p">},</span>
                <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">f</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Female</span><span class="dl">'</span> <span class="p">},</span>
            <span class="p">]</span><span class="si">}</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nx">validateSex</span><span class="si">}</span><span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Create</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: If you pass a function as a message, react-admin calls this function with <code class="language-plaintext highlighter-rouge">{ args, value, values,translate, ...props }</code> as argument. For instance:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">translate</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nf">translate</span><span class="p">(</span><span class="dl">'</span><span class="s1">myroot.validation.email_invalid</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">validateEmail</span> <span class="o">=</span> <span class="nf">email</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="per-input-validation-custom-function-validator">Per Input Validation: Custom Function Validator</h3>

<p>You can also define your own validator functions. These functions should return <code class="language-plaintext highlighter-rouge">undefined</code> when there is no error, or an error string.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">required</span> <span class="o">=</span> <span class="p">(</span><span class="nx">message</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Required</span><span class="dl">'</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">value</span> <span class="o">=&gt;</span> <span class="nx">value</span> <span class="p">?</span> <span class="kc">undefined</span> <span class="p">:</span> <span class="nx">message</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">maxLength</span> <span class="o">=</span> <span class="p">(</span><span class="nx">max</span><span class="p">,</span> <span class="nx">message</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Too short</span><span class="dl">'</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">value</span> <span class="o">=&gt;</span> <span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">max</span> <span class="p">?</span> <span class="nx">message</span> <span class="p">:</span> <span class="kc">undefined</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">number</span> <span class="o">=</span> <span class="p">(</span><span class="nx">message</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Must be a number</span><span class="dl">'</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">value</span> <span class="o">=&gt;</span> <span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="nf">isNaN</span><span class="p">(</span><span class="nc">Number</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">?</span> <span class="nx">message</span> <span class="p">:</span> <span class="kc">undefined</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">minValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">min</span><span class="p">,</span> <span class="nx">message</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Too small</span><span class="dl">'</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">value</span> <span class="o">=&gt;</span> <span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">&lt;</span> <span class="nx">min</span> <span class="p">?</span> <span class="nx">message</span> <span class="p">:</span> <span class="kc">undefined</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ageValidation</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">allValues</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="dl">'</span><span class="s1">The age is required</span><span class="dl">'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">value</span> <span class="o">&lt;</span> <span class="mi">18</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="dl">'</span><span class="s1">Must be over 18</span><span class="dl">'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">[];</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">validateFirstName</span> <span class="o">=</span> <span class="p">[</span><span class="nf">required</span><span class="p">(),</span> <span class="nf">maxLength</span><span class="p">(</span><span class="mi">15</span><span class="p">)];</span>
<span class="kd">const</span> <span class="nx">validateAge</span> <span class="o">=</span> <span class="p">[</span><span class="nf">required</span><span class="p">(),</span> <span class="nf">number</span><span class="p">(),</span> <span class="nx">ageValidation</span><span class="p">];</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">UserCreate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Create</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"First Name"</span> <span class="na">source</span><span class="p">=</span><span class="s">"firstName"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nx">validateFirstName</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">label</span><span class="p">=</span><span class="s">"Age"</span> <span class="na">source</span><span class="p">=</span><span class="s">"age"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nx">validateAge</span><span class="si">}</span><span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Create</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>React-admin will combine all the input-level functions into a single function looking just like the previous one.</p>

<p>Input validation functions receive the current field value and the values of all fields of the current record. This allows for complex validation scenarios (e.g. validate that two passwords are the same).</p>

<p><strong>Tip</strong>: If your admin has multi-language support, validator functions should return message <em>identifiers</em> rather than messages themselves. React-admin automatically passes these identifiers to the translation function:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in validators/required.js</span>
<span class="kd">const</span> <span class="nx">required</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">allValues</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">value</span>
        <span class="p">?</span> <span class="kc">undefined</span>
        <span class="p">:</span> <span class="dl">'</span><span class="s1">myroot.validation.required</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// in i18n/en.json</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">myroot</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">validation</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">required</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Required field</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If the translation depends on a variable, the validator can return an object rather than a translation identifier:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in validators/minLength.js</span>
<span class="kd">const</span> <span class="nx">minLength</span> <span class="o">=</span> <span class="p">(</span><span class="nx">min</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">allValues</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> 
    <span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="nx">min</span>
        <span class="p">?</span> <span class="kc">undefined</span>
        <span class="p">:</span> <span class="p">{</span> <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">myroot.validation.minLength</span><span class="dl">'</span><span class="p">,</span> <span class="na">args</span><span class="p">:</span> <span class="p">{</span> <span class="nx">min</span> <span class="p">}</span> <span class="p">};</span>

<span class="c1">// in i18n/en.js</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">myroot</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">validation</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">minLength</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Must be %{min} characters at least</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>See the <a href="Translation.md#translation-messages">Translation documentation</a> for details.</p>

<p><strong>Tip</strong>: Make sure to define validation functions or array of functions in a variable outside of your component, instead of defining them directly in JSX. This can result in a new function or array at every render, and trigger infinite rerender.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">validateStock</span> <span class="o">=</span> <span class="p">[</span><span class="nf">required</span><span class="p">(),</span> <span class="nf">number</span><span class="p">(),</span> <span class="nf">minValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)];</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">ProductEdit</span> <span class="o">=</span> <span class="p">({</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">initialValues</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">stock</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
            ...
            <span class="si">{</span><span class="cm">/* do this */</span><span class="si">}</span>
            <span class="p">&lt;</span><span class="nc">NumberInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"stock"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nx">validateStock</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="si">{</span><span class="cm">/* don't do that */</span><span class="si">}</span>
            <span class="p">&lt;</span><span class="nc">NumberInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"stock"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="p">[</span><span class="nf">required</span><span class="p">(),</span> <span class="nf">number</span><span class="p">(),</span> <span class="nf">minValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)]</span><span class="si">}</span> <span class="p">/&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: The props of your Input components are passed to a <code class="language-plaintext highlighter-rouge">react-final-form</code> [<Field>](https://final-form.org/docs/react-final-form/api/Field) component.</Field></p>

<p><strong>Tip</strong>: You can use <em>both</em> Form validation and input validation.</p>

<h2 id="submit-on-enter">Submit On Enter</h2>

<p>By default, pressing <code class="language-plaintext highlighter-rouge">ENTER</code> in any of the form fields submits the form - this is the expected behavior in most cases. However, some of your custom input components (e.g. Google Maps widget) may have special handlers for the <code class="language-plaintext highlighter-rouge">ENTER</code> key. In that case, to disable the automated form submission on enter, set the <code class="language-plaintext highlighter-rouge">submitOnEnter</code> prop of the form component to <code class="language-plaintext highlighter-rouge">false</code>:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">submitOnEnter</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="redirection-after-submission">Redirection After Submission</h2>

<p>By default:</p>

<ul>
  <li>Submitting the form in the <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> view redirects to the <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> view</li>
  <li>Submitting the form in the <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code> view redirects to the <code class="language-plaintext highlighter-rouge">&lt;List&gt;</code> view</li>
</ul>

<p>You can customize the redirection by setting the <code class="language-plaintext highlighter-rouge">redirect</code> prop of the form component. Possible values are “edit”, “show”, “list”, and <code class="language-plaintext highlighter-rouge">false</code> to disable redirection. You may also specify a custom path such as <code class="language-plaintext highlighter-rouge">/my-custom-route</code>. For instance, to redirect to the <code class="language-plaintext highlighter-rouge">&lt;Show&gt;</code> view after edition:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">redirect</span><span class="p">=</span><span class="s">"show"</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>You can also pass a custom route (e.g. “/home”) or a function as <code class="language-plaintext highlighter-rouge">redirect</code> prop value. For example, if you want to redirect to a page related to the current object:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// redirect to the related Author show page</span>
<span class="kd">const</span> <span class="nx">redirect</span> <span class="o">=</span> <span class="p">(</span><span class="nx">basePath</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s2">`/author/</span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">author_id</span><span class="p">}</span><span class="s2">/show`</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">redirect</span><span class="p">=</span><span class="si">{</span><span class="nx">redirect</span><span class="si">}</span><span class="p">&gt;</span>
            // ...
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>This affects both the submit button, and the form submission when the user presses <code class="language-plaintext highlighter-rouge">ENTER</code> in one of the form fields.</p>

<p><strong>Tip</strong>: The <code class="language-plaintext highlighter-rouge">redirect</code> prop is ignored if you’ve set the <code class="language-plaintext highlighter-rouge">onSuccess</code> prop in the <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code>/<code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> component, or in the <code class="language-plaintext highlighter-rouge">&lt;SaveButton&gt;</code> component.</p>

<p><strong>Tip</strong>: You may wonder why the <code class="language-plaintext highlighter-rouge">redirect</code> prop does the same thing as <code class="language-plaintext highlighter-rouge">onSuccess</code>: that’s for historical reasons. The recommended way is to change redirection using <code class="language-plaintext highlighter-rouge">onSuccess</code> rather than <code class="language-plaintext highlighter-rouge">redirect</code>.</p>

<h2 id="toolbar">Toolbar</h2>

<p>At the bottom of the form, the toolbar displays the submit button. You can override this component by setting the <code class="language-plaintext highlighter-rouge">toolbar</code> prop, to display the buttons of your choice.</p>

<p>The most common use case is to display two submit buttons in the <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> view:</p>

<ul>
  <li>One that creates and redirects to the <code class="language-plaintext highlighter-rouge">&lt;Show&gt;</code> view of the new resource, and</li>
  <li>One that redirects to a blank <code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> view after creation (allowing bulk creation)</li>
</ul>

<p><img src="./img/form-toolbar.png" alt="Form toolbar" /></p>

<p>For that use case, use the <code class="language-plaintext highlighter-rouge">&lt;SaveButton&gt;</code> component with a custom <code class="language-plaintext highlighter-rouge">redirect</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Create</span><span class="p">,</span> <span class="nx">SimpleForm</span><span class="p">,</span> <span class="nx">SaveButton</span><span class="p">,</span> <span class="nx">Toolbar</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostCreateToolbar</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Toolbar</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SaveButton</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"post.action.save_and_show"</span>
            <span class="na">redirect</span><span class="p">=</span><span class="s">"show"</span>
            <span class="na">submitOnEnter</span><span class="p">=</span><span class="si">{</span><span class="kc">true</span><span class="si">}</span>
        <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">SaveButton</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"post.action.save_and_add"</span>
            <span class="na">redirect</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span>
            <span class="na">submitOnEnter</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span>
            <span class="na">variant</span><span class="p">=</span><span class="s">"text"</span>
        <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Toolbar</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostCreate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Create</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">toolbar</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostCreateToolbar</span> <span class="p">/&gt;</span><span class="si">}</span> <span class="na">redirect</span><span class="p">=</span><span class="s">"show"</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Create</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>Another use case is to remove the <code class="language-plaintext highlighter-rouge">&lt;DeleteButton&gt;</code> from the toolbar in an edit view. In that case, create a custom toolbar containing only the <code class="language-plaintext highlighter-rouge">&lt;SaveButton&gt;</code> as a child:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Edit</span><span class="p">,</span> <span class="nx">SimpleForm</span><span class="p">,</span> <span class="nx">SaveButton</span><span class="p">,</span> <span class="nx">Toolbar</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostEditToolbar</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Toolbar</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SaveButton</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Toolbar</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">toolbar</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostEditToolbar</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
            // ...
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>In the default <code class="language-plaintext highlighter-rouge">&lt;Toolbar&gt;</code>, the <code class="language-plaintext highlighter-rouge">&lt;SaveButton&gt;</code> is disabled when the form is <code class="language-plaintext highlighter-rouge">pristine</code>. You can bypass this behavior and always enable it without customizing the <code class="language-plaintext highlighter-rouge">&lt;Toolbar&gt;</code> thanks to the prop <code class="language-plaintext highlighter-rouge">alwaysEnableSaveButton</code>:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Edit</span><span class="p">,</span> <span class="nx">SimpleForm</span><span class="p">,</span> <span class="nx">Toolbar</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">toolbar</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">Toolbar</span> <span class="na">alwaysEnableSaveButton</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>But if you want to customize the <code class="language-plaintext highlighter-rouge">&lt;Toolbar&gt;</code> (to remove the <code class="language-plaintext highlighter-rouge">&lt;DeleteButton&gt;</code> for example), you have to manage the <em>disabled</em> behaviour of the <code class="language-plaintext highlighter-rouge">&lt;SaveButton&gt;</code> by yourself:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Edit</span><span class="p">,</span> <span class="nx">SimpleForm</span><span class="p">,</span> <span class="nx">SaveButton</span><span class="p">,</span> <span class="nx">Toolbar</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostEditToolbar</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Toolbar</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SaveButton</span> <span class="na">disabled</span><span class="p">=</span><span class="si">{</span><span class="o">!</span><span class="nx">props</span><span class="p">.</span><span class="nx">pristine</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Toolbar</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">toolbar</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostEditToolbar</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
            // ...
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>Here are the props received by the <code class="language-plaintext highlighter-rouge">Toolbar</code> component when passed as the <code class="language-plaintext highlighter-rouge">toolbar</code> prop of the <code class="language-plaintext highlighter-rouge">SimpleForm</code> or <code class="language-plaintext highlighter-rouge">TabbedForm</code> components:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">handleSubmitWithRedirect</code>: The function to call in order to submit the form. It accepts a single parameter overriding the form’s default redirect.</li>
  <li><code class="language-plaintext highlighter-rouge">handleSubmit</code> which is the same prop as in <a href="https://final-form.org/docs/react-final-form/types/FormRenderProps#handlesubmit"><code class="language-plaintext highlighter-rouge">react-final-form</code></a></li>
  <li><code class="language-plaintext highlighter-rouge">invalid</code>: A boolean indicating whether the form is invalid</li>
  <li><code class="language-plaintext highlighter-rouge">pristine</code>: A boolean indicating whether the form is pristine (eg: no inputs have been changed yet)</li>
  <li><code class="language-plaintext highlighter-rouge">redirect</code>: The default form’s redirect</li>
  <li><code class="language-plaintext highlighter-rouge">saving</code>: A boolean indicating whether a save operation is ongoing.</li>
  <li><code class="language-plaintext highlighter-rouge">submitOnEnter</code>: A boolean indicating whether the form should be submitted when pressing <code class="language-plaintext highlighter-rouge">enter</code></li>
</ul>

<p><strong>Tip</strong>: Use react-admin’s <code class="language-plaintext highlighter-rouge">&lt;Toolbar&gt;</code> component instead of material-ui’s <code class="language-plaintext highlighter-rouge">&lt;Toolbar&gt;</code> component. The former builds upon the latter and adds support for an alternative mobile layout (and is therefore responsive).</p>

<p><strong>Tip</strong>: Don’t forget to also set the <code class="language-plaintext highlighter-rouge">redirect</code> prop of the Form component to handle submission by the <code class="language-plaintext highlighter-rouge">ENTER</code> key.</p>

<p><strong>Tip</strong>: To alter the form values before submitting, you should use the <code class="language-plaintext highlighter-rouge">handleSubmit</code> prop. See <a href="#altering-the-form-values-before-submitting">Altering the Form Values before Submitting</a> for more information and examples.</p>

<p><strong>Tip</strong>: If you want to include a custom <code class="language-plaintext highlighter-rouge">Button</code> in a <code class="language-plaintext highlighter-rouge">&lt;Toolbar&gt;</code> that doesn’t render a react-admin <code class="language-plaintext highlighter-rouge">&lt;Button&gt;</code>, the props injected by <code class="language-plaintext highlighter-rouge">&lt;Toolbar&gt;</code> to its children (<code class="language-plaintext highlighter-rouge">handleSubmit</code>, <code class="language-plaintext highlighter-rouge">handleSubmitWithRedirect</code>, <code class="language-plaintext highlighter-rouge">onSave</code>, <code class="language-plaintext highlighter-rouge">invalid</code>, <code class="language-plaintext highlighter-rouge">pristine</code>, <code class="language-plaintext highlighter-rouge">saving</code>, and <code class="language-plaintext highlighter-rouge">submitOnEnter</code>) will cause React warnings. You’ll need to wrap your custom <code class="language-plaintext highlighter-rouge">Button</code> in another component and ignore the injected props, as follows:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Button</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/Button</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">CustomButton</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">label</span><span class="p">=</span><span class="s">"My Custom Button"</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">/&gt;</span>

<span class="kd">const</span> <span class="nx">ToolbarCustomButton</span> <span class="o">=</span> <span class="p">({</span>
  <span class="nx">handleSubmit</span><span class="p">,</span>
  <span class="nx">handleSubmitWithRedirect</span><span class="p">,</span>
  <span class="nx">onSave</span><span class="p">,</span>
  <span class="nx">invalid</span><span class="p">,</span>
  <span class="nx">pristine</span><span class="p">,</span>
  <span class="nx">saving</span><span class="p">,</span>
  <span class="nx">submitOnEnter</span><span class="p">,</span>
  <span class="p">...</span><span class="nx">rest</span>
<span class="p">})</span> <span class="o">=&gt;</span> <span class="p">&lt;</span><span class="nc">CustomButton</span> <span class="si">{</span><span class="p">...</span><span class="nx">rest</span><span class="si">}</span> <span class="p">/&gt;;</span>

<span class="kd">const</span> <span class="nx">PostEditToolbar</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Toolbar</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">ToolbarCustomButton</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Toolbar</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="customizing-the-form-layout">Customizing The Form Layout</h2>

<p>You can customize each row in a <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> or in a <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code> by passing props to the Input components:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">className</code></li>
  <li><a href="#variant"><code class="language-plaintext highlighter-rouge">variant</code></a></li>
  <li><a href="#margin"><code class="language-plaintext highlighter-rouge">margin</code></a></li>
  <li><a href="#formclassname"><code class="language-plaintext highlighter-rouge">formClassName</code></a></li>
  <li><a href="#fullwidth"><code class="language-plaintext highlighter-rouge">fullWidth</code></a></li>
</ul>

<p>You can find more about these props in <a href="./Inputs.md#common-input-props">the Input documentation</a>.</p>

<p>You can also <a href="#custom-row-container">wrap inputs inside containers</a>, or <a href="#custom-form-component">create a custom Form component</a>, alternative to <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code>.</p>

<h3 id="variant">Variant</h3>

<p>By default, react-admin input components use the Material Design “filled” variant. If you want to use the “standard” or “outlined” variants, you can either set the <code class="language-plaintext highlighter-rouge">variant</code> prop on each Input component individually, or set the <code class="language-plaintext highlighter-rouge">variant</code> prop directly on the Form component. In that case, the Form component will transmit the <code class="language-plaintext highlighter-rouge">variant</code> to each Input.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">variant</span><span class="p">=</span><span class="s">"standard"</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: If your form contains not only Inputs but also Fields, the injection of the <code class="language-plaintext highlighter-rouge">variant</code> property to the form children will cause a React warning. You’ll need to wrap every Field component in another component to ignore the injected <code class="language-plaintext highlighter-rouge">variant</code> prop, as follows:</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gi">+const TextFieldInForm = ({ variant, ...props }) =&gt; &lt;TextField {...props} /&gt;;
+TextFieldInForm.defaultProps = TextField.defaultProps;
</span><span class="err">
</span>```jsx
<span class="p">export const PostEdit = (props) =&gt; (
</span>    &lt;Edit {...props}&gt;
        &lt;SimpleForm variant="standard"&gt;
<span class="gd">-           &lt;TextField source="title" /&gt;
</span><span class="gi">+           &lt;TextFieldInForm source="title" /&gt;
</span>        &lt;/SimpleForm&gt;
    &lt;/Edit&gt;
);
</code></pre></div></div>

<h3 id="margin">Margin</h3>

<p>By default, react-admin input components use the Material Design “dense” margin. If you want to use the “normal” or “none” margins, you can either set the <code class="language-plaintext highlighter-rouge">margin</code> prop on each Input component individually, or set the <code class="language-plaintext highlighter-rouge">margin</code> prop directly on the Form component. In that case, the Form component will transmit the <code class="language-plaintext highlighter-rouge">margin</code> to each Input.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">margin</span><span class="p">=</span><span class="s">"normal"</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="formclassname"><code class="language-plaintext highlighter-rouge">formClassName</code></h3>

<p>The input components are wrapped inside a <code class="language-plaintext highlighter-rouge">div</code> to ensure a good-looking form by default. You can pass a <code class="language-plaintext highlighter-rouge">formClassName</code> prop to the input components to customize the style of this <code class="language-plaintext highlighter-rouge">div</code>. For example, here is how to display two inputs on the same line:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
    <span class="nx">Edit</span><span class="p">,</span>
    <span class="nx">SimpleForm</span><span class="p">,</span>
    <span class="nx">TextInput</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">makeStyles</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core/styles</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">useStyles</span> <span class="o">=</span> <span class="nf">makeStyles</span><span class="p">({</span>
    <span class="na">inlineBlock</span><span class="p">:</span> <span class="p">{</span> <span class="na">display</span><span class="p">:</span> <span class="dl">'</span><span class="s1">inline-flex</span><span class="dl">'</span><span class="p">,</span> <span class="na">marginRight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1rem</span><span class="dl">'</span> <span class="p">},</span>
<span class="p">});</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">UserEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">classes</span> <span class="o">=</span> <span class="nf">useStyles</span><span class="p">();</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"first_name"</span> <span class="na">formClassName</span><span class="p">=</span><span class="si">{</span><span class="nx">classes</span><span class="p">.</span><span class="nx">inlineBlock</span><span class="si">}</span> <span class="p">/&gt;</span>
                <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"last_name"</span> <span class="na">formClassName</span><span class="p">=</span><span class="si">{</span><span class="nx">classes</span><span class="p">.</span><span class="nx">inlineBlock</span><span class="si">}</span> <span class="p">/&gt;</span>
                <span class="si">{</span><span class="cm">/* This input will be display below the two first ones */</span><span class="si">}</span>
                <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"email"</span> <span class="na">type</span><span class="p">=</span><span class="s">"email"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
    <span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="fullwidth"><code class="language-plaintext highlighter-rouge">fullWidth</code></h3>

<p>If you just need a form row to take the entire form width, use the <code class="language-plaintext highlighter-rouge">fullWidth</code> prop instead:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">UserEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"first_name"</span> <span class="na">fullWidth</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"last_name"</span> <span class="na">fullWidth</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"email"</span> <span class="na">type</span><span class="p">=</span><span class="s">"email"</span> <span class="na">fullWidth</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="custom-row-container">Custom Row Container</h3>

<p>You may want to customize the styles of Input components by wrapping them inside a container with a custom style. Unfortunately, this doesn’t work:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">PostCreate</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Create</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
            <span class="si">{</span><span class="cm">/* this does not work */</span><span class="si">}</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"special-input"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">RichTextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">NumberInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"nb_views"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Create</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>That’s because <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> clones its children and injects props to them (like <code class="language-plaintext highlighter-rouge">record</code> or <code class="language-plaintext highlighter-rouge">resource</code>). Input and Field components expect these props, but DOM elements don’t. That means that if you wrap an Input or a Field element in a <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code>, you’ll get a React warning about unrecognized DOM attributes, and an error about missing props in the child.</p>

<p>You can try passing <code class="language-plaintext highlighter-rouge">className</code> to the Input element directly - all form inputs accept a <code class="language-plaintext highlighter-rouge">className</code> prop.</p>

<p>Alternatively, you can create a custom Input component:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">MyTextInput</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"special-input"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">)</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">PostCreate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Create</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
            <span class="si">{</span><span class="cm">/* this works */</span><span class="si">}</span>
            <span class="p">&lt;</span><span class="nc">MyTextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">RichTextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">NumberInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"nb_views"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Create</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="custom-form-component">Custom Form Component</h3>

<p>The <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code> layouts are quite simple. In order to better use the screen real estate, you may want to arrange inputs differently, e.g. putting them in groups, adding separators, etc. For that purpose, you need to write a custom form layout, and use it instead of <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code>.</p>

<p><img src="./img/custom-form-layout.png" alt="custom form layout" /></p>

<p>Here is an example of such custom form, taken from the Posters Galore demo. It uses <a href="https://material-ui.com/components/box/">material-ui’s <code class="language-plaintext highlighter-rouge">&lt;Box&gt;</code> component</a>, and it’s a good starting point for your custom form layouts.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
    <span class="nx">FormWithRedirect</span><span class="p">,</span>
    <span class="nx">DateInput</span><span class="p">,</span>
    <span class="nx">SelectArrayInput</span><span class="p">,</span>
    <span class="nx">TextInput</span><span class="p">,</span>
    <span class="nx">SaveButton</span><span class="p">,</span>
    <span class="nx">DeleteButton</span><span class="p">,</span>
    <span class="nx">NullableBooleanInput</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Typography</span><span class="p">,</span> <span class="nx">Box</span><span class="p">,</span> <span class="nx">Toolbar</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">segments</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">compulsive</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Compulsive</span><span class="dl">'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">collector</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Collector</span><span class="dl">'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ordered_once</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Ordered Once</span><span class="dl">'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">regular</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Regular</span><span class="dl">'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">returns</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Returns</span><span class="dl">'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">reviewer</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Reviewer</span><span class="dl">'</span> <span class="p">},</span>
<span class="p">];</span>

<span class="kd">const</span> <span class="nx">VisitorForm</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">FormWithRedirect</span>
        <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span>
        <span class="na">render</span><span class="p">=</span><span class="si">{</span><span class="nx">formProps</span> <span class="o">=&gt;</span> <span class="p">(</span>
            <span class="c1">// here starts the custom form layout</span>
            <span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">p</span><span class="p">=</span><span class="s">"1em"</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">display</span><span class="p">=</span><span class="s">"flex"</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">flex</span><span class="p">=</span><span class="si">{</span><span class="mi">2</span><span class="si">}</span> <span class="na">mr</span><span class="p">=</span><span class="s">"1em"</span><span class="p">&gt;</span>

                            <span class="p">&lt;</span><span class="nc">Typography</span> <span class="na">variant</span><span class="p">=</span><span class="s">"h6"</span> <span class="na">gutterBottom</span><span class="p">&gt;</span>Identity<span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>

                            <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">display</span><span class="p">=</span><span class="s">"flex"</span><span class="p">&gt;</span>
                                <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">flex</span><span class="p">=</span><span class="si">{</span><span class="mi">1</span><span class="si">}</span> <span class="na">mr</span><span class="p">=</span><span class="s">"0.5em"</span><span class="p">&gt;</span>
                                    <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"first_name"</span> <span class="na">resource</span><span class="p">=</span><span class="s">"customers"</span> <span class="na">fullWidth</span> <span class="p">/&gt;</span>
                                <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
                                <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">flex</span><span class="p">=</span><span class="si">{</span><span class="mi">1</span><span class="si">}</span> <span class="na">ml</span><span class="p">=</span><span class="s">"0.5em"</span><span class="p">&gt;</span>
                                    <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"last_name"</span> <span class="na">resource</span><span class="p">=</span><span class="s">"customers"</span> <span class="na">fullWidth</span> <span class="p">/&gt;</span>
                                <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
                            <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"email"</span> <span class="na">resource</span><span class="p">=</span><span class="s">"customers"</span> <span class="na">type</span><span class="p">=</span><span class="s">"email"</span> <span class="na">fullWidth</span> <span class="p">/&gt;</span>
                            <span class="p">&lt;</span><span class="nc">DateInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"birthday"</span> <span class="na">resource</span><span class="p">=</span><span class="s">"customers"</span> <span class="p">/&gt;</span>
                            <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">mt</span><span class="p">=</span><span class="s">"1em"</span> <span class="p">/&gt;</span>

                            <span class="p">&lt;</span><span class="nc">Typography</span> <span class="na">variant</span><span class="p">=</span><span class="s">"h6"</span> <span class="na">gutterBottom</span><span class="p">&gt;</span>Address<span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>

                            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">resource</span><span class="p">=</span><span class="s">"customers"</span> <span class="na">source</span><span class="p">=</span><span class="s">"address"</span> <span class="na">multiline</span> <span class="na">fullWidth</span> <span class="p">/&gt;</span>
                            <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">display</span><span class="p">=</span><span class="s">"flex"</span><span class="p">&gt;</span>
                                <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">flex</span><span class="p">=</span><span class="si">{</span><span class="mi">1</span><span class="si">}</span> <span class="na">mr</span><span class="p">=</span><span class="s">"0.5em"</span><span class="p">&gt;</span>
                                    <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"zipcode"</span> <span class="na">resource</span><span class="p">=</span><span class="s">"customers"</span> <span class="na">fullWidth</span> <span class="p">/&gt;</span>
                                <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
                                <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">flex</span><span class="p">=</span><span class="si">{</span><span class="mi">2</span><span class="si">}</span> <span class="na">ml</span><span class="p">=</span><span class="s">"0.5em"</span><span class="p">&gt;</span>
                                    <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"city"</span> <span class="na">resource</span><span class="p">=</span><span class="s">"customers"</span> <span class="na">fullWidth</span> <span class="p">/&gt;</span>
                                <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
                            <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
                        <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>

                        <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">flex</span><span class="p">=</span><span class="si">{</span><span class="mi">1</span><span class="si">}</span> <span class="na">ml</span><span class="p">=</span><span class="s">"1em"</span><span class="p">&gt;</span>
                            
                            <span class="p">&lt;</span><span class="nc">Typography</span> <span class="na">variant</span><span class="p">=</span><span class="s">"h6"</span> <span class="na">gutterBottom</span><span class="p">&gt;</span>Stats<span class="p">&lt;/</span><span class="nc">Typography</span><span class="p">&gt;</span>

                            <span class="p">&lt;</span><span class="nc">SelectArrayInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"groups"</span> <span class="na">resource</span><span class="p">=</span><span class="s">"customers"</span> <span class="na">choices</span><span class="p">=</span><span class="si">{</span><span class="nx">segments</span><span class="si">}</span> <span class="na">fullWidth</span> <span class="p">/&gt;</span>
                            <span class="p">&lt;</span><span class="nc">NullableBooleanInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"has_newsletter"</span> <span class="na">resource</span><span class="p">=</span><span class="s">"customers"</span> <span class="p">/&gt;</span>
                        <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>

                    <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">Toolbar</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">display</span><span class="p">=</span><span class="s">"flex"</span> <span class="na">justifyContent</span><span class="p">=</span><span class="s">"space-between"</span> <span class="na">width</span><span class="p">=</span><span class="s">"100%"</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nc">SaveButton</span>
                            <span class="na">saving</span><span class="p">=</span><span class="si">{</span><span class="nx">formProps</span><span class="p">.</span><span class="nx">saving</span><span class="si">}</span>
                            <span class="na">handleSubmitWithRedirect</span><span class="p">=</span><span class="si">{</span><span class="nx">formProps</span><span class="p">.</span><span class="nx">handleSubmitWithRedirect</span><span class="si">}</span>
                        <span class="p">/&gt;</span>
                        <span class="p">&lt;</span><span class="nc">DeleteButton</span> <span class="na">record</span><span class="p">=</span><span class="si">{</span><span class="nx">formProps</span><span class="p">.</span><span class="nx">record</span><span class="si">}</span> <span class="p">/&gt;</span>
                    <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nc">Toolbar</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
        <span class="p">)</span><span class="si">}</span>
    <span class="p">/&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>This custom form layout component uses the <code class="language-plaintext highlighter-rouge">FormWithRedirect</code> component, which wraps react-final-form’s <code class="language-plaintext highlighter-rouge">Form</code> component to handle redirection logic. It also uses react-admin’s <code class="language-plaintext highlighter-rouge">&lt;SaveButton&gt;</code> and a <code class="language-plaintext highlighter-rouge">&lt;DeleteButton&gt;</code>.</p>

<p><strong>Tip</strong>: When <code class="language-plaintext highlighter-rouge">Input</code> components have a <code class="language-plaintext highlighter-rouge">resource</code> prop, they use it to determine the input label. <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code> inject this <code class="language-plaintext highlighter-rouge">resource</code> prop to <code class="language-plaintext highlighter-rouge">Input</code> components automatically. When you use a custom form layout, pass the <code class="language-plaintext highlighter-rouge">resource</code> prop manually - unless the <code class="language-plaintext highlighter-rouge">Input</code> has a <code class="language-plaintext highlighter-rouge">label</code> prop.</p>

<p>To use this form layout, simply pass it as child to an <code class="language-plaintext highlighter-rouge">Edit</code> component:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">VisitorEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">VisitorForm</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p><strong>Tip</strong>: <code class="language-plaintext highlighter-rouge">FormWithRedirect</code> contains some logic that you may not want. In fact, nothing forbids you from using a react-final-form <a href="https://final-form.org/docs/react-final-form/api/Form">Form</a> component as root component for a custom form layout. You’ll have to set initial values based the injected <code class="language-plaintext highlighter-rouge">record</code> prop manually, as follows:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">sanitizeEmptyValues</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Form</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-final-form</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">arrayMutators</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">final-form-arrays</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CardContent</span><span class="p">,</span> <span class="nx">Typography</span><span class="p">,</span> <span class="nx">Box</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@material-ui/core</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// the parent component (Edit or Create) injects these props to their child</span>
<span class="kd">const</span> <span class="nx">VisitorForm</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">basePath</span><span class="p">,</span> <span class="nx">record</span><span class="p">,</span> <span class="nx">save</span><span class="p">,</span> <span class="nx">saving</span><span class="p">,</span> <span class="nx">version</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">submit</span> <span class="o">=</span> <span class="nx">values</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// React-final-form removes empty values from the form state.</span>
        <span class="c1">// To allow users to *delete* values, this must be taken into account </span>
        <span class="nf">save</span><span class="p">(</span><span class="nf">sanitizeEmptyValues</span><span class="p">(</span><span class="nx">record</span><span class="p">,</span> <span class="nx">values</span><span class="p">));</span>
    <span class="p">};</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">Form</span>
            <span class="na">initialValues</span><span class="p">=</span><span class="si">{</span><span class="nx">record</span><span class="si">}</span>
            <span class="na">onSubmit</span><span class="p">=</span><span class="si">{</span><span class="nx">submit</span><span class="si">}</span>
            <span class="na">mutators</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="p">...</span><span class="nx">arrayMutators</span> <span class="p">}</span><span class="si">}</span> <span class="c1">// necessary for ArrayInput</span>
            <span class="na">subscription</span><span class="p">=</span><span class="si">{</span><span class="nx">defaultSubscription</span><span class="si">}</span> <span class="c1">// don't redraw entire form each time one field changes</span>
            <span class="na">key</span><span class="p">=</span><span class="si">{</span><span class="nx">version</span><span class="si">}</span> <span class="c1">// support for refresh button</span>
            <span class="na">keepDirtyOnReinitialize</span>
            <span class="na">render</span><span class="p">=</span><span class="si">{</span><span class="nx">formProps</span> <span class="o">=&gt;</span> <span class="p">(</span>
                <span class="c1">// render your custom form here</span>
            <span class="p">)</span><span class="si">}</span>
        <span class="p">/&gt;</span>
    <span class="p">);</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">defaultSubscription</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">submitting</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">pristine</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">valid</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">invalid</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="warning-about-unsaved-changes">Warning About Unsaved Changes</h2>

<p>React-admin keeps track of the form state, so it can detect when the user leaves an <code class="language-plaintext highlighter-rouge">Edit</code> or <code class="language-plaintext highlighter-rouge">Create</code> page with unsaved changes. To avoid data loss, you can use this ability to ask the user to confirm before leaving a page with unsaved changes.</p>

<p><img src="./img/warn_when_unsaved_changes.png" alt="Warn About Unsaved Changes" /></p>

<p>Warning about unsaved changes is an opt-in feature: you must set the <code class="language-plaintext highlighter-rouge">warnWhenUnsavedChanges</code> prop in the form component to enable it:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">TagEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">warnWhenUnsavedChanges</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextField</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"name"</span> <span class="p">/&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>And that’s all. <code class="language-plaintext highlighter-rouge">warnWhenUnsavedChanges</code> works for both <code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code>. In fact, this feature is provided by a custom hook called <code class="language-plaintext highlighter-rouge">useWarnWhenUnsavedChanges()</code>, which you can use in your own react-final-form forms.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Form</span><span class="p">,</span> <span class="nx">Field</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-final-form</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useWarnWhenUnsavedChanges</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">MyForm</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Form</span> <span class="na">onSubmit</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/*...*/</span><span class="p">}</span><span class="si">}</span> <span class="na">component</span><span class="p">=</span><span class="si">{</span><span class="nx">FormBody</span><span class="si">}</span> <span class="p">/&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">FormBody</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">handleSubmit</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// enable the warn when unsaved changes feature</span>
    <span class="nf">useWarnWhenUnsavedChanges</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">form</span> <span class="na">onSubmit</span><span class="p">=</span><span class="si">{</span><span class="nx">handleSubmit</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">id</span><span class="p">=</span><span class="s">"firstname-label"</span><span class="p">&gt;</span>First Name<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">Field</span> <span class="na">name</span><span class="p">=</span><span class="s">"firstName"</span> <span class="na">aria-labelledby</span><span class="p">=</span><span class="s">"firstname-label"</span> <span class="na">component</span><span class="p">=</span><span class="s">"input"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="p">=</span><span class="s">"submit"</span><span class="p">&gt;</span>Submit<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p><strong>Tip</strong>: You can customize the message displayed in the confirm dialog by setting the <code class="language-plaintext highlighter-rouge">ra.message.unsaved_changes</code> message in your i18nProvider.</p>

<h2 id="setting-empty-values-to-null">Setting Empty Values To Null</h2>

<p><code class="language-plaintext highlighter-rouge">&lt;SimpleForm&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;TabbedForm&gt;</code> recreate deleted or missing attributes based on its <code class="language-plaintext highlighter-rouge">initialValues</code> in order to send them to the data provider with a <code class="language-plaintext highlighter-rouge">null</code> value, as most APIs requires all attributes for a given record, even if they are nullable.</p>

<p>It is possible to opt-out this default behavior by passing the <code class="language-plaintext highlighter-rouge">sanitizeEmptyValues</code> prop:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">sanitizeEmptyValues</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"title"</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">JsonInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"body"</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="displaying-fields-or-inputs-depending-on-the-user-permissions">Displaying Fields or Inputs Depending on the User Permissions</h2>

<p>You might want to display some fields, inputs or filters only to users with specific permissions.</p>

<p>Before rendering the <code class="language-plaintext highlighter-rouge">Create</code> and <code class="language-plaintext highlighter-rouge">Edit</code> components, react-admin calls the <code class="language-plaintext highlighter-rouge">authProvider.getPermissions()</code> method, and passes the result to the component as the <code class="language-plaintext highlighter-rouge">permissions</code> prop. It’s up to your <code class="language-plaintext highlighter-rouge">authProvider</code> to return whatever you need to check roles and permissions inside your component.</p>

<p>Here is an example inside a <code class="language-plaintext highlighter-rouge">Create</code> view with a <code class="language-plaintext highlighter-rouge">SimpleForm</code> and a custom <code class="language-plaintext highlighter-rouge">Toolbar</code>:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">UserCreateToolbar</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">permissions</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="o">=&gt;</span>
    <span class="p">&lt;</span><span class="nc">Toolbar</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SaveButton</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"user.action.save_and_show"</span>
            <span class="na">redirect</span><span class="p">=</span><span class="s">"show"</span>
            <span class="na">submitOnEnter</span><span class="p">=</span><span class="si">{</span><span class="kc">true</span><span class="si">}</span>
        <span class="p">/&gt;</span>
        <span class="si">{</span><span class="nx">permissions</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">admin</span><span class="dl">'</span> <span class="o">&amp;&amp;</span>
            <span class="p">&lt;</span><span class="nc">SaveButton</span>
                <span class="na">label</span><span class="p">=</span><span class="s">"user.action.save_and_add"</span>
                <span class="na">redirect</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span>
                <span class="na">submitOnEnter</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span>
                <span class="na">variant</span><span class="p">=</span><span class="s">"text"</span>
            <span class="p">/&gt;</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nc">Toolbar</span><span class="p">&gt;;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">UserCreate</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">permissions</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="o">=&gt;</span>
    <span class="p">&lt;</span><span class="nc">Create</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span>
            <span class="na">toolbar</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">UserCreateToolbar</span> <span class="na">permissions</span><span class="p">=</span><span class="si">{</span><span class="nx">permissions</span><span class="si">}</span> <span class="p">/&gt;</span><span class="si">}</span>
            <span class="na">initialValues</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">role</span><span class="p">:</span> <span class="dl">'</span><span class="s1">user</span><span class="dl">'</span> <span class="p">}</span><span class="si">}</span>
        <span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"name"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="p">[</span><span class="nf">required</span><span class="p">()]</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="si">{</span><span class="nx">permissions</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">admin</span><span class="dl">'</span> <span class="o">&amp;&amp;</span>
                <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"role"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="p">[</span><span class="nf">required</span><span class="p">()]</span><span class="si">}</span> <span class="p">/&gt;</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Create</span><span class="p">&gt;;</span>
</code></pre></div></div>

<p><strong>Tip</strong>: Note how the <code class="language-plaintext highlighter-rouge">permissions</code> prop is passed down to the custom <code class="language-plaintext highlighter-rouge">toolbar</code> component.</p>

<p>This also works inside an <code class="language-plaintext highlighter-rouge">Edition</code> view with a <code class="language-plaintext highlighter-rouge">TabbedForm</code>, and you can hide a <code class="language-plaintext highlighter-rouge">FormTab</code> completely:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">UserEdit</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">permissions</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="o">=&gt;</span>
    <span class="p">&lt;</span><span class="nc">Edit</span> <span class="na">title</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">UserTitle</span> <span class="p">/&gt;</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">TabbedForm</span> <span class="na">initialValues</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">role</span><span class="p">:</span> <span class="dl">'</span><span class="s1">user</span><span class="dl">'</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">FormTab</span> <span class="na">label</span><span class="p">=</span><span class="s">"user.form.summary"</span><span class="p">&gt;</span>
                <span class="si">{</span><span class="nx">permissions</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">admin</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">disabled</span> <span class="na">source</span><span class="p">=</span><span class="s">"id"</span> <span class="p">/&gt;</span><span class="si">}</span>
                <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"name"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nf">required</span><span class="p">()</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nc">FormTab</span><span class="p">&gt;</span>
            <span class="si">{</span><span class="nx">permissions</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">admin</span><span class="dl">'</span> <span class="o">&amp;&amp;</span>
                <span class="p">&lt;</span><span class="nc">FormTab</span> <span class="na">label</span><span class="p">=</span><span class="s">"user.form.security"</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nc">TextInput</span> <span class="na">source</span><span class="p">=</span><span class="s">"role"</span> <span class="na">validate</span><span class="p">=</span><span class="si">{</span><span class="nf">required</span><span class="p">()</span><span class="si">}</span> <span class="p">/&gt;</span>
                <span class="p">&lt;/</span><span class="nc">FormTab</span><span class="p">&gt;</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nc">TabbedForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;;</span>
</code></pre></div></div>

<h2 id="changing-the-success-or-failure-notification-message">Changing The Success or Failure Notification Message</h2>

<p>Once the <code class="language-plaintext highlighter-rouge">dataProvider</code> returns successfully after save, users see a generic notification (“Element created” / “Element updated”). You can customize this message by passing a custom success side effect function as <a href="#onsuccess">the <code class="language-plaintext highlighter-rouge">&lt;Edit onSuccess&gt;</code> prop</a>:</p>

<p>By default, when saving with optimistic rendering, the <code class="language-plaintext highlighter-rouge">onSuccess</code> callback is called immediately. To change that, you need to pass <code class="language-plaintext highlighter-rouge">undoable={false}</code> to your <code class="language-plaintext highlighter-rouge">&lt;Edit /&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;Create /&gt;</code> component. The <code class="language-plaintext highlighter-rouge">onSuccess</code> callback will then be called at the end of the dataProvider call.</p>

<p>In addition, the saved object will not be available as an argument of the <code class="language-plaintext highlighter-rouge">onSuccess</code> callback method when <code class="language-plaintext highlighter-rouge">undoable</code> feature is enabled.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Edit</span><span class="p">,</span> <span class="nx">useNotify</span><span class="p">,</span> <span class="nx">useRedirect</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">notify</span> <span class="o">=</span> <span class="nf">useNotify</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">redirect</span> <span class="o">=</span> <span class="nf">useRedirect</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">onSuccess</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">notify</span><span class="p">(</span><span class="dl">'</span><span class="s1">Post saved successfully</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// default message is 'ra.notification.updated'</span>
        <span class="nf">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">list</span><span class="dl">'</span><span class="p">,</span> <span class="nx">props</span><span class="p">.</span><span class="nx">basePath</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">onSuccess</span><span class="p">=</span><span class="si">{</span><span class="nx">onSuccess</span><span class="si">}</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You can do the same for error notifications, e.g. to display a different message depending on the error returned by the <code class="language-plaintext highlighter-rouge">dataProvider</code>:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Edit</span><span class="p">,</span> <span class="nx">useNotify</span><span class="p">,</span> <span class="nx">useRedirect</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">PostEdit</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">notify</span> <span class="o">=</span> <span class="nf">useNotify</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">redirect</span> <span class="o">=</span> <span class="nf">useRedirect</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">onFailure</span> <span class="o">=</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">code</span> <span class="o">==</span> <span class="mi">123</span><span class="p">)</span> <span class="p">{</span>
            <span class="nf">notify</span><span class="p">(</span><span class="dl">'</span><span class="s1">Could not save changes: concurrent edition in progress</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">warning</span><span class="dl">'</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nf">notify</span><span class="p">(</span><span class="dl">'</span><span class="s1">ra.notification.http_error</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">warning</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="nf">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">list</span><span class="dl">'</span><span class="p">,</span> <span class="nx">props</span><span class="p">.</span><span class="nx">basePath</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return </span><span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">Edit</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">onFailure</span><span class="p">=</span><span class="si">{</span><span class="nx">onFailure</span><span class="si">}</span><span class="p">&gt;</span>
            ...
        <span class="p">&lt;/</span><span class="nc">Edit</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If the form has several save buttons, you can also pass a custom <code class="language-plaintext highlighter-rouge">onSuccess</code> or <code class="language-plaintext highlighter-rouge">onFailure</code> function to the <code class="language-plaintext highlighter-rouge">&lt;SaveButton&gt;</code> components, to have a different message and/or redirection depending on the submit button clicked.</p>

<p><strong>Tip</strong>: The notify message will be translated.</p>

<h2 id="altering-the-form-values-before-submitting">Altering the Form Values Before Submitting</h2>

<p>Sometimes, you may want to alter the form values before sending them to the <code class="language-plaintext highlighter-rouge">dataProvider</code>. For those cases, use <a href="#transform">the <code class="language-plaintext highlighter-rouge">transform</code> prop</a> either on the view component (<code class="language-plaintext highlighter-rouge">&lt;Create&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;Edit&gt;</code>) or on the <code class="language-plaintext highlighter-rouge">&lt;SaveButton&gt;</code> component.</p>

<p>In the following example, a create view for a Post displays a form with two submit buttons. Both buttons create a new record, but the ‘save and notify’ button should trigger an email to other admins on the server side. The <code class="language-plaintext highlighter-rouge">POST /posts</code> API route only sends the email when the request contains a special HTTP header.</p>

<p>So the save button with ‘save and notify’ will <em>transform</em> the record before react-admin calls the <code class="language-plaintext highlighter-rouge">dataProvier.create()</code> method, adding a <code class="language-plaintext highlighter-rouge">notify</code> field:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">PostCreateToolbar</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Toolbar</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SaveButton</span> <span class="na">submitOnEnter</span><span class="p">=</span><span class="si">{</span><span class="kc">true</span><span class="si">}</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">SaveButton</span>
            <span class="na">label</span><span class="p">=</span><span class="s">"post.action.save_and_notify"</span>
            <span class="na">transform</span><span class="p">=</span><span class="si">{</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="p">...</span><span class="nx">data</span><span class="p">,</span> <span class="na">notify</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span><span class="si">}</span>
            <span class="na">submitOnEnter</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span>
        <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Toolbar</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">PostCreate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Create</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">SimpleForm</span> <span class="na">toolbar</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">PostCreateToolbar</span> <span class="p">/&gt;</span><span class="si">}</span><span class="p">&gt;</span>
            // ...
        <span class="p">&lt;/</span><span class="nc">SimpleForm</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Create</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<p>Then, in the <code class="language-plaintext highlighter-rouge">dataProvider.create()</code> code, detect the presence of the <code class="language-plaintext highlighter-rouge">notify</code> field in the data, and add the HTTP header if necessary. Something like:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">dataProvider</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="na">create</span><span class="p">:</span> <span class="p">(</span><span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">notify</span><span class="p">,</span> <span class="p">...</span><span class="nx">record</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Headers</span><span class="p">({</span>
            <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">});</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">notify</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">headers</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">X-Notify</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">true</span><span class="dl">'</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nf">httpClient</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">apiUrl</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">resource</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">record</span><span class="p">),</span>
            <span class="nx">headers</span><span class="p">,</span>
        <span class="p">}).</span><span class="nf">then</span><span class="p">(({</span> <span class="nx">json</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">({</span>
            <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="p">...</span><span class="nx">record</span><span class="p">,</span> <span class="na">id</span><span class="p">:</span> <span class="nx">json</span><span class="p">.</span><span class="nx">id</span> <span class="p">},</span>
        <span class="p">}));</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="using-onsave-to-alter-the-form-submission-behavior">Using <code class="language-plaintext highlighter-rouge">onSave</code> To Alter the Form Submission Behavior</h2>

<p><strong>Deprecated</strong>: use the <code class="language-plaintext highlighter-rouge">&lt;Save onSuccess&gt;</code> prop instead.</p>

<p>React-admin provides a way to override the data provider call executed upon submission, and its side effects, in the <code class="language-plaintext highlighter-rouge">&lt;SaveButton&gt;</code>. It’s called <code class="language-plaintext highlighter-rouge">onSave</code>, and here is how you would use it:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
    <span class="nx">SaveButton</span><span class="p">,</span>
    <span class="nx">Toolbar</span><span class="p">,</span>
    <span class="nx">useCreate</span><span class="p">,</span>
    <span class="nx">useRedirect</span><span class="p">,</span>
    <span class="nx">useNotify</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-admin</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">SaveWithNoteButton</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">create</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useCreate</span><span class="p">(</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">redirectTo</span> <span class="o">=</span> <span class="nf">useRedirect</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">notify</span> <span class="o">=</span> <span class="nf">useNotify</span><span class="p">();</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">basePath</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">props</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">handleSave</span> <span class="o">=</span> <span class="nf">useCallback</span><span class="p">(</span>
        <span class="p">(</span><span class="nx">values</span><span class="p">,</span> <span class="nx">redirect</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nf">create</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="na">payload</span><span class="p">:</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="p">...</span><span class="nx">values</span><span class="p">,</span> <span class="na">average_note</span><span class="p">:</span> <span class="mi">10</span> <span class="p">}</span> <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="na">onSuccess</span><span class="p">:</span> <span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="nx">newRecord</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="nf">notify</span><span class="p">(</span><span class="dl">'</span><span class="s1">ra.notification.created</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">info</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
                            <span class="na">smart_count</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="p">});</span>
                        <span class="nf">redirectTo</span><span class="p">(</span><span class="nx">redirect</span><span class="p">,</span> <span class="nx">basePath</span><span class="p">,</span> <span class="nx">newRecord</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">newRecord</span><span class="p">);</span>
                    <span class="p">},</span>
                <span class="p">}</span>
            <span class="p">);</span>
        <span class="p">},</span>
        <span class="p">[</span><span class="nx">create</span><span class="p">,</span> <span class="nx">notify</span><span class="p">,</span> <span class="nx">redirectTo</span><span class="p">,</span> <span class="nx">basePath</span><span class="p">]</span>
    <span class="p">);</span>
    <span class="c1">// set onSave props instead of handleSubmitWithRedirect</span>
    <span class="k">return</span> <span class="p">&lt;</span><span class="nc">SaveButton</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">onSave</span><span class="p">=</span><span class="si">{</span><span class="nx">handleSave</span><span class="si">}</span> <span class="p">/&gt;;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">onSave</code> value should be a function expecting 2 arguments: the form values to save, and the redirection to perform.</p>

                </div>
                <div class="col hide-on-small-only m3 xl3 offset-xl1">
                    <div class="toc-wrapper">
                        <div style="height: 1px;">
                            <ul class="section table-of-contents pushpin">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="/js/materialize.min.js"></script>
    <script src="/js/prism.js"></script>
    <script>
        function slugify(text) {
            return text.toString().toLowerCase()
                .replace(/\s+/g, '-')           // Replace spaces with -
                .replace(/[^\w\-]+/g, '')       // Remove all non-word chars
                .replace(/\-\-+/g, '-')         // Replace multiple - with single -
                .replace(/^-+/, '')             // Trim - from start of text
                .replace(/-+$/, '');            // Trim - from end of text
        }
        document.addEventListener('DOMContentLoaded', function () {
            /* Generate table of contents */
            document.querySelectorAll('.markdown-section h2').forEach(element => {
                element.classList.add('scrollspy');
                var a = document.createElement('a');
                a.href = "#" + slugify(element.innerText);
                a.innerText = element.innerText;
                var li = document.createElement('li');
                li.appendChild(a);
                document.querySelector('.table-of-contents').appendChild(li)
            })
            M.Sidenav.init(document.querySelectorAll('.sidenav'));
            M.Pushpin.init(document.querySelector('.pushpin'), { offset: 75, top: 75 });
            M.ScrollSpy.init(document.querySelectorAll('.scrollspy'));
            M.Dropdown.init(document.querySelectorAll('.dropdown-trigger'));
        });
    </script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script type="text/javascript">
        docsearch({
            apiKey: '32f254b1de6a25a96665d1229b6eb8f7',
            indexName: 'marmelab-react-admin',
            inputSelector: '#query',
            debug: false, // Set debug to true if you want to inspect the dropdown 
            autocompleteOptions: {
                appendTo: '#search',
                hint: false,
            }
        }); 
    </script>
</body>

</html>
